webpackJsonp([31],{dJVa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Dd8w"),i=a.n(l),s=a("WorT"),n=a("4WFj"),o=a("Yehp"),r=a("8e4C"),u={mixins:[s.a,n.a],data:function(){return{pageNum:1,pageSize:20,pageSizes:r.a.pageSizeStart20,loading:!1,exportLoading:!1,total:0,tableData:[],columns:[{title:"供应商",dataIndex:"supplierName",ellipsis:!0,minWidth:120},{title:"资质名称",dataIndex:"qualificationModelName",ellipsis:!0,minWidth:120},{title:"状态",dataIndex:"statusVal",minWidth:90},{title:"有效期",ellipsis:!0,dataIndex:"validDateDesc",minWidth:190},{title:"驳回原因",dataIndex:"rejectInfo",ellipsis:!0,minWidth:100},{title:"上传时间",dataIndex:"uploadTime",ellipsis:!0,minWidth:170},{title:"审核时间",dataIndex:"checkTime",ellipsis:!0,minWidth:170},{title:"操作",fixed:"right",width:150,operation:[{label:"查看",icon:"el-icon-view",clickFunc:this.goDetailPage},{label:"上传",icon:"el-icon-top",clickFunc:this.goEditPage,isShow:function(e){return 0===e.status||3===e.status||4===e.status||5===e.status}}]}],searchContent:{supplierIds:[],qualificationModelName:"",status:""},statusOptions:[{label:"全部",value:""},{label:"待上传",value:0},{label:"待审核",value:1},{label:"审核通过",value:2},{label:"已驳回",value:3},{label:"已过期",value:4},{label:"即将过期",value:5},{label:"即将过期-更换中",value:6}]}},methods:{changeSize:function(e){this.pageSize=e,this.doSearchHandle()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandle()},doSearchHandle:function(e){var t=this;this.loading=!0,!0===e&&(this.pageNum=1),this.$http.post(o.a.qualificationList,i()({},this.searchContent,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(e){if(t.loading=!1,0===e.code){var a=e.data&&e.data.result&&e.data.result.length?e.data.result:[];return a.forEach(function(e){var a=t.statusOptions.filter(function(t){return t.value===e.status})[0];e.statusVal=a?a.label:"-",e.validDateDesc=e.validDateStart&&e.validDateEnd?e.validDateStart+"至"+e.validDateEnd:""}),t.tableData=a,void(t.total=e.data&&e.data.total?e.data.total:0)}throw new Error(e.msg)}).catch(function(e){t.loading=!1,t.$tip.notify(e.message||"","error","系统提示")})},goDetailPage:function(e){this.$router.push("/sc_qua/detail/001/"+e.id+"/"+e.qualificationModelId+"/"+e.supplierId)},goEditPage:function(e){this.$router.push("/sc_qua/edit/001/"+e.id+"/"+e.qualificationModelId+"/"+e.supplierId)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"选择供应商",multiple:"","collapse-tags":"",size:"small"},model:{value:e.searchContent.supplierIds,callback:function(t){e.$set(e.searchContent,"supplierIds",t)},expression:"searchContent.supplierIds"}},e._l(e.vendors,function(e){return a("el-option",{key:e.vendorNo,attrs:{label:e.vendorName,value:e.vendorNo}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"资质名称"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入资质名称",clearable:""},model:{value:e.searchContent.qualificationModelName,callback:function(t){e.$set(e.searchContent,"qualificationModelName","string"==typeof t?t.trim():t)},expression:"searchContent.qualificationModelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"状态",filterable:"",clearable:"",size:"small"},model:{value:e.searchContent.status,callback:function(t){e.$set(e.searchContent,"status",t)},expression:"searchContent.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandle(!0)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-wraper"},[a("bl-table",{attrs:{loading:e.loading,border:!1,dataSource:e.tableData,columns:e.columns}}),e._v(" "),a("bl-pagination",{attrs:{showPagination:e.tableData.length>0,pageNum:e.pageNum,total:e.total,pageSizes:e.pageSizes},on:{"size-change":e.changeSize,"current-change":e.changeCurrent}})],1)])},staticRenderFns:[]},d=a("VU/8")(u,c,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=31.55159fafd6e1192e1e00.1615898974438.js.map