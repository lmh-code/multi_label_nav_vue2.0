webpackJsonp([64],{"4trw":function(t,e){},a4wp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),o=a("ssT3"),r=(a("oAV5"),"/plateform/a/mall/saleActivity/listPage"),s="/plateform/a/mall/saleActivity/delActivity",c="/plateform/a/mall/saleActivity/failActivity",l={data:function(){return{loading:!1,pageNum:1,pageSize:10,total:0,cityOptions:[],searchContent:{platformId:5,activityName:"",activityStatus:""},statusOptions:[{label:"全部",value:0},{label:"已失效",value:1},{label:"未开始",value:2},{label:"进行中",value:3}],tableData:[]}},mounted:function(){var t=o.a.get("searchContentForLongPG");this.$route.meta.keepAlive&&t&&(this.pageNum=t.pageNum,this.searchContent=t.searchContent,o.a.remove("searchContentForLongPG")),this.doSearchHandel()},methods:{goAddGoodsPage:function(){this.$router.push("/long_pgm/add_goods")},activityStatusFormatter:function(t,e,a,i){return 1===a?"已失效":2===a?"未开始":3===a?"进行中":void 0},changeSize:function(t){this.pageSize=t,this.doSearchHandel()},changeCurrent:function(t){this.pageNum=t,this.doSearchHandel()},doSearchHandel:function(t){var e=this;!0===t&&(this.pageNum=1),this.loading=!0,this.$http.post(r,n()({},this.searchContent,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(t){if(e.loading=!1,0!==t.code)throw new Error(t.msg);t.data?(t.data.result&&t.data.result.length?e.tableData=t.data.result:e.tableData=[],e.total=t.data.total):(e.total=0,e.tableData=[])}).catch(function(t){e.loading=!1,e.$notify.error({title:"提示",message:t.message})})},deleteItem:function(t){var e=this,a=t.id;this.$confirm("您确定要执行删除操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(s,{activityId:a}).then(function(t){if(0===t.code)return e.$message.success("删除成功"),void e.doSearchHandel();throw new Error(t.msg)}).catch(function(t){e.$notify.error({title:"提示",message:t.message})})}).catch(function(){})},activeOver:function(t){var e=this,a=t.id;this.$confirm("您确定要执行试下操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post(c,{activityId:a}).then(function(t){if(0===t.code)return e.$message.success("设置失效成功"),void e.doSearchHandel();throw new Error(t.msg)}).catch(function(t){e.$notify.error({title:"提示",message:t.message})})}).catch(function(){})},editItem:function(t,e){var a={pageNum:this.pageNum,searchContent:this.searchContent};o.a.set("searchContentForLongPG",a);var i=t.id,n=t.activityStatus;"copy"===e?this.$router.push("/long_pgm/edit_goods/"+i+"?type="+e):"edit"===e&&this.$router.push("/long_pgm/edit_goods/"+i+"?status="+n+"&type="+e)},showItem:function(t){var e={pageNum:this.pageNum,searchContent:this.searchContent};o.a.set("searchContentForLongPG",e);var a=t.id;this.$router.push("/long_pgm/show_goods/"+a)}},beforeRouteLeave:function(t,e,a){e.meta.keepAlive=!1,a()}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"handel-search-wraper"},[a("div",{staticClass:"handel-wraper"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.goAddGoodsPage}},[t._v("添加预售周期")])],1),t._v(" "),a("hr",{staticClass:"s-slip"}),t._v(" "),a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:t.searchContent,"label-position":"top"}},[a("el-form-item",{attrs:{label:"预售周期名称"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入名称关键字",size:"small",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doSearchHandel(!0)}},model:{value:t.searchContent.activityName,callback:function(e){t.$set(t.searchContent,"activityName","string"==typeof e?e.trim():e)},expression:"searchContent.activityName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择状态",clearable:"",size:"small"},on:{change:function(e){return t.doSearchHandel(!0)}},model:{value:t.searchContent.activityStatus,callback:function(e){t.$set(t.searchContent,"activityStatus",e)},expression:"searchContent.activityStatus"}},t._l(t.statusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.doSearchHandel(!0)}}},[t._v("搜索")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"table-wraper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"empty-text":"没有查询到您想要的数据",size:"small"}},[a("el-table-column",{attrs:{"min-width":"120px",prop:"activityName",label:"预售周期名称"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"cityName",label:"城市"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"200px",label:"有效期"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.startDate&&e.row.endDate?a("div",{staticClass:"date-wrap-inline"},[a("div",[a("p",[t._v(t._s(e.row.startDate.substr(0,10)))]),t._v(" "),a("p",[t._v(t._s(e.row.startDate.substr(11,8)))])]),t._v(" "),a("div",[t._v(" - ")]),t._v(" "),a("div",[a("p",[t._v(t._s(e.row.endDate.substr(0,10)))]),t._v(" "),a("p",[t._v(t._s(e.row.endDate.substr(11,8)))])])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"200px",label:"提货日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n            "+t._s(e.row.pickUpStartDate)+" - "+t._s(e.row.pickUpEndDate)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"activityStatus",label:"状态",formatter:t.activityStatusFormatter}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.activityStatus?a("div",[a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){return t.showItem(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.deleteItem(e.row)}}},[t._v("删除")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){return t.editItem(e.row,"copy")}}},[t._v("复制")])],1)]):2===e.row.activityStatus?a("div",[a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.editItem(e.row,"edit")}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.deleteItem(e.row)}}},[t._v("删除")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){return t.showItem(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){return t.editItem(e.row,"copy")}}},[t._v("复制")])],1)]):3===e.row.activityStatus?a("div",[a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.editItem(e.row,"edit")}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-download"},on:{click:function(a){return t.activeOver(e.row)}}},[t._v("失效")])],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){return t.showItem(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){return t.editItem(e.row,"copy")}}},[t._v("复制")])],1)]):t._e()]}}])})],1),t._v(" "),t.total>0?a("el-pagination",{staticClass:"tc mt20",attrs:{background:"","current-page":t.pageNum,"page-sizes":[10,50,100,150,200],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.changeSize,"current-change":t.changeCurrent,"update:currentPage":function(e){t.pageNum=e},"update:current-page":function(e){t.pageNum=e}}}):t._e()],1)])},staticRenderFns:[]};var d=a("VU/8")(l,u,!1,function(t){a("4trw")},null,null);e.default=d.exports}});
//# sourceMappingURL=64.0c59dbd1bd49b5db7f8a.js.map