webpackJsonp([148],{JPSh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("ssT3"),i="/plateform/a/apk/version/getApkList",r="/plateform/a/apk/version/deleteApk",o={data:function(){return{loading:!1,pageNum:1,pageSize:10,total:0,searchContent:{startDate:"",endDate:"",user:"",moduleType:0,key:""},tableData:[]}},mounted:function(){var e=n.a.get("searchContentForAPK");this.$route.meta.keepAlive&&e&&(this.pageNum=e.pageNum,this.searchContent=e.searchContent,n.a.remove("searchContentForAPK")),this.doSearchHandel()},components:{},methods:{formatUpdateType:function(e,t,a){return 0==a?"正常":1==a?"强制升级":void 0},changeSize:function(e){this.pageSize=e,this.doSearchHandel()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandel()},doSearchHandel:function(e){var t=this;!0===e&&(this.pageNum=1),this.loading=!0,this.$http.post(i,{pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){if(t.loading=!1,0!==e.code)throw new Error(e.msg);e.data&&e.data.result&&e.data.result.length?(t.tableData=e.data.result,t.total=e.data.total):(t.tableData=[],t.total=0)}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})},goAddApkPage:function(){this.$router.push("/apk/add")},editItem:function(e){var t={pageNum:this.pageNum,searchContent:this.searchContent};n.a.set("searchContentForAPK",t),n.a.set("ApkDate",e),this.$router.push("/apk/edit")},deleteItem:function(e){var t=this;this.$confirm("您确定要删除所选Apk版本吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(r,{id:e}).then(function(e){if(0===e.code)return t.$message.success("删除成功"),void t.doSearchHandel();throw new Error(e.msg)}).catch(function(e){t.$notify.error({title:"提示",message:e.message})})}).catch(function(){})},apkTypeFormater:function(e,t,a){return 0===a?"门店端":1===a?"TV端":a}},beforeRouteLeave:function(e,t,a){t.meta.keepAlive=!1,a()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"handel-search-wraper"},[a("div",{staticClass:"handel-wraper"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.goAddApkPage}},[e._v("添加Apk版本")])],1)]),e._v(" "),a("div",{staticClass:"table-wraper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"没有查询到您想要的数据",size:"small"}},[a("el-table-column",{attrs:{"min-width":"100",prop:"versionName",label:"版本名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"150",prop:"des",label:"更新说明"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"apkType",label:"Apk类型",formatter:e.apkTypeFormater}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"210",prop:"url",label:"下载地址"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"versionCode",label:"内部版本号"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"updateType",formatter:e.formatUpdateType,label:"升级类型"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"160",prop:"updateTime",label:"发布时间"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"70",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.editItem(t.row)}}},[e._v("编辑")])],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.deleteItem(t.row.id)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),e.total>0?a("el-pagination",{staticClass:"tc mt20",attrs:{background:"","current-page":e.pageNum,"page-sizes":[10,50,100,150,200],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1)])},staticRenderFns:[]},s=a("VU/8")(o,l,!1,null,null,null);t.default=s.exports}});
//# sourceMappingURL=148.3602d1ab59d22666bf44.js.map