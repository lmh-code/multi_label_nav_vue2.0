{"version":3,"sources":["webpack:///src/components/GoodsMgt/MtGoods/MtGoods/AddMtGoods.vue","webpack:///./src/components/GoodsMgt/MtGoods/MtGoods/AddMtGoods.vue?6647","webpack:///./src/components/GoodsMgt/MtGoods/MtGoods/AddMtGoods.vue"],"names":["fileUrlList","goodsMgtUrl","AddMtGoods","data","isDisabled","imageUploadLoading","addParamMesg","goodsId","goodsName","goodsNametemp","price","saleType","platformTagsList","platformTags","categoryName","platformId","shelfStatus","imgUrl","spec","categoryList","goodsQueryVal","queryGoodsAsyncLoading","queryGoodsSearchAsyncList","cateDefaultProps","children","label","value","created","this","getCategoryId","methods","_this","$http","post","then","res","code","Error","msg","_idx","toString","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","child","length","err","return","catch","e","console","log","message","queryGoodsSearchAsync","queryString","_this2","_params","searchValue","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","goodsNo","chooseGoodsChangeHandle","checkedItem","filter","j","skuNo","doSaveHandel","_this3","$message","test","extends_default","setTimeout","$router","push","$notify","error","title","doCancelHandel","_this4","$confirm","confirmButtonText","cancelButtonText","type","categoryChange","_val","_this5","currentValArr","currentLabelsArr","$refs","cascaderCategory","currentLabels","imageUploadRegMt","file","_this6","isPic","indexOf","isJPG","isSize","promise_default","a","resolve","reject","_URL","window","URL","webkitURL","img","Image","onload","width","height","src","createObjectURL","emitUpload","_this7","getToken","qiniu_min","fileName","token","subscribe","complete","urlImage","key","_fileName","_this8","MtGoods_AddMtGoods","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","required","filterable","remote","size","reserve-keyword","placeholder","remote-method","loading","on","change","callback","$$v","expression","_l","_v","$set","disabled","slot","options","clearable","props","action","show-file-list","before-upload","http-request","directives","name","rawName","staticStyle","color","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/117.ae80909b2a75c9ed6399.js","sourcesContent":["<style>\n  @import \"../../../../../static/style/file_upload.css\";\n</style>\n<template>\n  <div class=\"add-form-wraper\">\n    <el-form ref=\"form\" :model=\"addParamMesg\" label-width=\"160px\">\n      <el-form-item label=\"选择商品\" required>\n        <el-select\n          v-model=\"goodsQueryVal\"\n          filterable\n          remote\n          size=\"small\" \n          class=\"add-input\"\n          reserve-keyword\n          placeholder=\"请输入SKU编码/商品名称关键词搜索\"\n          :remote-method=\"queryGoodsSearchAsync\"\n          :loading=\"queryGoodsAsyncLoading\"\n          @change=\"chooseGoodsChangeHandle\">\n          <el-option\n            v-for=\"item in queryGoodsSearchAsyncList\"\n            :key=\"item.goodsId\"\n            :label=\"item.goodsNametemp\"\n            :value=\"item.goodsId\">\n          </el-option>\n        </el-select>\n        <span>请输入SKU编码/商品名称关键词,在搜索到的数据中选择所需的SKU</span>\n      </el-form-item>\n        \n      <el-form-item label=\"商品名称\" required>\n        <el-input v-model=\"addParamMesg.goodsName\" size=\"small\" class=\"add-input\" placeholder=\"请输入商品名称\"></el-input>\n        <span>商品名称,限制30个字</span>\n      </el-form-item>\n\n      <el-form-item label=\"规格\">\n        <el-input v-model=\"addParamMesg.spec\" size=\"small\" class=\"add-input\" disabled></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"平台售价\" required>\n        <el-input v-model=\"addParamMesg.price\" size=\"small\" class=\"add-input\" placeholder=\"请输入平台售价\">\n          <el-button slot=\"append\">元</el-button>\n        </el-input>\n      </el-form-item>\n\n      <el-form-item label=\"平台分类\" required>\n        <el-cascader\n          placeholder=\"请选择平台分类\"\n          class=\"add-input\"\n          :options=\"categoryList\"\n          size=\"small\"\n          clearable\n          filterable\n          ref=\"cascaderCategory\"\n          @change=\"categoryChange\"\n          :props=\"cateDefaultProps\"\n          v-model=\"addParamMesg.platformTagsList\">\n        </el-cascader>\n      </el-form-item>\n\n      <el-form-item label=\"平台商品图片\">\n        <div class=\"f-u-w\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"\"\n            :show-file-list=\"false\"\n            :before-upload=\"imageUploadRegMt\"\n            :http-request=\"emitUpload\">\n            <div v-loading=\"imageUploadLoading\">\n              <img v-if=\"addParamMesg.imgUrl\" :src=\"addParamMesg.imgUrl\" class=\"avatar\">\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </div>\n          </el-upload>\n          <div class=\"tip-txt-w-8-mt\">\n            <span>选填，请上传800*800像素的JPG图片，为空时，默认使用商品库首图</span>\n          </div>\n        </div>\n      </el-form-item>\n\n      <el-form-item label=\"是否立即上架\" required>\n        <el-radio-group v-model=\"addParamMesg.shelfStatus\" size=\"small\">\n          <el-radio-button label=\"0\">是</el-radio-button>\n          <el-radio-button label=\"1\">否</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n\n      <el-form-item>\n        <span style=\"color:red;\">*</span>提示：保存后自动引入ERP上已引入的所有门店\n      </el-form-item>\n\n      <hr class=\"s-slip-tb\">\n      <el-form-item>\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\">保存</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\n      </el-form-item>\n      \n    </el-form>\n  </div>\n</template>\n\n<script>\n  import Storage from '@/utils/localStorage'\n  import * as utils from '@/utils/utils'\n  import * as qiniu from 'qiniu-js'\n  const fileUrlList = {\n    getQiNiuToken: '/foundation/qiniu/auth/file'\n  }\n  const goodsMgtUrl = {\n    // 添加预售商品-选择商品\n    searchGoods: '/plateform/a/platformCityGoods/presale/add/searchGoods',\n    // 添加/编辑预售商品-保存操作\n    presaleSave: '/plateform/a/platformCityGoods/presale/save',\n    // 三方平台分类获取接口\n    getLevel: '/plateform/a/platformCategory/getLevel'\n  }\n  export default {\n    data() {\n      return {\n        isDisabled: false, // 保存防止多次点击\n        imageUploadLoading: false, // 上传图片loading\n        // 添加内容\n        addParamMesg: {\n          goodsId: '', // 商品ID\n          goodsName: '', // 预售商品名称\n          goodsNametemp: '',\n          price: '', // 原价/售价\n          saleType: 1, // 售卖类型：1：常规；2：预售；3:长周期预售，4：及时达(查询对应售卖类型数据该字段必传，不传入择默认全部)\n          platformTagsList: [], // 选中的分类的list\n          platformTags: '', // 分类ID（商品所属的最具体的上级分类）\n          categoryName: '', // 分类名称\n          platformId: 3, // 渠道ID:1-有赞，2-京东到家，3-美团外卖，4-饿百，5-本来鲜\n          shelfStatus: '0',  // 0：上架，1：下架\n          imgUrl: '', // url\n          spec: '' // 规格\n        },\n        categoryList: [], // 商品分类id\n        goodsQueryVal: '', // 输入的内容\n        queryGoodsAsyncLoading: false,\n        // 商品选择\n        queryGoodsSearchAsyncList: [],\n        // 默认分类参数\n        cateDefaultProps: {\n          children: 'child',\n          label: 'categoryName',\n          value: 'categoryId'\n        }\n\n      }\n    },\n    created() {\n      // 三方平台店内分类\n      this.getCategoryId()\n    },\n    methods: {\n      /**\n       * [getCategoryId 三方平台店内分类]\n       * @return {[type]} [description]\n       */\n      getCategoryId() {\n        this.$http.post(goodsMgtUrl.getLevel, {platformId: this.addParamMesg.platformId}).then(res => {\n          if(res.code === 0) {\n            if(res.data) {\n              let _idx = this.addParamMesg.platformId.toString()\n              if(res.data[_idx]) {\n                for(let item of res.data[_idx]) {\n                  if(item.child && item.child.length === 0) {\n                    item.child = null\n                  }\n                }\n                this.categoryList = res.data[_idx]\n              }\n            }else {\n              this.categoryList = []\n            }\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          console.log(\"提示(三方平台店内分类):\", e.message)\n        })\n      },\n      /**\n       * [queryGoodsSearchAsync 远程选择商品]\n       * @param  {[type]} queryString [description]\n       * @return {[type]}             [description]\n       */\n      queryGoodsSearchAsync(queryString) {\n        if(queryString === '') {\n          return\n        }\n        let _params = {\n          saleType: this.addParamMesg.saleType,\n          searchValue: queryString\n        }\n        this.queryGoodsAsyncLoading = true\n        this.$http.post(goodsMgtUrl.searchGoods, _params).then(res => {\n          this.queryGoodsAsyncLoading = false\n          if(res.code === 0) {\n            if(res.data && res.data.length) {\n              for(let item of res.data) {\n                item.goodsNametemp = item.goodsNo + '-' + item.goodsName + '-' + item.spec\n              }\n              this.queryGoodsSearchAsyncList = res.data\n            }else {\n              this.queryGoodsSearchAsyncList = []\n            }\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.queryGoodsAsyncLoading = false\n          console.log(\"提示(远程搜索商品)：\", e.message)\n        })\n      },\n      /**\n       * [chooseGoodsChangeHandle 当搜索到的商品切换选择时触发]\n       * @param  {[type]} item [description]\n       * @return {[type]}      [description]\n       */\n      chooseGoodsChangeHandle(item) {\n        let checkedItem = this.queryGoodsSearchAsyncList.filter(j => {\n          return j.goodsId == item\n        })[0]\n\n        this.addParamMesg.goodsId = checkedItem.goodsId\n        this.addParamMesg.goodsName = checkedItem.goodsName\n        this.addParamMesg.skuNo = checkedItem.skuNo\n        this.addParamMesg.spec = checkedItem.spec\n      },\n      /**\n       * [doSaveHandel 保存操作]\n       * @return {[type]} [description]\n       */\n      doSaveHandel() {\n        let salePriceReg = /((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$/\n        if(this.addParamMesg.goodsId === \"\" || this.addParamMesg.goodsName === \"\") {\n          this.$message(\"请选择商品\")\n          return\n        }\n\n        if(this.addParamMesg.goodsName === \"\") {\n          this.$message(\"请输入商品名称\")\n          return\n        }else {\n          if(this.addParamMesg.goodsName.length > 30) {\n            this.$message(\"商品名称,限制30个字\")\n            return\n          }\n        }\n\n        if(this.addParamMesg.price == \"\") {\n          this.$message(\"请输入平台售价\")\n          return \n        }else {\n          if(!salePriceReg.test(this.addParamMesg.price)) {\n            this.$message('平台售价是大于0，小数保留小数点后2位') \n            return\n          }\n        }\n\n        if(this.addParamMesg.platformTagsList.length === 0) {\n          this.$message(\"请选择平台分类\")\n          return \n        }else {\n          this.addParamMesg.platformTags = this.addParamMesg.platformTagsList[this.addParamMesg.platformTagsList.length - 1]\n        }\n\n        if(this.addParamMesg.platformTags == \"\") {\n          this.$message(\"请选择平台分类\")\n          return \n        }\n\n        // if(this.addParamMesg.imgUrl == \"\") {\n        //   this.$message(\"请添加平台商品图片\")\n        //   return \n        // }\n\n        this.isDisabled = true\n        this.$http.post(goodsMgtUrl.presaleSave, {...this.addParamMesg}).then(res => {\n          // 保存按钮可再次点击\n          setTimeout(() => {\n            this.isDisabled = false\n          }, 800)\n          if(res.code === 0) {\n            this.$router.push('/mt_goods')\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.isDisabled = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      /**\n       * [doCancelHandel 取消操作]\n       * @return {[type]} [description]\n       */\n      doCancelHandel() {\n        this.$confirm('确定取消吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push('/mt_goods')\n        }).catch(() => {})\n      },\n      /**\n       * [categoryChange 分类发生变化启用]\n       * @param  {[type]} _val [当前选中的值]\n       * @return {[type]}      [description]\n       */\n      categoryChange(_val) {\n        let currentValArr = _val\n        if(currentValArr.length > 0) {\n          this.addParamMesg.platformTags = currentValArr[currentValArr.length - 1]\n        }\n\n        setTimeout(() => {\n          let currentLabelsArr = this.$refs.cascaderCategory.currentLabels\n          if(currentLabelsArr.length > 0) {\n            this.addParamMesg.categoryName = currentLabelsArr[currentLabelsArr.length - 1]\n          }\n        }, 300)\n      },\n      /**\n       * [imageUploadRegMt 上传图片检测美团]\n       * @param  {[type]} file [description]\n       * @return {[type]}      [description]\n       */\n      imageUploadRegMt(file) {\n        const isPic = file.type.indexOf('image/') !== -1\n        const isJPG = file.type === 'image/jpeg'\n        if (!isPic) {\n          this.$message.error('商品图片文件必须是图片格式!')\n        }\n        if (!isJPG) {\n          this.$message.error('商品图片只能是JPG格式!')\n        }\n        /**\n         * [检测上传图片宽高]\n         * @param  {[type]}   resolve [description]\n         * @param  {Function} reject) {                     let width [description]\n         * @param  {[type]}   ()      [description]\n         * @return {[type]}           [description]\n         */\n        const isSize = new Promise(function(resolve, reject) {\n          let width = 800\n          let height = 800  \n\n          let _URL = window.URL || window.webkitURL\n          let img = new Image();\n          img.onload = function() {\n            let valid = img.width >= width && img.height >= height\n            valid ? resolve() : reject()\n          }\n          img.src = _URL.createObjectURL(file)\n        }).then(() => {\n          return file\n        }, () => {\n          this.$message.error('请上传800*800像素的JPG图片!')\n          return Promise.reject()\n        })\n\n        return isPic && isJPG && isSize\n      },\n      /**\n       * [emitUpload 上传图片]\n       * @param  {[type]} e [description]\n       * @return {[type]}   [description]\n       */\n      emitUpload (e) {\n        this.imageUploadLoading = true\n        this.getToken().then((res) => {\n          // 开始上传图片\n          let uploader = qiniu.upload(e.file, res.fileName, res.token)\n          uploader.subscribe({\n            error: () => {\n              this.imageUploadLoading = false\n            },\n            complete: (res) => {\n              let urlImage = 'http://retailimg01.benlailife.com/' + res.key\n              this.addParamMesg.imgUrl = urlImage\n              this.imageUploadLoading = false\n            },\n            next: res => {\n            }\n          })\n        })\n      },\n      /**\n       * [getToken 通过后台封装的接口获取七牛的token]\n       * @return {[type]}            [description]\n       */\n      getToken (_fileName) {\n        return this.$http.post(fileUrlList.getQiNiuToken, {}).then(res => {\n          if (res.code == 0) {\n            let token = res.data.token\n            let fileName = res.data.key\n            return {fileName, token}\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.imageUploadLoading = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      }\n\n    }\n\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/GoodsMgt/MtGoods/MtGoods/AddMtGoods.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMesg,\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":\"选择商品\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"filterable\":\"\",\"remote\":\"\",\"size\":\"small\",\"reserve-keyword\":\"\",\"placeholder\":\"请输入SKU编码/商品名称关键词搜索\",\"remote-method\":_vm.queryGoodsSearchAsync,\"loading\":_vm.queryGoodsAsyncLoading},on:{\"change\":_vm.chooseGoodsChangeHandle},model:{value:(_vm.goodsQueryVal),callback:function ($$v) {_vm.goodsQueryVal=$$v},expression:\"goodsQueryVal\"}},_vm._l((_vm.queryGoodsSearchAsyncList),function(item){return _c('el-option',{key:item.goodsId,attrs:{\"label\":item.goodsNametemp,\"value\":item.goodsId}})}),1),_vm._v(\" \"),_c('span',[_vm._v(\"请输入SKU编码/商品名称关键词,在搜索到的数据中选择所需的SKU\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入商品名称\"},model:{value:(_vm.addParamMesg.goodsName),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"goodsName\", $$v)},expression:\"addParamMesg.goodsName\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"商品名称,限制30个字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"规格\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.addParamMesg.spec),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"spec\", $$v)},expression:\"addParamMesg.spec\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平台售价\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入平台售价\"},model:{value:(_vm.addParamMesg.price),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"price\", $$v)},expression:\"addParamMesg.price\"}},[_c('el-button',{attrs:{\"slot\":\"append\"},slot:\"append\"},[_vm._v(\"元\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平台分类\",\"required\":\"\"}},[_c('el-cascader',{ref:\"cascaderCategory\",staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择平台分类\",\"options\":_vm.categoryList,\"size\":\"small\",\"clearable\":\"\",\"filterable\":\"\",\"props\":_vm.cateDefaultProps},on:{\"change\":_vm.categoryChange},model:{value:(_vm.addParamMesg.platformTagsList),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"platformTagsList\", $$v)},expression:\"addParamMesg.platformTagsList\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平台商品图片\"}},[_c('div',{staticClass:\"f-u-w\"},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"before-upload\":_vm.imageUploadRegMt,\"http-request\":_vm.emitUpload}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.imageUploadLoading),expression:\"imageUploadLoading\"}]},[(_vm.addParamMesg.imgUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.addParamMesg.imgUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"tip-txt-w-8-mt\"},[_c('span',[_vm._v(\"选填，请上传800*800像素的JPG图片，为空时，默认使用商品库首图\")])])],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否立即上架\",\"required\":\"\"}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.addParamMesg.shelfStatus),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"shelfStatus\", $$v)},expression:\"addParamMesg.shelfStatus\"}},[_c('el-radio-button',{attrs:{\"label\":\"0\"}},[_vm._v(\"是\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"1\"}},[_vm._v(\"否\")])],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"提示：保存后自动引入ERP上已引入的所有门店\\n    \")]),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-341021a4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GoodsMgt/MtGoods/MtGoods/AddMtGoods.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-341021a4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddMtGoods.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddMtGoods.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddMtGoods.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-341021a4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddMtGoods.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GoodsMgt/MtGoods/MtGoods/AddMtGoods.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}