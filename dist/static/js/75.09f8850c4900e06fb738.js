webpackJsonp([75],{ET54:function(a,e){},vKVj:function(a,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=s("Dd8w"),o=s.n(t),r=s("BO1k"),d=s.n(r),l=(s("ssT3"),s("oAV5"),s("cpGA"),"/plateform/a/platformCityGoods/presale/add/searchGoods"),i="/plateform/a/platformCityGoods/presale/save",n="/plateform/a/platformCategory/getLevel",c={data:function(){return{isDisabled:!1,imageUploadLoading:!1,addParamMesg:{goodsId:"",goodsName:"",goodsNametemp:"",price:"",saleType:1,platformTagsList:[],platformTags:"",categoryName:"",platformId:6,shelfStatus:"0",imgUrl:"",spec:""},categoryList:[],goodsQueryVal:"",queryGoodsAsyncLoading:!1,queryGoodsSearchAsyncList:[],cateDefaultProps:{children:"child",label:"categoryName",value:"categoryId"}}},created:function(){this.getCategoryId()},methods:{getCategoryId:function(){var a=this;this.$http.post(n,{platformId:this.addParamMesg.platformId}).then(function(e){if(0!==e.code)throw new Error(e.msg);if(e.data){var s=a.addParamMesg.platformId.toString();if(e.data[s]){var t=!0,o=!1,r=void 0;try{for(var l,i=d()(e.data[s]);!(t=(l=i.next()).done);t=!0){var n=l.value;n.child&&0===n.child.length&&(n.child=null)}}catch(a){o=!0,r=a}finally{try{!t&&i.return&&i.return()}finally{if(o)throw r}}a.categoryList=e.data[s]}}else a.categoryList=[]}).catch(function(a){console.log("提示(三方平台店内分类):",a.message)})},queryGoodsSearchAsync:function(a){var e=this;if(""!==a){var s={saleType:this.addParamMesg.saleType,searchValue:a};this.queryGoodsAsyncLoading=!0,this.$http.post(l,s).then(function(a){if(e.queryGoodsAsyncLoading=!1,0!==a.code)throw new Error(a.msg);if(a.data&&a.data.length){var s=!0,t=!1,o=void 0;try{for(var r,l=d()(a.data);!(s=(r=l.next()).done);s=!0){var i=r.value;i.goodsNametemp=i.goodsNo+"-"+i.goodsName+"-"+i.spec}}catch(a){t=!0,o=a}finally{try{!s&&l.return&&l.return()}finally{if(t)throw o}}e.queryGoodsSearchAsyncList=a.data}else e.queryGoodsSearchAsyncList=[]}).catch(function(a){e.queryGoodsAsyncLoading=!1,console.log("提示(远程搜索商品)：",a.message)})}},chooseGoodsChangeHandle:function(a){var e=this.queryGoodsSearchAsyncList.filter(function(e){return e.goodsId==a})[0];this.addParamMesg.goodsId=e.goodsId,this.addParamMesg.goodsName=e.goodsName,this.addParamMesg.skuNo=e.skuNo,this.addParamMesg.spec=e.spec},doSaveHandel:function(){var a=this;""!==this.addParamMesg.goodsId&&""!==this.addParamMesg.goodsName?""!==this.addParamMesg.goodsName?this.addParamMesg.goodsName.length>30?this.$message("商品名称,限制30个字"):""!=this.addParamMesg.price?/((^[1-9]\d*)|^0)(\.\d{0,2}){0,1}$/.test(this.addParamMesg.price)?0!==this.addParamMesg.platformTagsList.length?(this.addParamMesg.platformTags=this.addParamMesg.platformTagsList[this.addParamMesg.platformTagsList.length-1],""!=this.addParamMesg.platformTags?(this.isDisabled=!0,this.$http.post(i,o()({},this.addParamMesg)).then(function(e){if(setTimeout(function(){a.isDisabled=!1},800),0!==e.code)throw new Error(e.msg);a.$router.push("/sf_goods")}).catch(function(e){a.isDisabled=!1,a.$notify.error({title:"提示",message:e.message})})):this.$message("请选择平台分类")):this.$message("请选择平台分类"):this.$message("初始售价是大于0，小数保留小数点后2位"):this.$message("请输入初始售价"):this.$message("请输入商品名称"):this.$message("请选择商品")},doCancelHandel:function(){var a=this;this.$confirm("确定取消吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$router.push("/sf_goods")}).catch(function(){})},categoryChange:function(a){var e=this,s=a;s.length>0&&(this.addParamMesg.platformTags=s[s.length-1]),setTimeout(function(){var a=e.$refs.cascaderCategory.currentLabels;a.length>0&&(e.addParamMesg.categoryName=a[a.length-1])},300)}}},g={render:function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("div",{staticClass:"add-form-wraper"},[s("el-form",{ref:"form",attrs:{model:a.addParamMesg,"label-width":"160px"}},[s("el-form-item",{attrs:{label:"选择商品",required:""}},[s("el-select",{staticClass:"add-input",attrs:{filterable:"",remote:"",size:"small","reserve-keyword":"",placeholder:"请输入SKU编码/商品名称关键词搜索","remote-method":a.queryGoodsSearchAsync,loading:a.queryGoodsAsyncLoading},on:{change:a.chooseGoodsChangeHandle},model:{value:a.goodsQueryVal,callback:function(e){a.goodsQueryVal=e},expression:"goodsQueryVal"}},a._l(a.queryGoodsSearchAsyncList,function(a){return s("el-option",{key:a.goodsId,attrs:{label:a.goodsNametemp,value:a.goodsId}})}),1),a._v(" "),s("span",[a._v("请输入SKU编码/商品名称关键词,在搜索到的数据中选择所需的SKU")])],1),a._v(" "),s("el-form-item",{attrs:{label:"商品名称",required:""}},[s("el-input",{staticClass:"add-input",attrs:{size:"small",placeholder:"请输入商品名称"},model:{value:a.addParamMesg.goodsName,callback:function(e){a.$set(a.addParamMesg,"goodsName",e)},expression:"addParamMesg.goodsName"}}),a._v(" "),s("span",[a._v("商品名称,限制30个字")])],1),a._v(" "),s("el-form-item",{attrs:{label:"规格"}},[s("el-input",{staticClass:"add-input",attrs:{size:"small",disabled:""},model:{value:a.addParamMesg.spec,callback:function(e){a.$set(a.addParamMesg,"spec",e)},expression:"addParamMesg.spec"}})],1),a._v(" "),s("el-form-item",{attrs:{label:"初始售价",required:""}},[s("el-input",{staticClass:"add-input",attrs:{size:"small",placeholder:"请输入初始售价"},model:{value:a.addParamMesg.price,callback:function(e){a.$set(a.addParamMesg,"price",e)},expression:"addParamMesg.price"}},[s("el-button",{attrs:{slot:"append"},slot:"append"},[a._v("元")])],1)],1),a._v(" "),s("el-form-item",{attrs:{label:"平台分类",required:""}},[s("el-cascader",{ref:"cascaderCategory",staticClass:"add-input",attrs:{placeholder:"请选择平台分类",options:a.categoryList,size:"small",clearable:"",filterable:"",props:a.cateDefaultProps},on:{change:a.categoryChange},model:{value:a.addParamMesg.platformTagsList,callback:function(e){a.$set(a.addParamMesg,"platformTagsList",e)},expression:"addParamMesg.platformTagsList"}})],1),a._v(" "),s("hr",{staticClass:"s-slip-tb"}),a._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"small",disabled:a.isDisabled},on:{click:a.doSaveHandel}},[a._v("保存")]),a._v(" "),s("el-button",{attrs:{size:"small"},on:{click:a.doCancelHandel}},[a._v("取消")])],1)],1)],1)},staticRenderFns:[]};var m=s("VU/8")(c,g,!1,function(a){s("ET54")},null,null);e.default=m.exports}});
//# sourceMappingURL=75.09f8850c4900e06fb738.js.map