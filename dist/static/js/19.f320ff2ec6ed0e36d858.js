webpackJsonp([19],{"4o0g":function(t,e){},"6F0G":function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i("Gu7T"),o=i.n(s),n=i("Dd8w"),r=i.n(n),c=i("BO1k"),l=i.n(c),u=i("ssT3"),d=(i("oAV5"),{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:t.tableData,"empty-text":"没有查询到您想要的数据",size:"small"}},[a("el-table-column",{attrs:{"min-width":"120",prop:"triggerType",label:"活动类型",formatter:t.triggerTypeFormater}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"80",prop:"id",label:"活动编码"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"140",prop:"title",label:"活动名称"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"210",label:"活动时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("p",[t._v(t._s(e.row.beginTime.slice(0,10)+" 至 "+e.row.endTime.slice(0,10)))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"86",prop:"cityName",label:"参与区域"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"210",label:"优惠券有效期"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.useDayCount?a("div",[t._v("\n          "+t._s(e.row.useDayCount)+" 天\n        ")]):e.row.useBeginTime&&e.row.useEndTime?a("div",[t._v("\n          "+t._s(e.row.useBeginTime.slice(0,10)+" 至 "+e.row.useEndTime.slice(0,10))+"\n        ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"110",prop:"totalCount",label:"优惠券总张数"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"90",prop:"status",label:"活动状态",formatter:t.statusFormater}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){return t.showItem(e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){return t.checkItem(e.row)}}},[t._v("查看优惠券")]),t._v(" "),0===e.row.status?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-setting"},on:{click:function(a){return t.turnItem(e.row,!0)}}},[t._v("开始")]):t._e(),t._v(" "),0===e.row.status||1===e.row.status||5===e.row.status?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-circle-close"},on:{click:function(a){return t.turnItem(e.row)}}},[t._v("关闭")]):t._e(),t._v(" "),121!==e.row.triggerType||1!==e.row.status&&0!==e.row.status?t._e():a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.changeStock(e.row)}}},[t._v("修改库存")])],1),t._v(" "),81===e.row.triggerType?a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(a){return t.showScanCode(e.row)}}},[t._v("生成二维码")])],1):t._e(),t._v(" "),12!==e.row.triggerType||1!=e.row.isOperate||1!==e.row.status&&5!==e.row.status?t._e():a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(a){return t.operation(e.row.id)}}},[t._v("发给客户")])],1)])]}}])})],1)],1)},staticRenderFns:[]});var m=i("VU/8")({data:function(){return{tableData:[]}},methods:{setDefaultMesg:function(t){this.tableData=t.tableData},triggerTypeFormater:function(t,e,a){switch(a){case 1:return"直接发放";case 4:return"充值返券(单次)";case 42:return"充值返券(多次)";case 71:return"消费发放";case 2:return"分享返券";case 3:return"签到返券";case 6:return"领取活动";case 81:return"扫码送券";case 82:return"扫码消费送券";case 91:return"省钱礼包";case 12:return"指定客户";case 111:return"天降红包";case 121:return"积分换券";default:return"其它券"}},statusFormater:function(t,e,a){switch(a){case 0:return"未开始";case 1:return"已开始";case 2:return"已结束";case 3:return"已关闭";case 5:return"已分发"}},showItem:function(t){this.$emit("showItem",t)},checkItem:function(t){this.$emit("checkItem",t)},turnItem:function(t,e){var a={row:t,on:e};this.$emit("turnItem",a)},showScanCode:function(t){this.$emit("showScanCode",t)},operation:function(t){this.$emit("operation",t)},changeStock:function(t){this.$emit("changeStock",t)}}},d,!1,function(t){i("aH9Y")},null,null).exports,p=i("FzCZ"),h="/foundation/store/userStoreList",v="/member/erp/prom/batchPromList",g="/member/erp/prom/updateBatchPromStatus",f="/member/erp/prom/giveSpecifyProm",_="/member/erp/prom/batchCreatePromInfo",b="/member/erp/prom/updatePromStock",C=/^\+?[1-9][0-9]*$/,y={data:function(){return{loading:!1,pageNo:1,pageSize:10,total:0,storeList:[],searchContent:{title:"",promStartDate:"",promEndDate:"",storeNo:"",triggerType:"",promStatus:"",isSpecify:""},triggerTypeOptions:[{label:"全部",value:""},{label:"直接发放",value:1},{label:"消费发放",value:71},{label:"充值返券(单次)",value:4},{label:"充值返券(多次)",value:42},{label:"扫码送券",value:81},{label:"扫码消费送券",value:82},{label:"省钱礼包",value:91},{label:"指定客户",value:12},{label:"天降红包",value:111},{label:"积分换券",value:121}],promStatusOptions:[{label:"全部",activeName:"all",activeCount:0,value:""},{label:"未开始",activeName:"activeName0",activeCount:0,value:0},{label:"已开始",activeName:"activeName1",activeCount:0,value:1},{label:"已分发",activeName:"activeName5",activeCount:0,value:5},{label:"已结束",activeName:"activeName2",activeCount:0,value:2},{label:"已关闭",activeName:"activeName3",activeCount:0,value:3}],tableData:[],activeName:"all",dialogFormVisible:!1,phoneListData:[],promRecordId:"",chooseUsersShow:!1,sacnCodeImgUrl:"",tempConfig:{phoneNo:"客户手机号"},file:{name:"",ishowFile:!0},remark:"",changeStockDialogShow:!1,changeStockDialogLoading:!1,isDisabled:!1,detailParamMesg:{},disCoupon:{},goodCoupon:{},disIsnull:!0,goodIsnull:!0,promType:"2",currentPromDiscount:{}}},created:function(){this.getStoreList()},mounted:function(){var t=u.a.get("searchContentForCoupon");this.$route.meta.keepAlive&&t&&(this.pageNo=t.pageNo,this.searchContent=t.searchContent,this.activeName=t.activeName),u.a.remove("searchContentForCoupon"),this.doSearchHandel()},components:{"my-table":m},methods:{addCoupon:function(t){switch(t){case"add_direct":this.$router.push("/discount_coupon/add_direct");break;case"add_consumption":this.$router.push("/discount_coupon/add_consumption");break;case"add_charge":this.$router.push("/discount_coupon/add_charge");break;case"add_scan":this.$router.push("/discount_coupon/add_scan");break;case"add_save":this.$router.push("/discount_coupon/add_save");break;case"add_customer":this.$router.push("/discount_coupon/add_customer");break;case"add_red":this.$router.push("/discount_coupon/add_red");break;case"add_point":this.$router.push("/discount_coupon/add_point");break;default:this.$notify.warning({title:"暂无此类型优惠券",message:e.message})}},getStoreList:function(){var t=this;this.$http.post(h,{pageSize:-1}).then(function(e){if(0!==e.code)throw new Error(e.msg);if(e.data&&e.data.result&&e.data.result.length){var a=[],i=!0,s=!1,o=void 0;try{for(var n,r=l()(e.data.result);!(i=(n=r.next()).done);i=!0){var c=n.value,u={value:c.storeNo,label:c.storeNo+"-"+c.storeName};a.push(u)}}catch(t){s=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}t.storeList=a}}).catch(function(t){console.log("提示(获取门店列表):",t.message)})},handleTabClick:function(t){"all"==t.name?this.searchContent.promStatus="":"activeName0"==t.name?this.searchContent.promStatus=0:"activeName1"==t.name?this.searchContent.promStatus=1:"activeName2"==t.name?this.searchContent.promStatus=2:"activeName3"==t.name?this.searchContent.promStatus=3:"activeName5"==t.name&&(this.searchContent.promStatus=5),this.activeName=t.name,this.doSearchHandel(!0)},changeSize:function(t){this.pageSize=t,this.doSearchHandel()},changeCurrent:function(t){this.pageNo=t,this.doSearchHandel()},doSearchHandel:function(t){var e=this;this.loading=!0,!0===t&&(this.pageNo=1),this.$http.post(v,r()({},this.searchContent,{pageSize:this.pageSize,pageNo:this.pageNo})).then(function(t){if(e.loading=!1,0!==t.code)throw new Error(t.msg);if(t.data&&t.data.pageVo&&t.data.pageVo.result&&t.data.pageVo.result.length){e.tableData=t.data.pageVo.result;var a={tableData:e.tableData};e.$refs.myTable&&e.$refs.myTable.setDefaultMesg(a),e.total=t.data.pageVo.total}else{e.tableData=[];var i={tableData:e.tableData};e.$refs.myTable&&e.$refs.myTable.setDefaultMesg(i);var s=!0,o=!1,n=void 0;try{for(var r,c=l()(e.promStatusOptions);!(s=(r=c.next()).done);s=!0){r.value.activeCount=0}}catch(t){o=!0,n=t}finally{try{!s&&c.return&&c.return()}finally{if(o)throw n}}e.total=0}var u=!0,d=!1,m=void 0;try{for(var p,h=l()(e.promStatusOptions);!(u=(p=h.next()).done);u=!0){var v=p.value;""===v.value?v.activeCount=t.data.allCount||0:0===v.value?v.activeCount=t.data.startedCount||0:1===v.value?v.activeCount=t.data.goingCount||0:2===v.value?v.activeCount=t.data.endCount||0:3===v.value?v.activeCount=t.data.closeCount||0:5===v.value&&(v.activeCount=t.data.sendCount||0)}}catch(t){d=!0,m=t}finally{try{!u&&h.return&&h.return()}finally{if(d)throw m}}}).catch(function(t){e.loading=!1,e.$notify.error({title:"提示",message:t.message})})},showItem:function(t){var e={pageNo:this.pageNo,activeName:this.activeName,searchContent:this.searchContent};u.a.set("searchContentForCoupon",e);var a=t.id;this.$router.push("/discount_coupon/showcp/"+a)},checkItem:function(t){var e=t.id;this.$router.push("/dis_search/activity_search/"+e)},turnItem:function(t){var e=this;this.loading=!0;var a=t.row.id,i="";i=1==t.on?1:3,this.$http.post(g,{batchCreatePromId:a,status:i}).then(function(t){if(e.loading=!1,0===t.code)return e.$message.success("设置成功"),void e.doSearchHandel();throw new Error(t.msg)}).catch(function(t){e.loading=!1,e.$notify.error({title:"提示",message:t.message})})},showScanCode:function(t){var e=t.codeUrl;this.dialogFormVisible=!0,this.sacnCodeImgUrl=e},downloadIamge:function(t,e){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var t=document.createElement("canvas");t.width=a.width,t.height=a.height,t.getContext("2d").drawImage(a,0,0,a.width,a.height);var i=t.toDataURL("image/png"),s=document.createElement("a"),o=new MouseEvent("click");s.download=Date.parse(new Date)+e||"photo",s.href=i,s.dispatchEvent(o)},a.src=t},onCopySuc:function(){this.$message.success("链接已复制至剪切板")},onCopyError:function(){this.$message.error("复制链接失败,请手动复制")},operation:function(t){console.log(t),this.chooseUsersShow=!0,this.promRecordId=t,this.file.ishowFile=!0},phoneModel:function(){try{p.a.exportFile([{phoneNo:""}],"客户导入模板.xlsx",this.tempConfig),this.$notify.success({title:"温馨提示",message:"模板下载成功"})}catch(t){this.$notify.error({title:"温馨提示",message:"下载遇到错误"})}},handleFileSelect:function(t){var e=this;if(t.target.files.length){this.file=t.target.files[0]||{name:""};var a=this.file.name.lastIndexOf("."),i=this.file.name.length,s=this.file.name.substring(a,i);if(this.file.name&&".xlsx"==s){var o={};for(var n in this.tempConfig)o[this.tempConfig[n]]=n;p.a.parseToJSON(this.file,o).then(function(t){var a=t.filter(function(t){return!!t.phoneNo});a.length<=0?e.$notify.warning({title:"提示",message:"表格为空请重新上传"}):e.phoneListData=a})}else this.$notify.warning({title:"提示",message:"请选择excel文件"})}},sentUser:function(t){var e=this;if(t)if(this.phoneListData&&this.phoneListData.length){var a=[];this.phoneListData.forEach(function(t,e){a.push(t.phoneNo)}),this.chooseUsersShow=!1,this.file={name:"",ishowFile:!1},this.phoneListData=[],this.$http.post(f,{promRecordId:this.promRecordId,phoneList:a,remark:this.remark}).then(function(t){if(0===t.code)return e.$message.success("发券成功"),void(e.remark="");throw new Error(t.msg)}).catch(function(t){e.remark="",e.$notify.error({title:"提示",message:t.message})})}else this.$message("请先导入客户");else this.chooseUsersShow=!1,this.file={name:"",ishowFile:!1},this.phoneListData=[],this.remark=""},changeStock:function(t){var e=this;this.detailParamMesg={},this.disCoupon={},this.goodCoupon={},this.disIsnull=!0,this.goodIsnull=!0,this.promType="2",this.currentPromDiscount={},this.changeStockDialogShow=!0,this.changeStockDialogLoading=!0,this.$http.post(_,{batchCreatePromId:t.id}).then(function(t){if(e.changeStockDialogLoading=!1,0!==t.code)throw new Error(t.msg);t.data&&(t.data.promInfoVos.forEach(function(t){2==t.promType?e.disCoupon=t:5==t.promType&&(e.goodCoupon=t)}),e.disCoupon.promDiscounts&&e.disCoupon.promDiscounts.length>0&&e.disCoupon.promDiscounts.forEach(function(t){for(var a in t)""!=t[a]&&(e.disIsnull=!1)}),e.goodCoupon.promDiscounts&&e.goodCoupon.promDiscounts.length>0&&e.goodCoupon.promDiscounts.forEach(function(t){for(var a in t)""!=t[a]&&(e.goodIsnull=!1)}),e.detailParamMesg=t.data,e.disIsnull?(e.currentPromDiscount=e.goodCoupon,e.promType="5"):(e.goodIsnull,e.currentPromDiscount=e.disCoupon,e.promType="2"))}).catch(function(t){e.changeStockDialogLoading=!1,e.$notify.error({title:"提示",message:t.message})})},doChangeStockHandel:function(){var t=this,e=this.currentPromDiscount.promDiscounts&&this.currentPromDiscount.promDiscounts.length?this.currentPromDiscount.promDiscounts.map(function(t){return{curStock:t.curStock,promId:t.promId}}):[],a=!0,i=!1,s=void 0;try{for(var n,r=l()(e);!(a=(n=r.next()).done);a=!0){var c=n.value;if(!c.curStock)return void this.$message("库存不能为空，为大于零的正整数");if(!C.test(c.curStock))return void this.$message("库存不能为空，为大于零的正整数")}}catch(t){i=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw s}}this.isDisabled=!0,this.$http.post(b,[].concat(o()(e))).then(function(e){if(t.isDisabled=!1,0===e.code)return t.changeStockDialogShow=!1,void t.$message.success("修改库存成功");throw new Error(e.msg)}).catch(function(e){t.isDisabled=!1,t.$notify.error({title:"提示",message:e.message})})}},beforeRouteLeave:function(t,e,a){e.meta.keepAlive=!1,a()}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"handel-search-wraper"},[a("ul",{staticClass:"handel-wraper icon-add-wrap-i"},[a("li",{staticClass:"group-buy-add-wraper"},[t._m(0),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("直接发放")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_direct")}}},[t._v("立即创建")])],1)]),t._v(" "),a("li",{staticClass:"group-buy-add-wraper"},[t._m(1),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("消费发放")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_consumption")}}},[t._v("立即创建")])],1)]),t._v(" "),a("li",{staticClass:"group-buy-add-wraper"},[t._m(2),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("充值返券")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_charge")}}},[t._v("立即创建")])],1)]),t._v(" "),a("li",{staticClass:"group-buy-add-wraper"},[t._m(3),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("扫码送券")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_scan")}}},[t._v("立即创建")])],1)]),t._v(" "),a("li",{staticClass:"group-buy-add-wraper"},[t._m(4),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("省钱礼包")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_save")}}},[t._v("立即创建")])],1)]),t._v(" "),a("li",{staticClass:"group-buy-add-wraper"},[t._m(5),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("指定客户")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_customer")}}},[t._v("立即创建")])],1)]),t._v(" "),a("li",{staticClass:"group-buy-add-wraper"},[t._m(6),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("天降红包")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_red")}}},[t._v("立即创建")])],1)]),t._v(" "),a("li",{staticClass:"group-buy-add-wraper"},[t._m(7),t._v(" "),a("div",{staticClass:"act-tip-txt"},[t._v("积分换券")]),t._v(" "),a("div",[a("el-button",{staticClass:"sup-mini",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addCoupon("add_point")}}},[t._v("立即创建")])],1)])]),t._v(" "),a("hr",{staticClass:"s-slip"}),t._v(" "),a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:t.searchContent,"label-position":"top"}},[a("el-form-item",{attrs:{label:"活动名称"}},[a("el-input",{staticClass:"add-input-inline",attrs:{placeholder:"请输入活动名称",size:"small",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doSearchHandel(!0)}},model:{value:t.searchContent.title,callback:function(e){t.$set(t.searchContent,"title","string"==typeof e?e.trim():e)},expression:"searchContent.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开始日期"}},[a("el-date-picker",{staticClass:"add-input-inline",attrs:{type:"date",placeholder:"选择开始日期",size:"small"},on:{change:function(e){return t.doSearchHandel(!0)}},model:{value:t.searchContent.promStartDate,callback:function(e){t.$set(t.searchContent,"promStartDate",e)},expression:"searchContent.promStartDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"结束日期"}},[a("el-date-picker",{staticClass:"add-input-inline",attrs:{type:"date",placeholder:"选择结束日期",size:"small"},on:{change:function(e){return t.doSearchHandel(!0)}},model:{value:t.searchContent.promEndDate,callback:function(e){t.$set(t.searchContent,"promEndDate",e)},expression:"searchContent.promEndDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"门店"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择所属门店",clearable:"",size:"small"},on:{change:function(e){return t.doSearchHandel(!0)}},model:{value:t.searchContent.storeNo,callback:function(e){t.$set(t.searchContent,"storeNo",e)},expression:"searchContent.storeNo"}},t._l(t.storeList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{staticClass:"add-input-inline",attrs:{filterable:"",placeholder:"请选择类型",clearable:"",size:"small"},on:{change:function(e){return t.doSearchHandel(!0)}},model:{value:t.searchContent.triggerType,callback:function(e){t.$set(t.searchContent,"triggerType",e)},expression:"searchContent.triggerType"}},t._l(t.triggerTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.doSearchHandel(!0)}}},[t._v("搜索")])],1)],1)],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-wraper tab-wraper"},[a("el-tabs",{on:{"tab-click":t.handleTabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t._l(t.promStatusOptions,function(e,i){return a("el-tab-pane",{key:i,attrs:{name:e.activeName}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(e.label)+" "+t._s(e.activeCount))])])}),t._v(" "),a("my-table",{ref:"myTable",on:{showItem:t.showItem,checkItem:t.checkItem,turnItem:t.turnItem,showScanCode:t.showScanCode,operation:t.operation,changeStock:t.changeStock}})],2),t._v(" "),t.total>0?a("el-pagination",{staticClass:"tc mt20",attrs:{background:"","current-page":t.pageNo,"page-sizes":[10,50,100,150,200],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.changeSize,"current-change":t.changeCurrent,"update:currentPage":function(e){t.pageNo=e},"update:current-page":function(e){t.pageNo=e}}}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:"查看二维码",visible:t.dialogFormVisible,width:"420px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"300px",height:"300px"},attrs:{src:t.sacnCodeImgUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.downloadIamge(t.sacnCodeImgUrl,"code.jpg")}}},[t._v("下载二维码")]),t._v(" "),a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.sacnCodeImgUrl,expression:"sacnCodeImgUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuc,expression:"onCopySuc",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],staticClass:"shareline",staticStyle:{display:"inline-block"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("复制链接")])],1),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{staticClass:"chooseUsers",attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:"指定客户发券",visible:t.chooseUsersShow,width:"500px"},on:{"update:visible":function(e){t.chooseUsersShow=e}}},[a("div",[a("label",{staticClass:"excelFileLabel",attrs:{for:"excelFile"}},[a("span",{staticClass:"upload"},[t._v("批量导入客户")]),t._v(" "),t.file.ishowFile?a("input",{attrs:{type:"file",id:"excelFile",hidden:""},on:{change:t.handleFileSelect}}):t._e(),t._v(" "),a("p",{staticStyle:{display:"inline-block"}},[t._v(t._s(t.file.name))])]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.phoneModel}},[t._v("下载模板")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{size:"small",data:t.phoneListData,"max-height":"250",border:""}},[a("el-table-column",{attrs:{width:"160",type:"index",label:"序号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phoneNo",label:"手机号",align:"center"}})],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticClass:"chooseUsers-title",staticStyle:{"margin-bottom":"5px"}},[t._v("备注：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.sentUser(!0)}}},[t._v("确定发放")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.sentUser(!1)}}},[t._v("取  消")])],1)]),t._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:"修改库存",visible:t.changeStockDialogShow,width:"620px"},on:{"update:visible":function(e){t.changeStockDialogShow=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.changeStockDialogLoading,expression:"changeStockDialogLoading"}],staticStyle:{"min-height":"150px"}},[t.currentPromDiscount.promDiscounts&&t.currentPromDiscount.promDiscounts.length&&"2"===t.promType?a("div",{staticClass:"list-wrap"},t._l(t.currentPromDiscount.promDiscounts,function(e,i){return a("div",{key:i,staticClass:"list-item"},[t._v("\n          ("+t._s(i+1)+")、\n          满 "+t._s(e.meetAmount)+" 元减 "+t._s(e.discAmount)+" 元，\n          共 "+t._s(e.sendPromCount||e.count)+" 张，\n          共 "+t._s(e.discAmount*e.sendPromCount||e.discAmount*e.count||0)+" 元，\n          积分购买要 "+t._s(e.triggerIntegralProm)+" 积分，\n          库存："),a("el-input",{staticClass:"stock-input",attrs:{size:"small"},model:{value:e.curStock,callback:function(a){t.$set(e,"curStock",a)},expression:"item.curStock"}},[a("template",{slot:"append"},[t._v("张")])],2),t._v("，每人限购数量(选填) "+t._s(e.limitCount||"不限")+" 次\n        ")],1)}),0):t.currentPromDiscount.promDiscounts&&t.currentPromDiscount.promDiscounts.length&&"5"===t.promType?a("div",{staticClass:"list-wrap"},t._l(t.currentPromDiscount.promDiscounts,function(e,i){return a("div",{key:i,staticClass:"list-item"},[t._v("\n          ("+t._s(i+1)+")、\n          使用范围："+t._s(1===e.goodsType?"门店":"商城")+"，\n          应付价格："+t._s(e.needPayAmount||0)+"元 ，\n          选择商品：["),t._l(e.goodsName,function(e,i){return a("span",{key:i},[t._v(t._s(e)+"，")])}),t._v("]，\n          商品数量小于等于："+t._s(e.productQtyLimit)+"("+t._s(e.productUnitStr||"份")+")，\n          优惠券数量："+t._s(e.sendPromCount||0)+"，\n          积分购买需要："+t._s(e.triggerIntegralProm||"-")+"分，\n          库存："),a("el-input",{staticClass:"stock-input",attrs:{size:"small"},model:{value:e.curStock,callback:function(a){t.$set(e,"curStock",a)},expression:"item.curStock"}},[a("template",{slot:"append"},[t._v("张")])],2),t._v("，\n          每人限购数量(选填)："+t._s(e.limitCount||"不限")+" 次\n        ")],2)}),0):t._e()]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:t.isDisabled},on:{click:t.doChangeStockHandel}},[t._v("确认")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.changeStockDialogShow=!1}}},[t._v("关 闭")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/fafang.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/xiao.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/chong.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/saoma.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/sheng.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/customer.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/package.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"act-img-w-h-dis",attrs:{src:"/shop/static/imgs/point.png",alt:""}})])}]};var k=i("VU/8")(y,w,!1,function(t){i("4o0g")},"data-v-f8f61452",null);a.default=k.exports},aH9Y:function(t,e){}});
//# sourceMappingURL=19.f320ff2ec6ed0e36d858.js.map