webpackJsonp([94],{"0ycc":function(t,e){},"4XG9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),r=a.n(i),o=a("oAV5"),s="/plateform/a/activityRule/edit",l={data:function(){return{isDisabled:!1,addParamMesg:{activityId:"",regionCode:"",regionName:"",activityType:"",activityTypeName:"",activityName:"",activityStartDate:"",activityEndDate:"",activityCode:"",limitDelivery:0,limitDeliveryStr:"",activityStoreList:[],platCityGoodsInfos:[]},activityStoresCheckedList:[],activityGoodsCheckedList:[],checkedList:[],discount:"",activityStoreGroupList:[]}},created:function(){var t=this.$route.params.activityId;this.addParamMesg.activityId=t,this.getDetail()},mounted:function(){},methods:{getDetail:function(){var t=this,e=this.addParamMesg.activityId||"";o.r(),this.$http.post(s,{activityId:e}).then(function(e){if(o.c(),0!==e.code)throw new Error(e.msg);if(e.data){var a=e.data;if(t.addParamMesg.activityId=a.id,t.addParamMesg.activityType=a.activityType||"",t.addParamMesg.regionCode=a.regionCode||"",t.addParamMesg.regionName=a.regionName||"",t.addParamMesg.activityTypeName=a.activityTypeName||"",t.addParamMesg.activityName=a.activityName||"",t.addParamMesg.activityStartDate=a.activityStartDate||"",t.addParamMesg.activityEndDate=a.activityEndDate||"",t.addParamMesg.activityCode=a.activityCode||"",t.addParamMesg.limitDelivery=a.limitDelivery?a.limitDelivery:0,t.addParamMesg.limitDeliveryStr=1===a.limitDelivery?"是":"否",t.addParamMesg.limitGoodsCount=a.limitGoodsCount||"",t.addParamMesg.groupprice=a.groupprice||"",t.addParamMesg.curstock=a.curstock||"",a.storeGroupVos&&a.storeGroupVos.length&&(t.activityStoresCheckedList=a.storeGroupVos),t.activityStoreGroupList=a.storeGroupVos.map(function(t){return{performanceDate:t.performanceDatetime?t.performanceDatetime.substr(0,10):"",activityStoresCheckedList:t.storeVos}}),a.platCityGoodsVos&&a.platCityGoodsVos.length){var i=!0,s=!1,l=void 0;try{for(var d,c=r()(a.platCityGoodsVos);!(i=(d=c.next()).done);i=!0){var n=d.value;n.copyUrl="pages/product/ptdetail?id="+n.platformCityGoodsId+"&type=5"}}catch(t){s=!0,l=t}finally{try{!i&&c.return&&c.return()}finally{if(s)throw l}}t.activityGoodsCheckedList=a.platCityGoodsVos}if(e.data.platCityGoodsVos&&e.data.platCityGoodsVos.length>0){var m=!0,v=!1,p=void 0;try{for(var u,y=r()(e.data.platCityGoodsVos);!(m=(u=y.next()).done);m=!0){var f=u.value;f.uniqueId=f.goodsId+""+f.goodsNo,f.copyUrl="pages/product/detail?id="+f.platformCityGoodsId+"&type=3"}}catch(t){v=!0,p=t}finally{try{!m&&y.return&&y.return()}finally{if(v)throw p}}t.checkedList=e.data.platCityGoodsVos}else t.checkedList=[]}}).catch(function(e){o.c(),t.$notify.error({title:"提示",message:e.message})})},limitGroupTypeFormater:function(t,e,a){return 0===a?"全部":1===a?"新会员":2===a?"老会员":void 0},sfInStockHeader:function(){var t=this.$createElement;return t("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[t("div",[t("p",["1、顺丰标品设为顺丰仓现货时，下单会校验仓库库存；"]),t("p",["2、本来鲜生鲜品无需设置；"])]),t("span",{slot:"reference"},["是否为顺丰仓现货",t("i",{class:"el-icon-question"})])])},onCopySuc:function(){this.$message.success("链接已复制至剪切板，仅限微信公众号中使用")},onCopyError:function(){this.$message.error("复制链接失败,请手动复制")},doCancelHandel:function(){this.$router.push("/store_act")}},beforeRouteLeave:function(t,e,a){t.meta.keepAlive=!0,a()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"add-form-wraper"},[a("el-form",{ref:"form",attrs:{model:t.addParamMesg,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动类型"}},[a("p",{staticStyle:{color:"#222","font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.addParamMesg.activityTypeName))])]),t._v(" "),a("el-form-item",{attrs:{label:"选择区域"}},[a("p",[t._v(t._s(t.addParamMesg.regionName))])]),t._v(" "),a("el-form-item",{attrs:{label:"活动编码"}},[a("p",[t._v(t._s(t.addParamMesg.activityCode))])]),t._v(" "),a("el-form-item",{attrs:{label:"活动名称"}},[a("p",[t._v(t._s(t.addParamMesg.activityName))])]),t._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[t._v(t._s(t.addParamMesg.activityStartDate))]),t._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[t._v(t._s(t.addParamMesg.activityEndDate))]),t._v(" "),a("el-form-item",{attrs:{label:"门店/履约时间",required:""}},t._l(t.activityStoreGroupList,function(e,i){return a("div",{key:i,staticClass:"store-pre-time-item-wrap",class:i>0?"mt10":null},[a("div",{staticClass:"item-right"},[a("div",[a("span",[t._v("参与门店")]),t._v(" "),e.activityStoresCheckedList.length>0?a("div",[a("el-table",{staticClass:"fixed-height",attrs:{data:e.activityStoresCheckedList,"empty-text":"暂无选中任何门店","max-height":"250",size:"small"}},[a("el-table-column",{attrs:{"min-width":"226px",label:"门店编码/名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.erpStoreNo)+"_"+t._s(e.row.erpStoreName))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"saleTypeName",label:"门店类型"}})],1)],1):t._e()]),t._v(" "),a("div",{staticClass:"mt10"},[a("span",[t._v("履约时间")]),t._v(" "),a("span",[t._v(t._s(e.performanceDate||"--"))])])])])}),0),t._v(" "),a("el-form-item",{attrs:{label:"设置活动商品",required:""}},[a("el-table",{staticClass:"fixed-height choose-goods-wrap",staticStyle:{width:"100%"},attrs:{data:t.checkedList,"empty-text":"暂无选中任何商品","max-height":"560",size:"small"}},[a("el-table-column",{attrs:{"min-width":"300px",label:"商品信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ll-p-m-w"},[a("div",{staticClass:"sf-pre-goods-img-w"},[e.row.preSaleImageUrl&&""!=e.row.preSaleImageUrl?a("img",{attrs:{src:e.row.preSaleImageUrl,alt:"",onerror:"onerror=null;src='/shop/static/img_error.png'"}}):a("img",{attrs:{src:"/shop/static/img_error.png",alt:""}})]),t._v(" "),a("div",{staticClass:"ll-p-m-c-r"},[a("div",[t._v(t._s(e.row.goodsName))]),t._v(" "),a("div",{staticClass:"ll-erp-p-no"},[t._v("SKU编码："+t._s(e.row.goodsNo||"--"))]),t._v(" "),e.row.platformCityGoodsId?a("div",{staticClass:"ll-erp-p-no"},[t._v("商品ID："+t._s(e.row.platformCityGoodsId||"--"))]):t._e()])])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"spec",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",prop:"activityGoodsName",label:"活动商品名称"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",prop:"price",label:"原价(必填)"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",prop:"groupPrice",label:"活动价(必填)"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",label:"活动库存(选填)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.curStock))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"140px",label:"每人限购"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.limitGoodsCount))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"140px",label:"排序权重"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.sortNum))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"190px","render-header":t.sfInStockHeader},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n                "+t._s(e.row.sfInStock?"是":"否")+"\n              ")])]}}])})],1),t._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动未发布时可以编辑商品，发布后只可添加新商品，不可再编辑已有商品；\n        ")]),t._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动进行中时新上门店，请在活动商品中发布至门店；\n        ")])],1),t._v(" "),a("hr",{staticClass:"s-slip-tb"}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:t.doCancelHandel}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(t){a("0ycc")},null,null);e.default=c.exports}});
//# sourceMappingURL=94.4f11529ff4f8c02e3882.js.map