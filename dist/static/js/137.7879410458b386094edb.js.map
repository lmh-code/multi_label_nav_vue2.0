{"version":3,"sources":["webpack:///src/components/GoodsMgt/EleGoods/EleGoods/EditEleGoods.vue","webpack:///./src/components/GoodsMgt/EleGoods/EleGoods/EditEleGoods.vue?914d","webpack:///./src/components/GoodsMgt/EleGoods/EleGoods/EditEleGoods.vue"],"names":["fileUrlList","goodsMgtUrl","EditEleGoods","data","isDisabled","imageUploadLoading","addParamMesg","platformCityGoodsId","goodsId","goodsName","goodsNametemp","price","saleType","platformTagsList","platformTags","categoryName","platformId","imgUrl","spec","categoryList","cateDefaultProps","children","label","value","created","this","getCategoryId","$route","params","pcgId","getDetailMesg","methods","_platformCityGoodsId","_this","utils","$http","post","then","res","code","Error","msg","goodsNo","skuName","length","categoryChange","catch","e","$notify","error","title","message","_this2","_idx","toString","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","child","err","return","console","log","doSaveHandel","_this3","$message","test","extends_default","setTimeout","$router","push","doCancelHandel","_this4","$confirm","confirmButtonText","cancelButtonText","type","_val","_this5","currentValArr","currentLabelsArr","$refs","cascaderCategory","currentLabels","imageUploadReg","file","_this6","isPic","indexOf","isJPG","isSize","promise_default","a","resolve","reject","_URL","window","URL","webkitURL","img","Image","onload","width","height","src","createObjectURL","emitUpload","_this7","getToken","qiniu_min","fileName","token","subscribe","complete","urlImage","key","_fileName","_this8","beforeRouteLeave","to","from","meta","keepAlive","EleGoods_EditEleGoods","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","required","size","disabled","callback","$$v","$set","expression","_v","placeholder","slot","options","clearable","filterable","props","on","change","action","show-file-list","before-upload","http-request","directives","name","rawName","staticStyle","color","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/137.7879410458b386094edb.js","sourcesContent":["<style>\n  @import \"../../../../../static/style/file_upload.css\";\n</style>\n<template>\n  <div class=\"add-form-wraper\">\n    <el-form ref=\"form\" :model=\"addParamMesg\" label-width=\"160px\">\n      <el-form-item label=\"选择商品\" required>\n        <el-input v-model=\"addParamMesg.goodsNametemp\" size=\"small\" class=\"add-input\" disabled></el-input>\n      </el-form-item>\n        \n      <el-form-item label=\"商品名称\" required>\n        <el-input v-model=\"addParamMesg.goodsName\" size=\"small\" class=\"add-input\" placeholder=\"请输入商品名称\"></el-input>\n        <span>商品名称,限制30个字</span>\n      </el-form-item>\n\n      <el-form-item label=\"规格\">\n        <el-input v-model=\"addParamMesg.spec\" size=\"small\" class=\"add-input\" disabled></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"平台售价\" required>\n        <el-input v-model=\"addParamMesg.price\" size=\"small\" class=\"add-input\" placeholder=\"请输入平台售价\">\n          <el-button slot=\"append\">元</el-button>\n        </el-input>\n      </el-form-item>\n\n      <el-form-item label=\"平台分类\" required>\n        <el-cascader\n          placeholder=\"请选择平台分类\"\n          class=\"add-input\"\n          :options=\"categoryList\"\n          size=\"small\"\n          clearable\n          filterable\n          ref=\"cascaderCategory\"\n          @change=\"categoryChange\"\n          :props=\"cateDefaultProps\"\n          v-model=\"addParamMesg.platformTagsList\">\n        </el-cascader>\n      </el-form-item>\n\n      <el-form-item label=\"平台商品图片\">\n        <div class=\"f-u-w\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"\"\n            :show-file-list=\"false\"\n            :before-upload=\"imageUploadReg\"\n            :http-request=\"emitUpload\">\n            <div v-loading=\"imageUploadLoading\">\n              <img v-if=\"addParamMesg.imgUrl\" :src=\"addParamMesg.imgUrl\" class=\"avatar\">\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </div>\n          </el-upload>\n          <div class=\"tip-txt-w\">\n            <span>选填，请上传800*800像素的JPG图片，为空时，默认使用商品库首图</span>\n          </div> \n        </div>\n      </el-form-item>\n\n      <el-form-item>\n        <span style=\"color:red;\">*</span>提示：保存后自动引入ERP上已引入的所有门店\n      </el-form-item>\n\n      <hr class=\"s-slip-tb\">\n      <el-form-item>\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\">保存</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\n      </el-form-item>\n      \n    </el-form>\n  </div>\n</template>\n\n<script>\n  import Storage from '@/utils/localStorage'\n  import * as utils from '@/utils/utils'\n  import * as qiniu from 'qiniu-js'\n  const fileUrlList = {\n    getQiNiuToken: '/foundation/qiniu/auth/file'\n  }\n  const goodsMgtUrl = {\n    // 编辑预售商品-数据回显\n    showDetail: '/plateform/a/platformCityGoods/presale/showDetail',\n    // 添加预售商品-选择商品\n    searchGoods: '/plateform/a/platformCityGoods/presale/add/searchGoods',\n    // 添加/编辑预售商品-保存操作\n    presaleSave: '/plateform/a/platformCityGoods/presale/save',\n    // 三方平台分类获取接口\n    getLevel: '/plateform/a/platformCategory/getLevel'\n  }\n  export default {\n    data() {\n      return {\n        isDisabled: false, // 保存防止多次点击\n        imageUploadLoading: false, // 上传图片loading\n        // 添加内容\n        addParamMesg: {\n          platformCityGoodsId: '', // 平台区域商品ID\n          goodsId: '', // 商品ID\n          goodsName: '', // 预售商品名称\n          goodsNametemp: '',\n          price: '', // 原价/售价\n          saleType: 1, // 售卖类型：1：常规；2：预售；3:长周期预售，4：及时达(查询对应售卖类型数据该字段必传，不传入择默认全部)\n          platformTagsList: [], // 选中的分类的list\n          platformTags: '', // 分类ID（商品所属的最具体的上级分类）\n          categoryName: '', // 分类名称\n          platformId: 4, // 渠道ID:1-有赞，2-京东到家，3-美团外卖，4-饿百，5-本来鲜\n          imgUrl: '', // url\n          spec: '' // 规格\n        },\n        categoryList: [], // 商品分类id\n\n        // 默认分类参数\n        cateDefaultProps: {\n          children: 'child',\n          label: 'categoryName',\n          value: 'categoryId'\n        }\n\n      }\n    },\n    created() {\n      // 三方平台店内分类\n      this.getCategoryId()\n      // 获取详情\n      let platformCityGoodsId = this.$route.params.pcgId\n      this.getDetailMesg(platformCityGoodsId)\n    },\n    methods: {\n      /**\n       * [getProuductDetail 获取商品详情信息]\n       * @return {[type]} [description]\n       */\n      getDetailMesg(_platformCityGoodsId) {\n        utils.showLoading()\n        this.$http.post(goodsMgtUrl.showDetail, {platformCityGoodsId: _platformCityGoodsId}).then(res => {\n          utils.clearLoading()\n          if(res.code === 0) {\n            if(res.data) {\n              this.addParamMesg.platformCityGoodsId = res.data.platformCityGoodsId\n              this.addParamMesg.goodsId = res.data.goodsId\n              this.addParamMesg.goodsName = res.data.goodsName\n              this.addParamMesg.goodsNametemp = res.data.goodsNo + '-' + res.data.skuName + '-' + res.data.spec\n              this.addParamMesg.price = res.data.price\n              this.addParamMesg.spec = res.data.spec\n\n              this.addParamMesg.platformTags = res.data.platformTags\n              if(res.data.platformTagsList && res.data.platformTagsList.length > 0) {\n                this.addParamMesg.platformTagsList = res.data.platformTagsList\n              }\n              // 调用方法设置分类名称\n              this.categoryChange(this.addParamMesg.platformTagsList)\n              // 图片地址\n              this.addParamMesg.imgUrl = res.data.imgUrl\n            }\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          utils.clearLoading()\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      /**\n       * [getCategoryId 三方平台店内分类]\n       * @return {[type]} [description]\n       */\n      getCategoryId() {\n        this.$http.post(goodsMgtUrl.getLevel, {platformId: this.addParamMesg.platformId}).then(res => {\n          if(res.code === 0) {\n            if(res.data) {\n              let _idx = this.addParamMesg.platformId.toString()\n              if(res.data[_idx]) {\n                for(let item of res.data[_idx]) {\n                  if(item.child && item.child.length === 0) {\n                    item.child = null\n                  }\n                }\n                this.categoryList = res.data[_idx]\n              }\n            }else {\n              this.categoryList = []\n            }\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          console.log(\"提示(三方平台店内分类):\", e.message)\n        })\n      },\n      /**\n       * [doSaveHandel 保存操作]\n       * @return {[type]} [description]\n       */\n      doSaveHandel() {\n        let salePriceReg = /((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$/\n        if(this.addParamMesg.goodsId === \"\" || this.addParamMesg.goodsName === \"\") {\n          this.$message(\"请选择商品\")\n          return\n        }\n\n        if(this.addParamMesg.goodsName === \"\") {\n          this.$message(\"请输入商品名称\")\n          return\n        }else {\n          if(this.addParamMesg.goodsName.length > 30) {\n            this.$message(\"商品名称,限制30个字\")\n            return\n          }\n        }\n\n        if(this.addParamMesg.price == \"\") {\n          this.$message(\"请输入平台售价\")\n          return \n        }else {\n          if(!salePriceReg.test(this.addParamMesg.price)) {\n            this.$message('平台售价是大于0，小数保留小数点后2位') \n            return\n          }\n        }\n\n        if(this.addParamMesg.platformTagsList.length === 0) {\n          this.$message(\"请选择平台分类\")\n          return \n        }else {\n          this.addParamMesg.platformTags = this.addParamMesg.platformTagsList[this.addParamMesg.platformTagsList.length - 1]\n        }\n\n        if(this.addParamMesg.platformTags == \"\") {\n          this.$message(\"请选择平台分类\")\n          return \n        }\n\n        this.isDisabled = true\n        this.$http.post(goodsMgtUrl.presaleSave, {...this.addParamMesg}).then(res => {\n          // 保存按钮可再次点击\n          setTimeout(() => {\n            this.isDisabled = false\n          }, 800)\n          if(res.code === 0) {\n            this.$router.push('/ele_goods')\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.isDisabled = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      /**\n       * [doCancelHandel 取消操作]\n       * @return {[type]} [description]\n       */\n      doCancelHandel() {\n        this.$confirm('确定取消吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push('/ele_goods')\n        }).catch(() => {})\n      },\n      /**\n       * [categoryChange 分类发生变化启用]\n       * @param  {[type]} _val [当前选中的值]\n       * @return {[type]}      [description]\n       */\n      categoryChange(_val) {\n        let currentValArr = _val\n        if(currentValArr.length > 0) {\n          this.addParamMesg.platformTags = currentValArr[currentValArr.length - 1]\n        }\n\n        setTimeout(() => {\n          let currentLabelsArr = this.$refs.cascaderCategory.currentLabels\n          if(currentLabelsArr.length > 0) {\n            this.addParamMesg.categoryName = currentLabelsArr[currentLabelsArr.length - 1]\n          }\n        }, 300)\n      },\n      /**\n       * [imageUploadReg 上传图片检测美团]\n       * @param  {[type]} file [description]\n       * @return {[type]}      [description]\n       */\n      imageUploadReg(file) {\n        const isPic = file.type.indexOf('image/') !== -1\n        const isJPG = file.type === 'image/jpeg'\n        if (!isPic) {\n          this.$message.error('商品图片文件必须是图片格式!')\n        }\n        if (!isJPG) {\n          this.$message.error('商品图片只能是JPG格式!')\n        }\n        /**\n         * [检测上传图片宽高]\n         * @param  {[type]}   resolve [description]\n         * @param  {Function} reject) {                     let width [description]\n         * @param  {[type]}   ()      [description]\n         * @return {[type]}           [description]\n         */\n        const isSize = new Promise(function(resolve, reject) {\n          let width = 800\n          let height = 800  \n\n          let _URL = window.URL || window.webkitURL\n          let img = new Image();\n          img.onload = function() {\n            let valid = img.width >= width && img.height >= height\n            valid ? resolve() : reject()\n          }\n          img.src = _URL.createObjectURL(file)\n        }).then(() => {\n          return file\n        }, () => {\n          this.$message.error('请上传800*800像素的JPG图片!')\n          return Promise.reject()\n        })\n\n        return isPic && isJPG && isSize\n      },\n      /**\n       * [emitUpload 上传图片]\n       * @param  {[type]} e [description]\n       * @return {[type]}   [description]\n       */\n      emitUpload (e) {\n        this.imageUploadLoading = true\n        this.getToken().then((res) => {\n          // 开始上传图片\n          let uploader = qiniu.upload(e.file, res.fileName, res.token)\n          uploader.subscribe({\n            error: () => {\n              this.imageUploadLoading = false\n            },\n            complete: (res) => {\n              let urlImage = 'http://retailimg01.benlailife.com/' + res.key\n              this.addParamMesg.imgUrl = urlImage\n              this.imageUploadLoading = false\n            },\n            next: res => {\n            }\n          })\n        })\n      },\n      /**\n       * [getToken 通过后台封装的接口获取七牛的token]\n       * @return {[type]}            [description]\n       */\n      getToken (_fileName) {\n        return this.$http.post(fileUrlList.getQiNiuToken, {}).then(res => {\n          if (res.code == 0) {\n            let token = res.data.token\n            let fileName = res.data.key\n            return {fileName, token}\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.imageUploadLoading = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      }\n\n    },\n    /**\n     * [beforeRouteLeave 页面离开]\n     * @param  {[type]}   to   [description]\n     * @param  {[type]}   from [description]\n     * @param  {Function} next [description]\n     * @return {[type]}        [description]\n     */\n    beforeRouteLeave (to, from, next){\n      to.meta.keepAlive = true;\n      next();\n    }\n\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/GoodsMgt/EleGoods/EleGoods/EditEleGoods.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMesg,\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":\"选择商品\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.addParamMesg.goodsNametemp),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"goodsNametemp\", $$v)},expression:\"addParamMesg.goodsNametemp\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入商品名称\"},model:{value:(_vm.addParamMesg.goodsName),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"goodsName\", $$v)},expression:\"addParamMesg.goodsName\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"商品名称,限制30个字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"规格\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.addParamMesg.spec),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"spec\", $$v)},expression:\"addParamMesg.spec\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平台售价\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入平台售价\"},model:{value:(_vm.addParamMesg.price),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"price\", $$v)},expression:\"addParamMesg.price\"}},[_c('el-button',{attrs:{\"slot\":\"append\"},slot:\"append\"},[_vm._v(\"元\")])],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平台分类\",\"required\":\"\"}},[_c('el-cascader',{ref:\"cascaderCategory\",staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择平台分类\",\"options\":_vm.categoryList,\"size\":\"small\",\"clearable\":\"\",\"filterable\":\"\",\"props\":_vm.cateDefaultProps},on:{\"change\":_vm.categoryChange},model:{value:(_vm.addParamMesg.platformTagsList),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"platformTagsList\", $$v)},expression:\"addParamMesg.platformTagsList\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"平台商品图片\"}},[_c('div',{staticClass:\"f-u-w\"},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"before-upload\":_vm.imageUploadReg,\"http-request\":_vm.emitUpload}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.imageUploadLoading),expression:\"imageUploadLoading\"}]},[(_vm.addParamMesg.imgUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.addParamMesg.imgUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"tip-txt-w\"},[_c('span',[_vm._v(\"选填，请上传800*800像素的JPG图片，为空时，默认使用商品库首图\")])])],1)]),_vm._v(\" \"),_c('el-form-item',[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"提示：保存后自动引入ERP上已引入的所有门店\\n    \")]),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-143f29a8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GoodsMgt/EleGoods/EleGoods/EditEleGoods.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-143f29a8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditEleGoods.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditEleGoods.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditEleGoods.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-143f29a8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditEleGoods.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GoodsMgt/EleGoods/EleGoods/EditEleGoods.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}