{"version":3,"sources":["webpack:///src/components/StoreMgt/ScreenSet/Media/Add.vue","webpack:///./src/components/StoreMgt/ScreenSet/Media/Add.vue?6403","webpack:///./src/components/StoreMgt/ScreenSet/Media/Add.vue"],"names":["fileUrlList","reqUrl","Add","data","isDisabled","addParamMsg","multimediaAudioVoList","templateType","multimediaType","templateName","cityId","enable","storeNo","moduleGoodsReqList","categoryNos","categoryNamesStr","goodsTypes","showMemberPriceB","templateTypeOptions","label","value","enableOptions","cityOptions","storeOptions","uploadLoading","playTypeOptions","created","this","getCityList","methods","_this","$http","get","then","res","code","Error","msg","cityList","length","map","item","cityName","catch","e","console","log","message","cityChange","_this2","_params","DIFFCITY","pageNum","pageSize","post","extends_default","storeList","result","storeName","$notify","error","title","emitUpload","_this3","getToken","qiniu_min","file","fileName","token","subscribe","complete","mediaItem","audioUrl","key","startTime","endTime","timeRange","playType","push","next","beforeUploadReg","fileType","_this4","fileExtension","deleteUpFile","index","splice","doSaveHandel","_this5","params","$message","startTimeArr","endTimeArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","err","return","utils","tipTxt","$confirm","confirmButtonText","cancelButtonText","type","setTimeout","success","$router","doCancelHandel","_this6","Media_Add","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","required","placeholder","size","callback","$$v","$set","expression","_l","_v","filterable","on","change","_e","action","disabled","show-file-list","before-upload","http-request","icon","circle","click","$event","href","target","_s","is-range","editable","format","value-format","range-separator","start-placeholder","end-placeholder","idx","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/54.ffab3f37c02ddef79136.js","sourcesContent":["<style>\n  .media-file-item {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    border: 1px solid #ececec;\n    border-radius: 6px;\n    padding: 0 10px;\n  }\n</style>\n\n<template>\n  <div class=\"add-form-wraper\">\n    <el-form ref=\"form\" :model=\"addParamMsg\" label-width=\"160px\">\n      <el-form-item label=\"模板类型\" required>\n        <el-select class=\"add-input\" v-model=\"addParamMsg.templateType\" placeholder=\"请选择模板类型\" size=\"small\">\n          <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in templateTypeOptions\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"区域\" required>\n        <el-select class=\"add-input\" v-model=\"addParamMsg.cityId\" placeholder=\"请选择区域\" size=\"small\" @change=\"cityChange\"\n          filterable>\n          <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in cityOptions\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"门店\" v-if=\"addParamMsg.templateType === 2\" required>\n        <el-select class=\"add-input\" v-model=\"addParamMsg.storeNo\" placeholder=\"请选择门店\" size=\"small\" filterable>\n          <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in storeOptions\"></el-option>\n        </el-select>\n        <span>请先选择区域再选择门店</span>\n      </el-form-item>\n      <el-form-item label=\"模板名称\" required>\n        <el-input v-model=\"addParamMsg.templateName\" size=\"small\" class=\"add-input\" placeholder=\"模板名称\"></el-input>\n        <span>模板名称,限制20个汉字</span>\n      </el-form-item>\n      <el-form-item label=\"页面模板设置\" required>\n        <el-upload\n          action=\"\"\n          :disabled=\"uploadLoading\"\n          :show-file-list=\"false\"\n          :before-upload=\"beforeUploadReg\"\n          :http-request=\"emitUpload\">\n          <el-button :disabled=\"uploadLoading\" size=\"mini\" :icon=\"uploadLoading ? 'el-icon-loading' : 'el-icon-upload2'\" type=\"primary\">上传音频</el-button>\n        </el-upload>\n        <div v-for=\"(item, index) of multimediaAudioVoList\" :key=\"index\" class=\"media-file-item mt10\">\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" circle @click=\"deleteUpFile(index)\"></el-button>\n          <div>\n            <div class=\"audio-url-wrap ml10\">\n              <a :href=\"item.audioUrl\" target=\"_blank\">{{item.audioUrl}}</a>\n            </div>\n            <div>\n              <el-time-picker\n                is-range\n                :editable=\"false\"\n                size=\"small\"\n                class=\"search-date-picker ml10\"\n                format=\"HH:mm\"\n                value-format=\"HH:mm\"\n                v-model=\"item.timeRange\"\n                range-separator=\"-\"\n                start-placeholder=\"开始时间\"\n                end-placeholder=\"结束时间\"\n                placeholder=\"选择时间范围\">\n              </el-time-picker>\n              <el-select class=\"add-input-inline ml10\" v-model=\"item.playType\" placeholder=\"请选择区域\" size=\"small\" filterable>\n                <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in playTypeOptions\"></el-option>\n              </el-select>\n            </div>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"启用状态\" required>\n        <el-radio-group v-model=\"addParamMsg.enable\" size=\"small\">\n          <el-radio-button :label=\"item.value\" v-for=\"(item, idx) in enableOptions\" :key=\"idx\">{{item.label}}\n          </el-radio-button>\n        </el-radio-group>\n        <span>开启后线上将直接启用</span>\n      </el-form-item>\n      <hr class=\"s-slip-tb\">\n      <el-form-item>\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\">保存</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  import Storage from '@/utils/localStorage'\n  import * as utils from '@/utils/utils'\n  import * as qiniu from 'qiniu-js'\n  const fileUrlList = {\n    getQiNiuToken: '/foundation/qiniu/auth/file'\n  }\n  const reqUrl = {\n    // 查询用户区域店组一级列表\n    userAreaStoreGroupList: '/foundation/store/userStoreCityList',\n    // 查询用户权限分店列表\n    userStoreList: '/foundation/store/userStoreList',\n    // 保存/更新模板\n    update: '/plateform/a/tv/multimedia/template/update'\n  }\n  let salePriceReg = /^[1-9]*[1-9][0-9]*$/\n  export default {\n    data() {\n      return {\n        isDisabled: false,\n        addParamMsg: {\n          multimediaAudioVoList: [],\n          templateType: 2, // 模板类型 1：区域模板 2：门店模板\n          multimediaType: 0,\n          templateName: null,\n          cityId: null,\n          enable: 0, // 0启用，1禁用\n          storeNo: null // 门店编码,门店模板必填\n        },\n        moduleGoodsReqList: [{\n            categoryNos: [],\n            categoryNamesStr: '',\n            goodsTypes: [],\n            showMemberPriceB: true\n          },\n          {\n            categoryNos: [],\n            categoryNamesStr: '',\n            goodsTypes: [],\n            showMemberPriceB: true\n          },\n          {\n            categoryNos: [],\n            categoryNamesStr: '',\n            goodsTypes: [],\n            showMemberPriceB: true\n          }\n        ],\n        templateTypeOptions: [{\n            label: '区域模板',\n            value: 1\n          },\n          {\n            label: '门店模板',\n            value: 2\n          }\n        ],\n        enableOptions: [{\n            label: '启用',\n            value: 0\n          },\n          {\n            label: '禁用',\n            value: 1\n          }\n        ],\n        cityOptions: [{\n            label: '商品模块',\n            value: 0\n          },\n          {\n            label: '图片模块',\n            value: 1\n          }\n        ],\n        storeOptions: [],\n        uploadLoading: false,\n        multimediaAudioVoList: [],\n        playTypeOptions: [\n          {\n            label: '循环播放',\n            value: 0\n          },\n          {\n            label: '单次播放',\n            value: 1\n          }\n        ]\n      }\n    },\n    created() {\n      this.getCityList()\n    },\n    methods: {\n      getCityList() {\n        this.$http.get(reqUrl.userAreaStoreGroupList).then(res => {\n          if (res.code === 0) {\n            let cityList = res.data && res.data.length ? res.data : []\n            this.cityOptions = cityList.map(item => {\n              let newItem = {\n                label: `${item.cityId}_${item.cityName}`,\n                value: item.cityId\n              }\n              return newItem\n            })\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          console.log(\"提示【获取区域列表】：\", e.message)\n        })\n      },\n      cityChange(e) {\n        let _params = {\n          DIFFCITY: true,\n          pageNum: 1,\n          pageSize: -1,\n          cityId: e\n        }\n        this.addParamMsg.storeNo = null\n        this.$http.post(reqUrl.userStoreList, {\n          ..._params\n        }).then(res => {\n          if (res.code === 0) {\n            let storeList = res.data && res.data.result && res.data.result.length ? res.data.result : []\n            this.storeOptions = storeList.map(item => {\n              let newItem = {\n                label: `${item.storeNo}_${item.storeName}`,\n                value: item.storeNo\n              }\n              return newItem\n            })\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      emitUpload(e) {\n        this.uploadLoading = true\n        this.getToken('mp3').then((res) => {\n          // 开始上传图片\n          let uploader = qiniu.upload(e.file, res.fileName, res.token)\n          uploader.subscribe({\n            error: () => {\n              this.uploadLoading = false\n            },\n            complete: (res) => {\n              this.uploadLoading = false\n              let mediaItem = {\n                audioUrl: `http://retailimg01.benlailife.com/${res.key}`,\n                startTime: '',\n                endTime: '',\n                timeRange: ['', ''],\n                playType: 0\n              }\n              this.multimediaAudioVoList.push(mediaItem);\n            },\n            next: res => {}\n          })\n        })\n      },\n      beforeUploadReg(file) {\n        // let rightType = new Array(\"avi\",\"wmv\",\"mpg\",\"mpeg\",\"mov\",\"rm\",\"ram\",\"swf\",\"flv\",\"mp4\",\"mp3\",\"wma\",\"avi\",\"rm\",\"rmvb\",\"flv\",\"mpg\",\"mkv\");\n        // const type = file.type.indexOf('image/') !== -1\n        return true;\n      },\n      /**\n       * [getToken 通过后台封装的接口获取七牛的token]\n       * @return {[type]}            [description]\n       */\n      getToken(fileType) {\n        return this.$http.post(fileUrlList.getQiNiuToken, {fileExtension: fileType || null}).then(res => {\n          if (res.code == 0) {\n            let token = res.data.token\n            let fileName = res.data.key\n            return {\n              fileName,\n              token\n            }\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.uploadLoading = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      /**\n       * [removeFileLeft 删除]\n       */\n      deleteUpFile(index) {\n        this.multimediaAudioVoList.splice(index, 1)\n      },\n      doSaveHandel() {\n        if (!this.addParamMsg.cityId) {\n          this.$message(\"[区域]: 请选择区域\")\n          return\n        }\n        let params = {\n          DIFFCITY: true,\n          templateType: this.addParamMsg.templateType, // 模板类型 1：区域模板 2：门店模板\n          multimediaType: this.addParamMsg.multimediaType,\n          templateName: this.addParamMsg.templateName,\n          cityId: this.addParamMsg.cityId,\n          enable: this.addParamMsg.enable\n        }\n        if (this.addParamMsg.templateType === 2) {\n          // 门店模板必须有门店编码\n          if (!this.addParamMsg.storeNo) {\n            this.$message(\"[门店]: 请选择门店\")\n            return\n          }else {\n            params.storeNo = this.addParamMsg.storeNo\n          }\n        }\n        if (!this.addParamMsg.templateName) {\n          this.$message(\"[模板名称]: 请输入模板名称\")\n          return\n        } else {\n          if (this.addParamMsg.templateName.length > 20) {\n            this.$message(\"[模板名称]: 模板名称,限制20个汉字\")\n            return\n          }\n        }\n        if(!this.multimediaAudioVoList || this.multimediaAudioVoList.length === 0) {\n          this.$message(\"[页面模板设置]: 请上传音频内容\")\n          return\n        }else {\n          let startTimeArr = []\n          let endTimeArr = []\n          for(let item of this.multimediaAudioVoList) {\n            item.startTime = item.timeRange && item.timeRange.length ? item.timeRange[0] : ''\n            item.endTime = item.timeRange && item.timeRange.length ? item.timeRange[1] : ''\n            if(!item.startTime || !item.endTime) {\n              this.$message(\"[页面模板设置]: 请选择音频的播放时间段\")\n              return\n            }else {\n              startTimeArr.push(item.startTime)\n              endTimeArr.push(item.endTime)\n            }\n          }\n          if(!utils.compareDate(startTimeArr, endTimeArr)) {\n            this.$message(\"音频的播放时间段不可互相包含，请重新设置\")\n            return\n          }else {\n            params.multimediaAudioVoList = this.multimediaAudioVoList\n          }\n        }\n        let tipTxt = ''\n        if (params.enable === 0) {\n          tipTxt = \"一个门店或区域有且仅有一个可生效模板，开启后原模板将被禁用，保存时确定要直接启用吗?\"\n        } else if (params.enable === 1) {\n          tipTxt = \"保存时确定要直接禁用吗?\"\n        }\n        this.$confirm(tipTxt, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.isDisabled = true\n          this.$http.post(reqUrl.update, {\n            ...params\n          }).then(res => {\n            setTimeout(() => {\n              this.isDisabled = false\n            }, 500);\n            if (res.code === 0) {\n              this.$message.success(\"保存成功\")\n              this.$router.push('/media')\n              return\n            }\n            throw new Error(res.msg)\n          }).catch(e => {\n            setTimeout(() => {\n              this.isDisabled = false\n            }, 500);\n            this.$notify.error({\n              title: '提示',\n              message: e.message\n            })\n          })\n        })\n      },\n      /**\n       * [doCancelHandel 取消操作]\n       * @return {[type]} [description]\n       */\n      doCancelHandel() {\n        this.$confirm('确定取消吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push('/media')\n        }).catch(() => {})\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/StoreMgt/ScreenSet/Media/Add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMsg,\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":\"模板类型\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择模板类型\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.templateType),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"templateType\", $$v)},expression:\"addParamMsg.templateType\"}},_vm._l((_vm.templateTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"区域\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择区域\",\"size\":\"small\",\"filterable\":\"\"},on:{\"change\":_vm.cityChange},model:{value:(_vm.addParamMsg.cityId),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"cityId\", $$v)},expression:\"addParamMsg.cityId\"}},_vm._l((_vm.cityOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),(_vm.addParamMsg.templateType === 2)?_c('el-form-item',{attrs:{\"label\":\"门店\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择门店\",\"size\":\"small\",\"filterable\":\"\"},model:{value:(_vm.addParamMsg.storeNo),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"storeNo\", $$v)},expression:\"addParamMsg.storeNo\"}},_vm._l((_vm.storeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('span',[_vm._v(\"请先选择区域再选择门店\")])],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"模板名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"模板名称\"},model:{value:(_vm.addParamMsg.templateName),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"templateName\", $$v)},expression:\"addParamMsg.templateName\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"模板名称,限制20个汉字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"页面模板设置\",\"required\":\"\"}},[_c('el-upload',{attrs:{\"action\":\"\",\"disabled\":_vm.uploadLoading,\"show-file-list\":false,\"before-upload\":_vm.beforeUploadReg,\"http-request\":_vm.emitUpload}},[_c('el-button',{attrs:{\"disabled\":_vm.uploadLoading,\"size\":\"mini\",\"icon\":_vm.uploadLoading ? 'el-icon-loading' : 'el-icon-upload2',\"type\":\"primary\"}},[_vm._v(\"上传音频\")])],1),_vm._v(\" \"),_vm._l((_vm.multimediaAudioVoList),function(item,index){return _c('div',{key:index,staticClass:\"media-file-item mt10\"},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteUpFile(index)}}}),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"audio-url-wrap ml10\"},[_c('a',{attrs:{\"href\":item.audioUrl,\"target\":\"_blank\"}},[_vm._v(_vm._s(item.audioUrl))])]),_vm._v(\" \"),_c('div',[_c('el-time-picker',{staticClass:\"search-date-picker ml10\",attrs:{\"is-range\":\"\",\"editable\":false,\"size\":\"small\",\"format\":\"HH:mm\",\"value-format\":\"HH:mm\",\"range-separator\":\"-\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"placeholder\":\"选择时间范围\"},model:{value:(item.timeRange),callback:function ($$v) {_vm.$set(item, \"timeRange\", $$v)},expression:\"item.timeRange\"}}),_vm._v(\" \"),_c('el-select',{staticClass:\"add-input-inline ml10\",attrs:{\"placeholder\":\"请选择区域\",\"size\":\"small\",\"filterable\":\"\"},model:{value:(item.playType),callback:function ($$v) {_vm.$set(item, \"playType\", $$v)},expression:\"item.playType\"}},_vm._l((_vm.playTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])],1)})],2),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"启用状态\",\"required\":\"\"}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.addParamMsg.enable),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"enable\", $$v)},expression:\"addParamMsg.enable\"}},_vm._l((_vm.enableOptions),function(item,idx){return _c('el-radio-button',{key:idx,attrs:{\"label\":item.value}},[_vm._v(_vm._s(item.label)+\"\\n        \")])}),1),_vm._v(\" \"),_c('span',[_vm._v(\"开启后线上将直接启用\")])],1),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b77888a2\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/StoreMgt/ScreenSet/Media/Add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b77888a2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Add.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b77888a2\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StoreMgt/ScreenSet/Media/Add.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}