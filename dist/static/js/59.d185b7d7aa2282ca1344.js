webpackJsonp([59],{"+kcb":function(e,t){},oQAF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Gu7T"),o=a.n(r),n=a("BO1k"),l=a.n(n),i=a("Dd8w"),s=a.n(i),c=a("ssT3"),d=a("bzuE"),u=a("oAV5"),p=a("XfvZ"),h=a("pvT1"),m="/plateform/a/store/condition/search",f="/plateform/a/order/getOrderStatus",v="/member/order/deal/dealOrder",g="/member/order/deal/getOrderListPage",b="/foundation/p/apply/leader/queryList",y={data:function(){return{pageSizes:d.a.pageSizes20,userName:c.a.get("loginInfo")?c.a.get("loginInfo").userName:"",loading:!1,pageNum:1,pageSize:20,total:0,searchContent:{storeLeaderId:"",storeGroupTypeNo:"",storeGroupNo:"",platformId:5,storeNo:"",orderId:"",businessType:"",orderType:"",orderStatus:"",defaultRange:[],startDate:"",endDate:"",receiverPhone:""},businessTypeOptions:[{label:"全部",value:""},{label:"预售",value:3},{label:"及时达",value:4},{label:"拼团",value:5},{label:"虚拟订单",value:6}],orderTypeOptions:[{label:"全部",value:""},{label:"及时送",value:1},{label:"预约送",value:2},{label:"自提",value:3}],orderStatusOptions:[{code:"",value:"全部"},{code:0,value:"支付成功"},{code:3,value:"待配送"},{code:4,value:"待自提"},{code:5,value:"配送中"},{code:6,value:"已完成"},{code:7,value:"已取消"},{code:8,value:"待支付"},{code:10,value:"已退款"},{code:11,value:"已失效"},{code:100,value:"待成团"},{code:101,value:"成团失败"}],storeOptions:[],tableData:[],checkedList:[],isDisabled:!1,dialogChangeStoreVisible:!1,storeNo:"",changeStoreOrderIds:[],dialogChangeOrderVisible:!1,logisticsCompanyOptList:[],orderNo:"",logisticsCompanyId:"",logisticsId:"",refundDialogVisible:!1,refundPartLoading:!1,currentRowMsg:{},refundReasonList:[],orderBaseMsg:{},refundVoList:[],reasonCode:"",skuNum:0,totalAmount:0,totalNum:0,storeLeaderOptions:[],changePickUpStartDateTime:!1,pickUpStartDateTime:"",changeTimeOrderId:"",pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}},created:function(){this.getStoreList(),this.getStoreLeaderList()},beforeMount:function(){var e=c.a.get("searchContentForOpe");this.$route.meta.keepAlive&&e&&(this.searchContent=e.searchContent,c.a.remove("searchContentForOpe"))},mounted:function(){this.doSearchHandel(!0)},components:{"date-picker-range":p.a,"store-group":h.a},methods:{StoreGroupChange:function(e){this.searchContent.storeNo=e.storeNo,this.searchContent.storeGroupTypeNo=e.storeGroupTypeNoList[0],this.searchContent.storeGroupNo=e.storeGroupTypeNoList[1],this.doSearchHandel(!0)},getStoreList:function(e,t){var a=this;this.$http.post(m,{storeGroupTypeNo:e||null,storeGroupNo:t||null}).then(function(e){if(0!==e.code)throw new Error(e.msg);var t=e.data&&e.data.length?e.data:[];a.storeOptions=t.map(function(e){return{value:e.storeNo,label:e.storeNo+"-"+e.storeName}})}).catch(function(e){console.log("提示(获取门店列表):",e.message)})},changeSize:function(e){this.pageSize=e,this.doSearchHandel()},changeCurrent:function(e){this.currentPage=e,this.doSearchHandel()},getOrderStatus:function(){var e=this;this.$http.post(f).then(function(t){if(0!==t.code)throw new Error(t.msg);t.data&&t.data.length&&(e.orderStatusOptions=t.data)}).catch(function(e){console.log("提示(获取订单状态):",e.message)})},doSearchHandel:function(e){var t=this;this.checkedList=[],this.loading=!0,!0===e&&(this.pageNum=1),this.$http.post(g,s()({},this.searchContent,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(e){if(t.loading=!1,0!==e.code)throw new Error(e.msg);if(e.data&&e.data.result&&e.data.result.length){var a=!0,r=!1,o=void 0;try{for(var n,i=l()(e.data.result);!(a=(n=i.next()).done);a=!0){var s=n.value;s.redirectUrl="/order_mgt/detail/"+s.orderId}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}t.tableData=e.data.result,1==t.pageNum&&(t.total=e.data.total)}else t.tableData=[],t.total=0}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})},handleSelect:function(e,t){var a={},r=[];if(u.m(t.orderId,"orderId",this.checkedList))this.checkedList=u.q("orderId",t.orderId,this.checkedList);else{r.push(t);var n=[].concat(r,o()(this.checkedList));this.checkedList=n.reduceRight(function(e,t){return!a[t.orderId]&&(a[t.orderId]=e.push(t)),e},[])}},handleSelectAll:function(e){var t={};if(e.length>0){var a=!0,r=!1,o=void 0;try{for(var n,i=l()(e);!(a=(n=i.next()).done);a=!0){var s=n.value;this.checkedList.push(s)}}catch(e){r=!0,o=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw o}}this.checkedList=this.checkedList.reduceRight(function(e,a){return!t[a.orderId]&&(t[a.orderId]=e.push(a)),e},[])}else{var c=[],d=!0,p=!1,h=void 0;try{for(var m,f=l()(this.tableData);!(d=(m=f.next()).done);d=!0){var v=m.value;c.push(v)}}catch(e){p=!0,h=e}finally{try{!d&&f.return&&f.return()}finally{if(p)throw h}}var g=u.i(this.checkedList,c,"orderId");this.checkedList=g&&g.length>0?g:[]}},nullTreating:function(e,t,a){return a||"--"},orderTypeFormatter:function(e,t,a){return 1===a?"及时送":2===a?"预约送":3===a?"自提单":void 0},emptyFormatter:function(e,t,a){return a&&""!=a?a:"--"},getStoreLeaderList:function(){var e=this;this.$http.post(b,{pageNum:1,pageSize:-1}).then(function(t){if(0!==t.code)throw new Error(t.msg);var a=t.data&&t.data.result&&t.data.result.length?t.data.result:[];e.storeLeaderOptions=a.filter(function(e){return 2===e.applyStatus&&0===e.userStatus}).map(function(e){return{id:e.id,applyStatus:e.applyStatus,virtualStoreName:e.virtualStoreName,userName:e.userName,actualStoreNo:e.actualStoreNo,value:e.id,label:e.id+"_"+e.virtualStoreName+"_"+e.userName}})}).catch(function(e){console.log("提示(获取所属团长店信息):",e.message)})},datePickerRangeChange:function(e){this.searchContent.defaultRange=e?[].concat(o()(e)):e,this.searchContent.startDate=e?e[0]:"",this.searchContent.endDate=e?e[1]:"",this.doSearchHandel(!0)},showChangePickUpStartDateTime:function(e){this.changePickUpStartDateTime=!0,this.changeTimeOrderId=e.orderId,this.pickUpStartDateTime=""},pickUpStartDateTimeChangeHandel:function(e){var t=this,a={opType:6,orderIds:[this.changeTimeOrderId],pickUpStartDateTime:this.pickUpStartDateTime};u.r(),this.isDisabled=!0,this.$http.post(v,a).then(function(e){if(u.c(),t.isDisabled=!1,0===e.code)return t.$message.success("修改履约时间成功"),t.doSearchHandel(),void(t.changePickUpStartDateTime=!1);throw new Error(e.msg)}).catch(function(e){u.c(),t.isDisabled=!1,t.$notify.error({title:"提示",message:e.message})})}},beforeRouteLeave:function(e,t,a){t.meta.keepAlive=!1,a()}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("store-group",{on:{StoreGroupChange:e.StoreGroupChange}}),e._v(" "),a("el-form-item",{attrs:{label:"所属团长店"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择所属团长店",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.storeLeaderId,callback:function(t){e.$set(e.searchContent,"storeLeaderId",t)},expression:"searchContent.storeLeaderId"}},e._l(e.storeLeaderOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"业务类型"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择业务类型",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.businessType,callback:function(t){e.$set(e.searchContent,"businessType",t)},expression:"searchContent.businessType"}},e._l(e.businessTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"配送类型"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择配送类型",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.orderType,callback:function(t){e.$set(e.searchContent,"orderType",t)},expression:"searchContent.orderType"}},e._l(e.orderTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入订单号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearchHandel(!0)}},model:{value:e.searchContent.orderId,callback:function(t){e.$set(e.searchContent,"orderId","string"==typeof t?t.trim():t)},expression:"searchContent.orderId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收货人手机号"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"收货人手机号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearchHandel(!0)}},model:{value:e.searchContent.receiverPhone,callback:function(t){e.$set(e.searchContent,"receiverPhone","string"==typeof t?t.trim():t)},expression:"searchContent.receiverPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下单时间"}},[a("date-picker-range",{attrs:{defaultRange:e.searchContent.defaultRange},on:{datePickerRangeChange:e.datePickerRangeChange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单状态"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择订单状态",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.orderStatus,callback:function(t){e.$set(e.searchContent,"orderStatus",t)},expression:"searchContent.orderStatus"}},e._l(e.orderStatusOptions,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandel(!0)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-wraper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"没有查询到您想要的数据",size:"small"},on:{select:e.handleSelect,"select-all":e.handleSelectAll}},[a("el-table-column",{attrs:{"min-width":"80px",prop:"platformStr",label:"订单来源"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"160px",prop:"orderId",label:"订单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"order-id"},[a("router-link",{attrs:{to:t.row.redirectUrl,target:"_blank"}},[e._v(e._s(t.row.orderId))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"businessTypeStr",label:"业务类型",formatter:e.emptyFormatter}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"86px",prop:"orderTypeStr",label:"配送类型",formatter:e.emptyFormatter}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110px",prop:"storeName",label:"所属门店"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"130px",label:"所属团长店"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.storeLeaderId?a("p",[e._v(e._s(t.row.storeLeaderId)+"_"+e._s(t.row.virtualStoreName)+"_"+e._s(t.row.userName))]):a("p",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"buyerName",label:"收货人"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"buyerPhone",label:"收货手机号"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90px",prop:"orderPayAmount",label:"订单实付"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"80px",prop:"orderStatusStr",label:"订单状态",formatter:e.nullTreating}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"170px",prop:"createTime",label:"下单时间",formatter:e.nullTreating}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"170px",prop:"prePickUpTimeFrom",label:"开始自提时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-date"},on:{click:function(a){return e.showChangePickUpStartDateTime(t.row)}}},[e._v("修改履约时间")])],1)]}}])})],1),e._v(" "),e._m(0),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length>0"}],staticClass:"tc mt20",attrs:{background:"","current-page":e.pageNum,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改履约时间",visible:e.changePickUpStartDateTime,width:"480px"},on:{"update:visible":function(t){e.changePickUpStartDateTime=t}}},[a("el-form",{ref:"form",attrs:{"label-width":"110px"}},[a("el-form-item",{attrs:{label:"履约时间",required:""}},[a("el-date-picker",{staticClass:"search-date-picker",attrs:{size:"small",type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"履约时间"},model:{value:e.pickUpStartDateTime,callback:function(t){e.pickUpStartDateTime=t},expression:"pickUpStartDateTime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.changePickUpStartDateTime=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isDisabled},on:{click:e.pickUpStartDateTimeChangeHandel}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{padding:"10px"}},[t("p",[t("span",{staticStyle:{color:"red","padding-right":"10px"}},[this._v("*")]),this._v("查询到订单信息，核对无误后，可操作订单修改自提门店；整单退款原路退回；已自提未核销的订单后台核销；")]),this._v(" "),t("p",[t("span",{staticStyle:{color:"red","padding-right":"10px"}},[this._v("*")]),this._v("批量置为过期订单，仅用于超时未提截单后置为过期，且不给用户退款，谨慎操作。")])])}]};var k=a("VU/8")(y,S,!1,function(e){a("+kcb")},null,null);t.default=k.exports}});
//# sourceMappingURL=59.d185b7d7aa2282ca1344.js.map