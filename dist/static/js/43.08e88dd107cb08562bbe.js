webpackJsonp([43],{Cnmd:function(e,t){},QmFM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("ssT3");var a="/member/erp/prom/batchCreatePromInfo",o="/foundation/businessConfig/listByCommonCodes",n={data:function(){return{loading:!1,detailParamMesg:{batchCreatePromId:""},disCoupon:{},goodCoupon:{},disIsnull:!0,goodIsnull:!0,promType:"2",currentPromDiscount:{},erpPromotionType:[]}},created:function(){this.getErpPromotionType(),this.detailParamMesg.batchCreatePromId=this.$route.params.batchCreatePromId,this.getDetail()},mounted:function(){},methods:{getErpPromotionType:function(){var e=this;this.$http.post(o,["ErpPromotionType"],!0).then(function(t){if(0!==t.code)throw new Error(t.msg);e.erpPromotionType=t.data.ErpPromotionType}).catch(function(e){console.log(e.message)})},triggerTypeFormater:function(e){switch(e){case 1:return"直接发放";case 4:return"充值返券(单次)";case 42:return"充值返券(多次)";case 71:return"消费发放";case 2:return"分享返券";case 3:return"签到返券";case 6:return"领取活动";case 81:return"扫码送券";case 82:return"扫码消费送券";case 91:return"省钱礼包";case 12:return"指定客户发券";case 111:return"天降红包";case 121:return"积分换券";default:return"其它券"}},promTypeFormater:function(e){switch(e){case 2:return"满减券";case 5:return"商品券"}},ruleSourceFormater:function(e){switch(e){case 0:return"商城+门店商品";case 1:return"门店商品";case 2:return"商城商品"}},onlineGoodsTypeFormater:function(e){switch(e){case"3":return"预售商品";case"4":return"全国商品";case"5":return"拼团商品"}},onlineActivityTypeFormater:function(e){switch(e){case"11":return"拼团活动";case"21":return"秒杀活动";case"31":return"包装折扣活动";case"41":return"新人专享活动";case"51":return"预售活动";case"61":return"爆款活动"}},activityTypeFormater:function(e){var t=e;return this.erpPromotionType.forEach(function(r){r.code==e&&(t=r.value)}),t},goodsTypeFormater:function(e){switch(e){case 1:return"门店";case 2:return"商城"}},triggerSourceFormater:function(e){switch(e){case 1:return"单笔门店消费：";case 2:return"单笔商城消费："}},triggerTimesTypeFormater:function(e){switch(e){case 0:return"无限制";case 1:return"整个活动只发放一次";case 2:return"每天一次";case 3:return"每周一次"}},getDetail:function(){var e=this;this.loading=!0,this.$http.post(a,{batchCreatePromId:this.detailParamMesg.batchCreatePromId}).then(function(t){if(e.loading=!1,0!==t.code)throw new Error(t.msg);t.data&&(t.data.promInfoVos.forEach(function(t){2==t.promType?e.disCoupon=t:5==t.promType&&(e.goodCoupon=t)}),e.disCoupon.promDiscounts&&e.disCoupon.promDiscounts.length>0&&e.disCoupon.promDiscounts.forEach(function(t){for(var r in t)""!=t[r]&&(e.disIsnull=!1)}),e.goodCoupon.promDiscounts&&e.goodCoupon.promDiscounts.length>0&&e.goodCoupon.promDiscounts.forEach(function(t){for(var r in t)""!=t[r]&&(e.goodIsnull=!1)}),e.detailParamMesg=t.data,e.disIsnull?(e.currentPromDiscount=e.goodCoupon,e.promType="5"):(e.goodIsnull,e.currentPromDiscount=e.disCoupon,e.promType="2"))}).catch(function(t){e.loading=!1,e.$notify.error({title:"提示",message:t.message})})},promTypeChange:function(){"2"===this.promType?this.currentPromDiscount=this.disCoupon:"5"===this.promType&&(this.currentPromDiscount=this.goodCoupon)}},beforeRouteLeave:function(e,t,r){e.meta.keepAlive=!0,r()}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"add-form-wraper coupon-detail"},[r("el-form",{ref:"form",attrs:{model:e.detailParamMesg,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"活动类型"}},[r("p",{staticStyle:{color:"#222","font-size":"16px","font-weight":"bold"}},[e._v(e._s(e.triggerTypeFormater(e.detailParamMesg.triggerType)))])]),e._v(" "),r("el-form-item",{attrs:{label:"卡券城市"}},[r("p",[e._v(e._s(e.detailParamMesg.city))])]),e._v(" "),r("el-form-item",{attrs:{label:"活动名称"}},[r("p",[e._v(e._s(e.detailParamMesg.title))])]),e._v(" "),r("el-form-item",{attrs:{label:"开始时间"}},[r("p",[e._v(e._s(e.detailParamMesg.beginTime))])]),e._v(" "),r("el-form-item",{attrs:{label:"结束时间"}},[r("p",[e._v(e._s(e.detailParamMesg.endTime))])]),e._v(" "),!e.detailParamMesg.newRegister||1!==e.detailParamMesg.triggerType&&71!==e.detailParamMesg.triggerType?e._e():r("el-form-item",{attrs:{label:"设置条件"}},[r("p",[e._v("新注册会员")])]),e._v(" "),81===e.detailParamMesg.triggerType?r("el-form-item",{attrs:{label:"设置条件"}},[r("div",[e._v("\n          客户中奖概率："+e._s(e.detailParamMesg.baseWinPromRate||"-")+"%\n        ")]),e._v(" "),r("div",[e._v("\n          "+e._s(1===e.detailParamMesg.scanPromCountType?"每天可扫数量":"活动总可扫数量")+"    共"+e._s(e.detailParamMesg.limitCount||"-")+"\n        ")])]):e._e(),e._v(" "),82===e.detailParamMesg.triggerType?r("el-form-item",{attrs:{label:"设置条件"}},[r("div",[e._v("\n          客户中奖概率："+e._s(e.detailParamMesg.baseWinPromRate||"-")+"%\n        ")]),e._v(" "),e.detailParamMesg.winRatePromReqs?r("div",e._l(e.detailParamMesg.winRatePromReqs,function(t,a){return r("div",{key:a},[e._v("\n            单笔门店消费："+e._s(t.consumeAmount)+"元    中奖概率："+e._s(t.winRate)+"%\n          ")])}),0):e._e()]):e.detailParamMesg.triggerSaleType&&e.detailParamMesg.triggerSource?r("el-form-item",{attrs:{label:"设置条件"}},[r("span",[e._v(e._s(e.triggerSourceFormater(e.detailParamMesg.triggerSource))+e._s(e.detailParamMesg.triggerAmount||0)+" 元")]),e._v(" "),2==e.detailParamMesg.triggerSource&&e.detailParamMesg.triggerOnlineGoodsType&&e.detailParamMesg.triggerOnlineGoodsType.length>0?r("span",e._l(e.detailParamMesg.triggerOnlineGoodsType.split(";"),function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n          "+e._s(e.onlineGoodsTypeFormater(t))+"\n          ")])}),1):e._e()]):e._e(),e._v(" "),111===e.detailParamMesg.triggerType?r("el-form-item",{attrs:{label:"设置条件"}},[1===e.detailParamMesg.newRegister?r("p",[e._v("新人专享(未注册或注册后从未消费过的用户)")]):2===e.detailParamMesg.newRegister?r("p",[e._v("老会员领取")]):r("p",[e._v("--")])]):e._e(),e._v(" "),void 0!==e.detailParamMesg.triggerTimesType?r("el-form-item",{attrs:{label:"设置发放频率"}},[r("p",[e._v(e._s(e.triggerTimesTypeFormater(e.detailParamMesg.triggerTimesType)))])]):e._e(),e._v(" "),91===e.detailParamMesg.triggerType?r("el-form-item",{attrs:{label:"购买方式"}},[e.detailParamMesg.triggerAmount?r("span",[e._v("需要金额："+e._s(e.detailParamMesg.triggerAmount)+"元")]):e._e(),e.detailParamMesg.triggerIntegral?r("span",{staticStyle:{"margin-left":"30px"}},[e._v("积分购买："+e._s(e.detailParamMesg.triggerIntegral)+"分")]):e._e()]):e._e(),e._v(" "),91===e.detailParamMesg.triggerType&&(e.detailParamMesg.limitCount||e.detailParamMesg.triggerDisAmount)?r("el-form-item",{attrs:{label:"限制&展示"}},[e.detailParamMesg.limitCount?r("span",[e._v("每人限购数量："+e._s(e.detailParamMesg.limitCount)+"次")]):e._e(),e.detailParamMesg.triggerDisAmount?r("span",{staticStyle:{"margin-left":"30px"}},[e._v("最高可节省金额："+e._s(e.detailParamMesg.triggerDisAmount)+"元")]):e._e()]):e._e(),e._v(" "),e.detailParamMesg.storeNo&&e.detailParamMesg.storeNo.length>0?r("el-form-item",{attrs:{label:"参与门店"}},e._l(e.detailParamMesg.storeNo,function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(t)+"\n        ")])}),1):e.detailParamMesg.excludeStoreNo&&e.detailParamMesg.excludeStoreNo.length>0?r("el-form-item",{attrs:{label:"排除门店"}},e._l(e.detailParamMesg.excludeStoreNo,function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(t)+"\n        ")])}),1):r("el-form-item",{attrs:{label:"参与门店"}},[r("p",[e._v("全部门店")])]),e._v(" "),e.detailParamMesg.useBeginTime?r("el-form-item",{attrs:{label:"卡券开始时间"}},[r("p",[e._v(e._s(e.detailParamMesg.useBeginTime))])]):e._e(),e._v(" "),e.detailParamMesg.useEndTime?r("el-form-item",{attrs:{label:"卡券结束时间"}},[r("p",[e._v(e._s(e.detailParamMesg.useEndTime))])]):e._e(),e._v(" "),e.detailParamMesg.useDayCount?r("el-form-item",{attrs:{label:"卡券有效期"}},[r("p",[e._v(e._s(e.detailParamMesg.useDayCount)+"天")])]):e._e(),e._v(" "),e.disIsnull?r("el-form-item",{attrs:{label:"卡券形式"}},[r("p",[e._v(e._s(e.promTypeFormater(e.goodCoupon.promType)))])]):e.goodIsnull?r("el-form-item",{attrs:{label:"卡券形式"}},[r("p",[e._v(e._s(e.promTypeFormater(e.disCoupon.promType)))])]):r("el-form-item",{attrs:{label:"卡券形式"}},[r("el-tabs",{staticClass:"add-input prom-type",on:{"tab-click":e.promTypeChange},model:{value:e.promType,callback:function(t){e.promType=t},expression:"promType"}},[r("el-tab-pane",{attrs:{label:"满减券",name:"2"}}),e._v(" "),r("el-tab-pane",{attrs:{label:"商品券",name:"5"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"使用范围"}},[void 0!==e.currentPromDiscount.ruleSource?r("p",[e._v(e._s(e.ruleSourceFormater(e.currentPromDiscount.ruleSource)))]):r("p",[e._v("门店商品")])]),e._v(" "),5!==e.currentPromDiscount.promType&&e.currentPromDiscount.onlineGoodsNo&&e.currentPromDiscount.onlineGoodsNo.length>0?r("el-form-item",{attrs:{label:"商城参与商品"}},[r("el-table",{staticStyle:{width:"50%"},attrs:{data:e.currentPromDiscount.onlineGoodsNo,"max-height":"350",size:"small"}},[r("el-table-column",{attrs:{prop:"productId",label:"商品编码"}}),e._v(" "),r("el-table-column",{attrs:{prop:"productName",label:"商品名称"}})],1)],1):5!==e.currentPromDiscount.promType&&e.currentPromDiscount.onlineExcludeGoodsNo&&e.currentPromDiscount.onlineExcludeGoodsNo.length>0?r("el-form-item",{attrs:{label:"商城排除商品"}},[r("el-table",{staticStyle:{width:"50%"},attrs:{data:e.currentPromDiscount.onlineExcludeGoodsNo,"max-height":"350",size:"small"}},[r("el-table-column",{attrs:{prop:"productId",label:"商品编码"}}),e._v(" "),r("el-table-column",{attrs:{prop:"productName",label:"商品名称"}})],1)],1):e._e(),e._v(" "),e.currentPromDiscount.onlineCategoryNo&&e.currentPromDiscount.onlineCategoryNo.length>0?r("el-form-item",{attrs:{label:"商城参与分类"}},e._l(e.currentPromDiscount.onlineCategoryNo,function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(t)+"\n        ")])}),1):e.currentPromDiscount.onlineExcludeCategoryNo&&e.currentPromDiscount.onlineExcludeCategoryNo.length>0?r("el-form-item",{attrs:{label:"商城排除分类"}},e._l(e.currentPromDiscount.onlineExcludeCategoryNo,function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(t)+"\n        ")])}),1):e._e(),e._v(" "),e.currentPromDiscount.onlineGoodsType&&e.currentPromDiscount.onlineGoodsType.length>0?r("el-form-item",{attrs:{label:"商品类型"}},e._l(e.currentPromDiscount.onlineGoodsType.split(";"),function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(e.onlineGoodsTypeFormater(t))+"\n        ")])}),1):e._e(),e._v(" "),e.currentPromDiscount.onlineActivityType&&e.currentPromDiscount.onlineActivityType.length>0?r("el-form-item",{attrs:{label:"线上商城活动"}},e._l(e.currentPromDiscount.onlineActivityType.split(";"),function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(e.onlineActivityTypeFormater(t))+"可使用该优惠券\n        ")])}),1):e._e(),e._v(" "),5!==e.currentPromDiscount.promType&&e.currentPromDiscount.goodsNo&&e.currentPromDiscount.goodsNo.length>0?r("el-form-item",{attrs:{label:"门店参与商品"}},[r("el-table",{staticStyle:{width:"50%"},attrs:{data:e.currentPromDiscount.goodsNo,"max-height":"350",size:"small"}},[r("el-table-column",{attrs:{prop:"productId",label:"商品编码"}}),e._v(" "),r("el-table-column",{attrs:{prop:"productName",label:"商品名称"}})],1)],1):5!==e.currentPromDiscount.promType&&e.currentPromDiscount.excludeGoodsNo&&e.currentPromDiscount.excludeGoodsNo.length>0?r("el-form-item",{attrs:{label:"门店排除商品"}},[r("el-table",{staticStyle:{width:"50%"},attrs:{data:e.currentPromDiscount.excludeGoodsNo,"max-height":"350",size:"small"}},[r("el-table-column",{attrs:{prop:"productId",label:"商品编码"}}),e._v(" "),r("el-table-column",{attrs:{prop:"productName",label:"商品名称"}})],1)],1):e._e(),e._v(" "),e.currentPromDiscount.categoryNo&&e.currentPromDiscount.categoryNo.length>0?r("el-form-item",{attrs:{label:"门店参与分类"}},e._l(e.currentPromDiscount.categoryNo,function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(t)+"\n        ")])}),1):e.currentPromDiscount.excludeCategoryNo&&e.currentPromDiscount.excludeCategoryNo.length>0?r("el-form-item",{attrs:{label:"门店排除分类"}},e._l(e.currentPromDiscount.excludeCategoryNo,function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(t)+"\n        ")])}),1):e._e(),e._v(" "),e.currentPromDiscount.activityType&&e.currentPromDiscount.activityType.length>0?r("el-form-item",{attrs:{label:"线下门店活动"}},[e._l(e.currentPromDiscount.activityType.split(";"),function(t,a){return r("el-tag",{key:a,attrs:{type:"info"}},[e._v("\n        "+e._s(e.activityTypeFormater(t))+"可使用该优惠券\n        ")])}),e._v(" "),r("span",[e._v("请至ERP共通资料中查询活动名称")])],2):r("el-form-item",{attrs:{label:"线下门店活动"}},[r("p",[e._v("优惠券不可与线下活动同享")])]),e._v(" "),e.currentPromDiscount.promDiscounts&&e.currentPromDiscount.promDiscounts.length&&"2"===e.promType?r("el-form-item",{attrs:{label:"卡券奖励"}},e._l(e.currentPromDiscount.promDiscounts,function(t,a){return r("el-card",{key:a,attrs:{shadow:"hover"}},[4===e.detailParamMesg.triggerType||42===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            充值金额 "+e._s(t.triggerAmount||0)+" 元\n          ")]):e._e(),e._v(" "),42===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            满 "+e._s(t.meetAmount)+" 元减 "+e._s(t.discAmount)+" 元,每次发放优惠券数："+e._s(t.sendPromCount||0)+",共发放次数："+e._s(t.sendCount||0)+",发放优惠券间隔："+e._s(t.sendIntervalDays||0)+"\n          ")]):81===e.detailParamMesg.triggerType||82===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            满 "+e._s(t.meetAmount)+" 元减 "+e._s(t.discAmount)+" 元，发放总张数 "+e._s(t.sendCount||t.count)+" 张,   获得该券概率"+e._s(t.winPromRate||"-")+"%\n          ")]):r("el-tag",{attrs:{type:"info"}},[121===e.detailParamMesg.triggerType||111===e.detailParamMesg.triggerType?r("span",[e._v("\n              卡券名称: "+e._s(t.title||"-")+"，\n            ")]):e._e(),e._v("\n            满 "+e._s(t.meetAmount)+" 元减 "+e._s(t.discAmount)+" 元，共 "+e._s(t.sendPromCount||t.count)+" 张，共 "+e._s(t.discAmount*t.sendPromCount||t.discAmount*t.count||0)+" 元\n            "),121===e.detailParamMesg.triggerType?r("span",[e._v("\n              ，积分购买要 "+e._s(t.triggerIntegralProm)+" 积分，库存 "+e._s(t.curStock)+" 张，每人限购数量(选填) "+e._s(t.limitCount||"不限")+" 次\n            ")]):e._e()]),e._v(" "),4!==e.detailParamMesg.triggerType&&42!==e.detailParamMesg.triggerType||!t.remark?e._e():r("el-tag",{attrs:{type:"info"}},[e._v("\n            "+e._s(t.remark)+"\n          ")])],1)}),1):e._e(),e._v(" "),e.currentPromDiscount.promDiscounts&&e.currentPromDiscount.promDiscounts.length&&"5"===e.promType?r("el-form-item",{attrs:{label:"卡券奖励"}},e._l(e.currentPromDiscount.promDiscounts,function(t,a){return r("el-card",{key:a,attrs:{shadow:"hover"}},[121===e.detailParamMesg.triggerType||111===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            卡券名称："+e._s(t.title||"-")+"\n          ")]):e._e(),e._v(" "),4===e.detailParamMesg.triggerType||42===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            充值金额 "+e._s(t.triggerAmount||0)+" 元\n          ")]):e._e(),e._v(" "),t.goodsType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            使用范围："+e._s(e.goodsTypeFormater(t.goodsType))+"\n          ")]):e._e(),e._v(" "),r("el-tag",{attrs:{type:"info"}},[e._v("\n            应付价格："+e._s(t.needPayAmount||0)+"元 \n          ")]),e._v(" "),r("el-tag",{attrs:{type:"info"}},[e._v("\n            选择商品：\n            "),e._l(t.goodsName,function(t,a){return r("span",{key:a},[e._v("\n            "+e._s(t)+"，\n            ")])})],2),e._v(" "),r("el-tag",{attrs:{type:"info"}},[e._v("\n            商品数量小于等于："+e._s(t.productQtyLimit)+"\n            "),t.productUnitStr?r("span",[e._v("("+e._s(t.productUnitStr)+")")]):r("span",[e._v("(份)")])]),e._v(" "),81===e.detailParamMesg.triggerType||82===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            发放总张数："+e._s(t.sendCount||0)+" \n          ")]):r("el-tag",{attrs:{type:"info"}},[e._v("\n            优惠券数量："+e._s(t.sendPromCount||0)+" \n          ")]),e._v(" "),42===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            每次发放优惠券数："+e._s(t.sendPromCount||0)+",共发放次数："+e._s(t.sendCount||0)+",发放优惠券间隔："+e._s(t.sendIntervalDays||0)+" \n          ")]):e._e(),e._v(" "),81===e.detailParamMesg.triggerType||82===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            获得该券概率："+e._s(t.winPromRate||0)+"%\n          ")]):e._e(),e._v(" "),121===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            积分购买需要："+e._s(t.triggerIntegralProm||"-")+"分\n          ")]):e._e(),e._v(" "),121===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            库存："+e._s(t.curStock||"-")+"张\n          ")]):e._e(),e._v(" "),121===e.detailParamMesg.triggerType?r("el-tag",{attrs:{type:"info"}},[e._v("\n            每人限购数量(选填)："+e._s(t.limitCount||"不限")+" 次\n          ")]):e._e(),e._v(" "),4!==e.detailParamMesg.triggerType&&42!==e.detailParamMesg.triggerType||!t.remark?e._e():r("el-tag",{attrs:{type:"info"}},[e._v("\n            "+e._s(t.remark)+"\n          ")])],1)}),1):e._e(),e._v(" "),12===e.detailParamMesg.triggerType&&e.detailParamMesg.specifyPromRecords&&e.detailParamMesg.specifyPromRecords.length>0?r("el-form-item",{attrs:{label:"发送详情"}},[r("el-table",{staticStyle:{width:"50%"},attrs:{data:e.detailParamMesg.specifyPromRecords,"max-height":"350",size:"small"}},[r("el-table-column",{attrs:{"min-width":"160",prop:"sendDate",label:"发放时间"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userName",label:"操作人名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1):e._e()],1)],1)])},staticRenderFns:[]};var i=r("VU/8")(n,s,!1,function(e){r("Cnmd")},null,null);t.default=i.exports}});
//# sourceMappingURL=43.08e88dd107cb08562bbe.js.map