webpackJsonp([130],{"/M8M":function(e,t){},"9riC":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),r=a.n(n),s=a("Gu7T"),i=a.n(s),o=a("Dd8w"),l=a.n(o),c=a("ssT3"),u=a("oAV5"),h=(a("FzCZ"),"/plateform/a/mall/pageTemp/storePageTempList"),d="/plateform/a/mall/pageTemp/upOrLowerPage",p={data:function(){return{loading:!1,pageNum:1,pageSize:20,total:0,searchContent:{DIFFCITY:!0,regionCode:c.a.get("regionCode")||"",cityId:"",pageName:"",pageType:"",useStatus:"",storeNo:""},pageTypeOptions:[{label:"全部",value:""},{label:"首页",value:1},{label:"专题页",value:2}],useStatusOptions:[{label:"全部",value:""},{label:"上架",value:1},{label:"下架",value:2}],storeOptions:[],checkedList:[],tableData:[]}},components:{"region-city-store":a("32kd").a},created:function(){this.searchContent.pageName=this.$route.query.pageName&&"undefined"!==this.$route.query.pageName?this.$route.query.pageName:"",this.searchContent.pageType=this.$route.query.pageType&&"undefined"!==this.$route.query.pageType?parseInt(this.$route.query.pageType):"",this.searchContent.useStatus=this.$route.query.useStatus&&"undefined"!==his.$route.query.useStatus?parseInt(this.$route.query.useStatus):""},mounted:function(){this.doSearchHandel()},methods:{StoreGroupChange:function(e){this.searchContent.regionCode=e.regionCode,this.searchContent.cityId=e.cityId,this.searchContent.storeNo=e.storeNo,this.doSearchHandel(!0)},changeSize:function(e){this.pageSize=e,this.doSearchHandel()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandel()},doSearchHandel:function(e){var t=this;this.checkedList=[],this.loading=!0,!0===e&&(this.pageNum=1),this.$http.post(h,l()({},this.searchContent,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(e){if(t.loading=!1,0!==e.code)throw new Error(e.msg);if(e.data&&e.data.result&&e.data.result.length){t.tableData=e.data.result;var a=t.pageNum;t.pageNum=a}else t.tableData=[];t.total=e.data.total}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})},handleSelect:function(e,t){var a={},n=[];if(u.l(t.id,this.checkedList))this.checkedList=u.q("id",t.id,this.checkedList);else{n.push(t);var r=[].concat(n,i()(this.checkedList));this.checkedList=r.reduceRight(function(e,t){return!a[t.id]&&(a[t.id]=e.push(t)),e},[])}},handleSelectAll:function(e){var t={};if(e.length>0){var a=!0,n=!1,s=void 0;try{for(var i,o=r()(e);!(a=(i=o.next()).done);a=!0){var l=i.value;this.checkedList.push(l)}}catch(e){n=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw s}}this.checkedList=this.checkedList.reduceRight(function(e,a){return!t[a.id]&&(t[a.id]=e.push(a)),e},[])}else{var c=[],h=!0,d=!1,p=void 0;try{for(var g,f=r()(this.tableData);!(h=(g=f.next()).done);h=!0){var m=g.value;c.push(m)}}catch(e){d=!0,p=e}finally{try{!h&&f.return&&f.return()}finally{if(d)throw p}}var v=u.i(this.checkedList,c,"id");this.checkedList=v&&v.length>0?v:[]}},upOrDownPageHandel:function(e,t,a){var n=this,r="";1===t?r="您确定要上架所选页面，替换原页面吗？":2===t&&(r="您确定要下架所选页面，替换原页面吗？");var s=[];if(e){var i=a.id;s.push(i)}else s=a.map(function(e){return e.id});var o={DIFFCITY:!0,ids:s,useStatus:t};this.$confirm(r,"温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$http.post(d,o).then(function(e){if(0===e.code)return n.$message.success("操作成功"),void n.doSearchHandel();throw new Error(e.msg)}).catch(function(e){n.$notify.error({title:"提示",message:e.message})})}).catch(function(){})},useStatusStrHeader:function(){var e=this.$createElement;return e("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[e("div",[e("p",["1、每个门店只能上架一个首页，上架新首页时会替换原首页；"]),e("p",["2、首页不可操作下架；"]),e("p",["3、专题页可上架，可下架；"])]),e("span",{slot:"reference"},["状态",e("i",{class:"el-icon-question"})])])}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("region-city-store",{attrs:{showGroup:!1,defaultCityId:e.searchContent.cityId},on:{StoreGroupChange:e.StoreGroupChange}}),e._v(" "),a("el-form-item",{attrs:{label:"页面名称"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"页面名称",size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearchHandel(!0)}},model:{value:e.searchContent.pageName,callback:function(t){e.$set(e.searchContent,"pageName","string"==typeof t?t.trim():t)},expression:"searchContent.pageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"页面类型"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择页面类型",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.pageType,callback:function(t){e.$set(e.searchContent,"pageType",t)},expression:"searchContent.pageType"}},e._l(e.pageTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择状态",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.useStatus,callback:function(t){e.$set(e.searchContent,"useStatus",t)},expression:"searchContent.useStatus"}},e._l(e.useStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandel(!0)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-wraper"},[a("div",{staticClass:"sp-handel-w"},[a("el-button",{staticClass:"sup-mini",attrs:{size:"mini",disabled:0===e.checkedList.length,icon:"el-icon-top"},on:{click:function(t){return e.upOrDownPageHandel(!1,1,e.checkedList)}}},[e._v("上架")]),e._v(" "),a("el-button",{staticClass:"sup-mini",attrs:{size:"mini",disabled:0===e.checkedList.length,icon:"el-icon-bottom"},on:{click:function(t){return e.upOrDownPageHandel(!1,2,e.checkedList)}}},[e._v("下架")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"没有查询到您想要的数据",size:"small"},on:{select:e.handleSelect,"select-all":e.handleSelectAll}},[a("el-table-column",{attrs:{type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"140px",label:"门店"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.storeNo)+"_"+e._s(t.row.storeName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"140px",label:"页面名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.pageId)+"_"+e._s(t.row.pageName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"pageTypeStr",label:"页面类型"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"80px",prop:"useStatusStr","render-header":e.useStatusStrHeader}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[2===t.row.useStatus?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-top"},on:{click:function(a){return e.upOrDownPageHandel(!0,1,t.row)}}},[e._v("上架")]):e._e(),e._v(" "),1===t.row.useStatus&&2===t.row.pageType?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-bottom"},on:{click:function(a){return e.upOrDownPageHandel(!0,2,t.row)}}},[e._v("下架")]):e._e()],1)]}}])})],1),e._v(" "),e.total>0?a("el-pagination",{staticClass:"tc mt20",attrs:{background:"","current-page":e.pageNum,"page-sizes":[20,50,100,150,200],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1)])},staticRenderFns:[]};var f=a("VU/8")(p,g,!1,function(e){a("/M8M")},null,null);t.default=f.exports}});
//# sourceMappingURL=130.0e76f8f105d800df1ae4.js.map