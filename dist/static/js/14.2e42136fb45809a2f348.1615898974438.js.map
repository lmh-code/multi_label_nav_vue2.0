{"version":3,"sources":["webpack:///./src/module/views/Reconciliation/Reconciliation/mixin/detail.js","webpack:///src/module/views/Reconciliation/Reconciliation/Edit.vue","webpack:///./src/module/views/Reconciliation/Reconciliation/Edit.vue?324f","webpack:///./src/module/views/Reconciliation/Reconciliation/Edit.vue"],"names":["__webpack_exports__","data","storeNo","paperNo","editType","isDispute","orderDetail","pageNum","pageSize","loading","tableData","total","searchContent","goodsNo","barcode","vendorGoodsNo","columnsTemp","title","dataIndex","ellipsis","minWidth","columns","created","_this","this","$route","params","type","otherColumn","placeholder","input","concat","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default","mounted","getGoodsDetail","getGoodsList","methods","_this2","reqUrl","requestUrl","detail","$loading","show","$http","post","then","res","hide","code","Error","msg","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","catch","e","$tip","notify","message","_this3","goodsDetail","result","length","Edit","mixins","options","isDisabled","doEditHandel","goodsReqListTemp","filter","item","disputePrice","disputeQty","remarks","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","value","constant","salePriceReg","test","err","return","goodsReqList","map","reconciliation","updateDispute","extends_default","editSuccessHandel","closePage","doCancelHandel","Reconciliation_Edit","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","align","gutter","span","_v","_s","storeName","totalAmount","reconciliationAmount","vReconciliationUserName","vReconciliationTime","reconciliationUserName","reconciliationDate","staticStyle","color","disputeText","_e","model","label-position","label","size","clearable","callback","$$v","$set","trim","expression","on","click","border","dataSource","disabled","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext"],"mappings":"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","file":"static/js/14.2e42136fb45809a2f348.1615898974438.js","sourcesContent":["import requestUrl from '@/module/api/reconciliation'\nexport default {\n  data() {\n    return {\n      storeNo: '',\n      paperNo: '',\n      editType: '',\n      isDispute: '', // 是否有争议  110 有 001 无\n      orderDetail: {},\n      pageNum: 1,\n      pageSize: -1,\n      loading: false,\n      tableData: [],\n      total: 0,\n      searchContent: {\n        goodsNo: '', // 商品编码\n        barcode: '', // 条码\n        vendorGoodsNo: '' // 货号\n      },\n      columnsTemp: [\n        {\n          title: '商品编码',\n          dataIndex: 'goodsNo',\n          ellipsis: true,\n          minWidth: 90\n        },\n        {\n          title: '条码',\n          dataIndex: 'barcode',\n          ellipsis: true,\n          minWidth: 100\n        },\n        {\n          title: '货号',\n          dataIndex: 'vendorGoodsNo',\n          ellipsis: true,\n          minWidth: 100\n        },\n        {\n          title: '商品名称',\n          dataIndex: 'goodsName',\n          ellipsis: true,\n          minWidth: 130\n        },\n        {\n          title: '单位',\n          dataIndex: 'unit',\n          minWidth: 80\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          minWidth: 80\n        },\n        {\n          title: '收货数量',\n          dataIndex: 'qty',\n          minWidth: 80\n        },\n        {\n          title: '收货单价',\n          dataIndex: 'price',\n          minWidth: 80\n        },\n        {\n          title: '不含税收货金额',\n          dataIndex: 'netAmount',\n          minWidth: 120\n        },\n        {\n          title: '收货总金额',\n          dataIndex: 'amount',\n          minWidth: 100\n        }\n      ],\n      columns: []\n    }\n  },\n  created() {\n    this.storeNo = this.$route.params.storeNo\n    this.paperNo = this.$route.params.paperNo\n    this.editType = this.$route.params.type\n    this.isDispute = this.$route.params.isDispute\n    \n    let otherColumn = [\n      {\n        title: '争议单价',\n        dataIndex: 'disputePrice',\n        minWidth: 110,\n        placeholder: '争议单价',\n        input: () => {\n          return this.editType === 'edit' ? true : false\n        }\n      },\n      {\n        title: '争议收货数量',\n        dataIndex: 'disputeQty',\n        minWidth: 120,\n        placeholder: '争议收货数量',\n        input: () => {\n          return this.editType === 'edit' ? true : false\n        }\n      },\n      {\n        title: '备注',\n        dataIndex: 'remarks',\n        minWidth: 140,\n        placeholder: '备注',\n        ellipsis: true,\n        input: () => {\n          return this.editType === 'edit' ? true : false\n        }\n      }\n    ]\n    if(this.editType === 'edit') {\n      // 编辑\n      this.columns = [...this.columnsTemp, ...otherColumn]\n    }else {\n      // 详情: 判断有没有争议，没有争议不显示争议内容\n      if(this.isDispute === '110') {\n        this.columns = [...this.columnsTemp, ...otherColumn]\n      }else {\n        this.columns = [...this.columnsTemp]\n      }\n    }\n  },\n  mounted() {\n    this.getGoodsDetail()\n    this.getGoodsList()\n  },\n  methods: {\n    getGoodsDetail() {\n      let reqUrl = `${requestUrl.detail}/${this.storeNo}/${this.paperNo}`\n      this.$loading.show()\n      this.$http.post(reqUrl).then(res => {\n        this.$loading.hide()\n        if(res.code === 0) {\n          if(res.data) {\n            this.orderDetail = {...res.data}\n          }\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.$loading.hide()\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    },\n    getGoodsList() {\n      this.loading = true\n      this.$http.post(requestUrl.goodsDetail, {...this.searchContent, paperNo: this.paperNo, storeNo: this.storeNo, pageNum: this.pageNum, pageSize: this.pageSize}).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          this.tableData = res.data && res.data.result && res.data.result.length ? res.data.result : []\n          this.total = res.data && res.data.total ? res.data.total : 0\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/module/views/Reconciliation/Reconciliation/mixin/detail.js","<style lang=\"less\" scoped>\n  .mt6 {\n    margin-top: 6px;\n  }\n</style>\n<template>\n  <div class=\"main-wrapper\">\n    <div class=\"handel-wraper\">\n      <el-row type=\"flex\" align=\"bottom\" :gutter=\"20\">\n        <el-col :span='10'>收退货单号：{{orderDetail.paperNo}}</el-col>\n        <el-col :span='10'>门店/仓库：{{orderDetail.storeName}}</el-col>\n      </el-row>\n      <el-row type=\"flex\" align=\"bottom\" :gutter=\"20\" class=\"mt6\">\n        <el-col :span='10'>收货金额：{{orderDetail.totalAmount}}</el-col>\n        <el-col :span='10'>对帐金额：{{orderDetail.reconciliationAmount}}</el-col>\n      </el-row>\n      <el-row type=\"flex\" align=\"bottom\" :gutter=\"20\" class=\"mt6\">\n        <el-col :span='10'>供应商对帐人：{{orderDetail.vReconciliationUserName}}</el-col>\n        <el-col :span='10'>供应商对帐时间：{{orderDetail.vReconciliationTime}}</el-col>\n      </el-row>\n      <el-row type=\"flex\" align=\"bottom\" :gutter=\"20\" class=\"mt6\">\n        <el-col :span='10'>本来鲜对帐人：{{orderDetail.reconciliationUserName}}</el-col>\n        <el-col :span='10'>本来鲜对帐时间：{{orderDetail.reconciliationDate}}</el-col>\n      </el-row>\n      <el-row type=\"flex\" align=\"bottom\" :gutter=\"20\" class=\"mt6\">\n        <el-col :span='24' v-if=\"isDispute==='110'\">\n          争议内容：<span style=\"color: 'red'\">{{orderDetail.disputeText}}</span>\n        </el-col>\n      </el-row>\n    </div>\n    <div class=\"search-form-wraper\">\n      <el-form :model=\"searchContent\" label-position=\"top\">\n        <el-form-item label=\"商品编码\">\n          <el-input \n            v-model.trim=\"searchContent.goodsNo\" \n            size=\"small\" \n            class=\"search-input\" \n            placeholder=\"请输入商品编码\"\n            clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"条码\">\n          <el-input \n            v-model.trim=\"searchContent.barcode\" \n            size=\"small\" \n            class=\"search-input\" \n            placeholder=\"请输入条码\"\n            clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"货号\">\n          <el-input \n            v-model.trim=\"searchContent.vendorGoodsNo\" \n            size=\"small\" \n            class=\"search-input\" \n            placeholder=\"请输入货号\"\n            clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"getGoodsList\" size=\"mini\">搜索</el-button>\n        </el-form-item>\n      </el-form>\n      <bl-table\n        :loading=\"loading\"\n        :border=\"false\"\n        :dataSource=\"tableData\"\n        :columns=\"columns\" />\n      <hr class=\"s-slip-tb\">\n      <el-button type=\"primary\" size=\"small\" @click=\"doEditHandel\" :disabled=\"isDisabled\" :loading=\"isDisabled\">提交</el-button>\n      <el-button size=\"small\" @click=\"doCancelHandel\">关闭</el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport optionsMixin from '@/module/mixin/options'\nimport detailMixin from './mixin/detail'\nimport constUtil from '@/utils/constant'\nimport requestUrl from '@/module/api/reconciliation'\nexport default {\n  mixins: [optionsMixin, detailMixin],\n  data() {\n    return {\n      isDisabled: false\n    }\n  },\n  methods: {\n    doEditHandel() {\n      let paperNo = this.paperNo\n      let storeNo = this.storeNo\n      let goodsReqListTemp = this.tableData.filter(item => {\n        return item.disputePrice || item.disputePrice === '0' || item.disputeQty || item.disputeQty === '0' || item.remarks\n      })\n      if(goodsReqListTemp.length === 0) {\n        this.$tip.message(\"请填写争议内容!\", \"warning\")\n        return\n      }else {\n        for(let item of goodsReqListTemp) {\n          if(item.disputePrice && !constUtil.salePriceReg.test(item.disputePrice)) {\n            this.$tip.message(\"争议单价只允许为大于等于0的数字 (保留两位小数)!\", \"warning\")\n            return\n          }\n          if(item.disputeQty && !constUtil.salePriceReg.test(item.disputeQty)) {\n            this.$tip.message(\"争议单价只允许为大于等于0的数字 (保留两位小数)!\", \"warning\")\n            return\n          }\n          if(item.remarks && item.remarks.length > 50) {\n            this.$tip.message(\"备注：最多允许填写50个字!\", \"warning\")\n            return\n          }\n        }\n      }\n      let params = {\n        paperNo: paperNo,\n        storeNo: storeNo,\n        goodsReqList: goodsReqListTemp.map(item => {\n          return {\n            goodsNo: item.goodsNo,\n            disputePrice: item.disputePrice,\n            disputeQty: item.disputeQty,\n            remarks: item.remarks\n          }\n        })\n      }\n      this.isDisabled = true\n      this.$http.post(requestUrl.updateDispute, {...params}).then(res => {\n        this.isDisabled = false\n        if(res.code === 0) {\n          this.$tip.message(\"发起争议成功!\", \"success\")\n          // 设置列表页重新获取数据状态\n          this.editSuccessHandel('/reconciliation')\n          this.closePage(`/reconciliation/detail/detail/${this.storeNo}/${this.paperNo}/110`)\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.isDisabled = false\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    },\n    doCancelHandel() {\n      this.closePage('/reconciliation')\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/Reconciliation/Reconciliation/Edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-wrapper\"},[_c('div',{staticClass:\"handel-wraper\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"align\":\"bottom\",\"gutter\":20}},[_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"收退货单号：\"+_vm._s(_vm.orderDetail.paperNo))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"门店/仓库：\"+_vm._s(_vm.orderDetail.storeName))])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mt6\",attrs:{\"type\":\"flex\",\"align\":\"bottom\",\"gutter\":20}},[_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"收货金额：\"+_vm._s(_vm.orderDetail.totalAmount))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"对帐金额：\"+_vm._s(_vm.orderDetail.reconciliationAmount))])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mt6\",attrs:{\"type\":\"flex\",\"align\":\"bottom\",\"gutter\":20}},[_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"供应商对帐人：\"+_vm._s(_vm.orderDetail.vReconciliationUserName))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"供应商对帐时间：\"+_vm._s(_vm.orderDetail.vReconciliationTime))])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mt6\",attrs:{\"type\":\"flex\",\"align\":\"bottom\",\"gutter\":20}},[_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"本来鲜对帐人：\"+_vm._s(_vm.orderDetail.reconciliationUserName))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_vm._v(\"本来鲜对帐时间：\"+_vm._s(_vm.orderDetail.reconciliationDate))])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mt6\",attrs:{\"type\":\"flex\",\"align\":\"bottom\",\"gutter\":20}},[(_vm.isDispute==='110')?_c('el-col',{attrs:{\"span\":24}},[_vm._v(\"\\n        争议内容：\"),_c('span',{staticStyle:{\"color\":\"'red'\"}},[_vm._v(_vm._s(_vm.orderDetail.disputeText))])]):_vm._e()],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"search-form-wraper\"},[_c('el-form',{attrs:{\"model\":_vm.searchContent,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"商品编码\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入商品编码\",\"clearable\":\"\"},model:{value:(_vm.searchContent.goodsNo),callback:function ($$v) {_vm.$set(_vm.searchContent, \"goodsNo\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.goodsNo\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"条码\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入条码\",\"clearable\":\"\"},model:{value:(_vm.searchContent.barcode),callback:function ($$v) {_vm.$set(_vm.searchContent, \"barcode\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.barcode\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"货号\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入货号\",\"clearable\":\"\"},model:{value:(_vm.searchContent.vendorGoodsNo),callback:function ($$v) {_vm.$set(_vm.searchContent, \"vendorGoodsNo\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.vendorGoodsNo\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.getGoodsList}},[_vm._v(\"搜索\")])],1)],1),_vm._v(\" \"),_c('bl-table',{attrs:{\"loading\":_vm.loading,\"border\":false,\"dataSource\":_vm.tableData,\"columns\":_vm.columns}}),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"loading\":_vm.isDisabled},on:{\"click\":_vm.doEditHandel}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"关闭\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3050651c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/Reconciliation/Reconciliation/Edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3050651c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!style-resources-loader?{\\\"patterns\\\":\\\"/Users/zhanyizhu/Desktop/projects/blx-code/supplier_web/src/assets/style/base.less\\\"}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3050651c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3050651c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/Reconciliation/Reconciliation/Edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}