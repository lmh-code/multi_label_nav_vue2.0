webpackJsonp([103],{"7Wbd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("BO1k"),i=a.n(s),r=a("oAV5"),o="/plateform/a/activityRule/edit",l={data:function(){return{addParamMesg:{regionName:"",regionCode:"",id:"",activityId:"",activityType:"",activityTypeName:"",shopType:"",shopTypeName:"",isMember:1,activityName:"",activityStartDate:"",activityEndDate:"",activityCode:"",activityStoreList:[],platCityGoodsInfos:[]},activityStoresCheckedList:[],activityGoodsCheckedList:[],offlineStoresCheckedList:[],offlineGoodsCheckedList:[]}},created:function(){var e=this.$route.params.activityId;this.addParamMesg.activityId=e},mounted:function(){this.getDetail()},methods:{getDetail:function(){var e=this,t=this.addParamMesg.activityId||"";r.r(),this.$http.post(o,{activityId:t,DIFFCITY:!0}).then(function(t){if(r.c(),0!==t.code)throw new Error(t.msg);if(t.data){var a=t.data;if(e.addParamMesg.id=a.id,e.addParamMesg.activityId=a.id,e.addParamMesg.regionName=a.regionName||"",e.addParamMesg.regionCode=a.regionCode||"",e.addParamMesg.activityType=a.activityType||"",e.addParamMesg.activityTypeName=a.activityTypeName||"",e.addParamMesg.activityName=a.activityName||"",e.addParamMesg.activityStartDate=a.activityStartDate||"",e.addParamMesg.activityEndDate=a.activityEndDate||"",e.addParamMesg.activityCode=a.activityCode||"",e.addParamMesg.isMember=a.isMember?parseInt(a.isMember):0,"1"===a.isMember?e.addParamMesg.isMemberName="会员":"2"===a.isMember?e.addParamMesg.isMemberName="非会员":"0"===a.isMember&&(e.addParamMesg.isMemberName="全部"),e.addParamMesg.shopType=a.shopType||"",e.addParamMesg.shopTypeName=a.shopTypeName||"",a.storeVos&&a.storeVos.length)if(1===a.shopType)e.activityStoresCheckedList=a.storeVos;else if(2===a.shopType){var s=!0,o=!1,l=void 0;try{for(var d,n=i()(a.storeVos);!(s=(d=n.next()).done);s=!0){var m=d.value;m.storeNo=m.erpStoreNo,m.storeName=m.erpStoreName,m.managementTypeCode=m.saleType,m.managementTypeValue=m.saleTypeName}}catch(e){o=!0,l=e}finally{try{!s&&n.return&&n.return()}finally{if(o)throw l}}e.offlineStoresCheckedList=a.storeVos}if(a.platCityGoodsVos&&a.platCityGoodsVos.length)if(1===a.shopType)e.activityGoodsCheckedList=a.platCityGoodsVos;else if(2===a.shopType){var c=!0,p=!1,v=void 0;try{for(var y,_=i()(a.platCityGoodsVos);!(c=(y=_.next()).done);c=!0){var f=y.value;f.name=f.activityGoodsName,f.categoryNoName=f.categoryName}}catch(e){p=!0,v=e}finally{try{!c&&_.return&&_.return()}finally{if(p)throw v}}e.offlineGoodsCheckedList=a.platCityGoodsVos}}}).catch(function(t){r.c(),e.$notify.error({title:"提示",message:t.message})})}},beforeRouteLeave:function(e,t,a){e.meta.keepAlive=!0,a()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"add-form-wraper"},[a("el-form",{ref:"form",attrs:{model:e.addParamMesg,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动类型"}},[a("p",{staticStyle:{color:"#222","font-size":"16px","font-weight":"bold"}},[e._v(e._s(e.addParamMesg.activityTypeName))])]),e._v(" "),a("el-form-item",{attrs:{label:"选择区域",required:""}},[e._v("\n        "+e._s(e.addParamMesg.regionName)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"活动编号"}},[e._v("\n        "+e._s(e.addParamMesg.activityCode)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"活动名称"}},[e._v("\n        "+e._s(e.addParamMesg.activityName)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[e._v("\n        "+e._s(e.addParamMesg.activityStartDate)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[e._v("\n        "+e._s(e.addParamMesg.activityEndDate)+"\n      ")]),e._v(" "),2==e.addParamMesg.shopType?a("el-form-item",{attrs:{label:"参加活动人"}},[e._v(" \n        "+e._s(e.addParamMesg.isMemberName)+"\n      ")]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"参与门店"}},[1==e.addParamMesg.shopType&&e.activityStoresCheckedList.length>0?a("div",{staticClass:"store-check-wraper"},[a("el-table",{staticClass:"fixed-height",attrs:{data:e.activityStoresCheckedList,"max-height":"300",size:"small"}},[a("el-table-column",{attrs:{"min-width":"226px",label:"门店编码/名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                  "+e._s(t.row.erpStoreNo)+"_"+e._s(t.row.erpStoreName)+"\n                ")])]}}],null,!1,3945522565)}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"saleTypeName",label:"门店类型"}})],1)],1):e._e(),e._v(" "),2==e.addParamMesg.shopType&&e.offlineStoresCheckedList.length>0?a("div",{staticClass:"store-check-wraper"},[a("el-table",{staticClass:"fixed-height",attrs:{data:e.activityStoresCheckedList,"max-height":"300",size:"small"}},[a("el-table-column",{attrs:{"min-width":"226px",label:"门店编码/名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                  "+e._s(t.row.erpStoreNo)+"_"+e._s(t.row.erpStoreName)+"\n                ")])]}}],null,!1,3945522565)}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"saleTypeName",label:"门店类型"}})],1)],1):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"参与商品"}},[(1==e.addParamMesg.shopType?e.activityGoodsCheckedList.length>0:e.offlineGoodsCheckedList.length>0)?a("div",[a("el-table",{staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:1==e.addParamMesg.shopType?e.activityGoodsCheckedList:e.offlineGoodsCheckedList,"empty-text":"暂无选中任何商品","max-height":"400",size:"small"}},[1==e.addParamMesg.shopType?a("el-table-column",{attrs:{"min-width":"220px",label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"ll-p-m-w"},[a("div",{staticClass:"ll-img-w"},[t.row.imgUrl&&""!=t.row.imgUrl?a("img",{attrs:{src:t.row.imgUrl,alt:"",onerror:"onerror=null;src='/shop/static/img_error.png'"}}):a("img",{attrs:{src:"/shop/static/img_error.png",alt:""}})]),e._v(" "),a("div",{staticClass:"ll-p-m-c-r"},[a("div",[e._v("\n                      "+e._s(t.row.goodsName||"-")+"\n                    ")]),e._v(" "),a("div",{staticClass:"ll-erp-p-no"},[e._v("SKU编码："+e._s(t.row.goodsNo||"--"))])])])]}}],null,!1,2385194324)}):e._e(),e._v(" "),2==e.addParamMesg.shopType?a("el-table-column",{attrs:{"min-width":"170px",label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"ll-p-m-w"},[a("div",{staticClass:"ll-p-m-c-r"},[a("div",[e._v("\n                      "+e._s(t.row.name||"-")+"\n                    ")]),e._v(" "),a("div",{staticClass:"ll-erp-p-no"},[e._v("ERP编码："+e._s(t.row.goodsNo||"--"))])])])]}}],null,!1,3777865820)}):e._e(),e._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"spec",label:"规格"}}),e._v(" "),1==e.addParamMesg.shopType?a("el-table-column",{attrs:{"min-width":"90px",prop:"storeMinPrice",label:"门店最低价"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{"min-width":"150px",label:"限购次数(为空不限)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                  "+e._s(t.row.limitGoodsCount)+"\n                ")])]}}],null,!1,853504407)}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110px",label:"活动库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                  "+e._s(t.row.curStock)+"\n                ")])]}}],null,!1,3007330485)}),e._v(" "),a("el-table-column",{attrs:{label:"活动规则","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"set-dis-msg-list-wrap"},e._l(t.row.activityDiscounts,function(t,s){return a("div",{key:s,staticClass:"set-dis-msg-item"},[a("span",[e._v(e._s(t.qty))]),e._v(" "),a("span",{staticStyle:{padding:"0 5px",color:"#222"}},[e._v("份")]),e._v(" "),a("span",[e._v(e._s(t.amount))]),e._v(" "),a("span",{staticStyle:{padding:"0 5px",color:"#222"}},[e._v("元")])])}),0)]}}],null,!1,2580559041)})],1),e._v(" "),1==e.addParamMesg.shopType?a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("注意：权重排序，先创建的活动商品在前；剩余的按前端规则走。\n          ")]):e._e(),e._v(" "),2==e.addParamMesg.shopType?a("div",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("注意：如遇特殊情况（pos机断网等），可能导致限购次数和活动库存不准。\n          ")]):e._e()],1):e._e()])],1)],1)])},staticRenderFns:[]};var n=a("VU/8")(l,d,!1,function(e){a("B+YM")},null,null);t.default=n.exports},"B+YM":function(e,t){}});
//# sourceMappingURL=103.7f5eb1927c015eebfb23.js.map