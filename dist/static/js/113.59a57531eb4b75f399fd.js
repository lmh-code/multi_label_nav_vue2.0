webpackJsonp([113],{CP6u:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),o=a.n(n),r=a("Dd8w"),i=a.n(r),s=a("oAV5"),l=a("NXPJ"),c=a("utSn"),u=a("ssT3"),h=a("pvT1"),p="/plateform/a/store/platform/show",d="/plateform/a/store/platform/newStore",f="/plateform/a/store/platform/updateStatus",v="/plateform/a/store/editCheck",m={data:function(){return{loading:!1,pageNum:1,pageSize:10,total:0,searchContent:{storeGroupTypeNo:"",storeGroupNo:"",storeNo:"",openStatus:"",openOnline:"",saleType:"",platform:5},openStatusOptList:[{label:"全部",value:""},{label:"营业中",value:1},{label:"歇业中",value:2},{label:"待开业",value:0}],saleTypeOptList:[{label:"全部",value:""},{label:"直营",value:1},{label:"加盟",value:2},{label:"分销",value:3},{label:"自提",value:4}],openOnlineOptList:[{label:"全部",value:""},{label:"禁用",value:0},{label:"启用",value:1}],unOpenedPlatformOptList:[{name:"全部",platformId:""}],tableData:[],ids:[],dialogVisible:!1,isDisabled:!1,pickType:null}},beforeMount:function(){var e=u.a.get("searchContentBlxMgt");this.$route.meta.keepAlive&&e&&(this.searchContent=e.searchContent)},mounted:function(){this.doSearchHandel(!0)},components:{"open-on-jtp":c.a,"my-table":l.a,"store-group":h.a},methods:{StoreGroupChange:function(e){this.searchContent.storeNo=e.storeNo,this.searchContent.storeGroupTypeNo=e.storeGroupTypeNoList[0],this.searchContent.storeGroupNo=e.storeGroupTypeNoList[1],this.doSearchHandel(!0)},doSearchHandel:function(e){var t=this;!0===e&&(this.pageNum=1),this.loading=!0,this.$http.post(p,i()({},this.searchContent,{pageSize:this.pageSize,pageNum:this.pageNum})).then(function(e){if(t.loading=!1,0!==e.code)throw new Error(e.msg);if(e.data){if(e.data.list&&e.data.list.length){var a=!0,n=!1,r=void 0;try{for(var i,s=o()(e.data.list);!(a=(i=s.next()).done);a=!0){var l=i.value;l.uniqueId=l.storeId+l.storeNo}}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}t.tableData=e.data.list;var c={platformCode:t.searchContent.platform,tableData:t.tableData};t.$refs.myTable&&t.$refs.myTable.setDefaultMesg(c)}else{t.tableData=[];var u={platformCode:t.searchContent.platform,tableData:t.tableData};t.$refs.myTable&&t.$refs.myTable.setDefaultMesg(u)}1===t.pageNum&&(t.total=e.data.total)}else{t.tableData=[];var h={platformCode:t.searchContent.platform,tableData:t.tableData};t.$refs.myTable&&t.$refs.myTable.setDefaultMesg(h)}}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})},changeSize:function(e){this.pageSize=e,this.doSearchHandel()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandel()},openOnlineJob:function(e){var t={searchContent:this.searchContent};u.a.set("searchContentBlxMgt",t);var a=e.platformId,n=e.storeNo,o=e.storeId;this.$router.push("/blx_store/o_ol_job/"+a+"/"+n+"/"+o)},openOnlineJobThirdP:function(e){e&&this.$refs.OpenOnlineJobThirdP.setDefaule(e)},sureCategorical:function(e){var t=this;if(e.storeNo){var a=e.storeNo;this.$http.get(d,{storeNo:a}).then(function(e){if(t.loading=!1,0!==e.code)throw new Error(e.msg);t.doSearchHandel()}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})}},batchOpenHandel:function(e){var t=this,a=e.checkedList,n=[],r=!0,i=!1,l=void 0;try{for(var c,u=o()(a);!(r=(c=u.next()).done);r=!0){var h=c.value;if(0===h.openStatus)return void this.$notify.warning({title:"温馨提示",message:"勾选的门店有待开业的，不能直接批量操作营业/歇业"});n.push(h.platformStoreId)}}catch(e){i=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw l}}s.r(),this.$http.post(f,{ids:n,openStatus:1}).then(function(e){if(s.c(),0===e.code)return t.$message.success("批量营业成功"),void t.doSearchHandel();throw new Error(e.msg)}).catch(function(e){s.c(),t.$notify.error({title:"提示",message:e.message})})},batchCloseHandel:function(e){var t=this,a=e.checkedList,n=[],r=!0,i=!1,l=void 0;try{for(var c,u=o()(a);!(r=(c=u.next()).done);r=!0){var h=c.value;if(0===h.openStatus)return void this.$notify.warning({title:"温馨提示",message:"勾选的门店有待开业的，不能直接批量操作营业/歇业"});n.push(h.platformStoreId)}}catch(e){i=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw l}}s.r(),this.$http.post(f,{ids:n,openStatus:2}).then(function(e){if(s.c(),0===e.code)return t.$message.success("批量歇业成功"),void t.doSearchHandel();throw new Error(e.msg)}).catch(function(e){s.c(),t.$notify.error({title:"提示",message:e.message})})},batchEableHandel:function(e){var t=this,a=e.checkedList,n=[],r=[],i=!0,l=!1,c=void 0;try{for(var u,h=o()(a);!(i=(u=h.next()).done);i=!0){var p=u.value;if(0!=p.shopId&&!p.shopId&&5!==p.platformId)return void this.$notify.warning({title:"温馨提示",message:"勾选的门店存在三方门店ID为空的门店，不能直接操作启用/禁用"});if(!p.phone)return void this.$notify.warning({title:"温馨提示",message:"【"+p.storeNo+"_"+p.storeName+"】的门店电话不能为空"});r.push(p.storeId),n.push(p.platformStoreId)}}catch(e){l=!0,c=e}finally{try{!i&&h.return&&h.return()}finally{if(l)throw c}}var d=e.pickupStartTime||"",v=e.pickupEndTime||"";s.r(),this.$http.post(f,{ids:n,storeIds:r,openOnline:1,pickupStartTime:d,pickupEndTime:v}).then(function(e){if(s.c(),0===e.code)return t.$message.success("批量启用成功"),void t.doSearchHandel();throw new Error(e.msg)}).catch(function(e){s.c(),t.$notify.error({title:"提示",message:e.message})})},batchDisableHandel:function(e){var t=this,a=e.checkedList,n=[],r=[],i=!0,l=!1,c=void 0;try{for(var u,h=o()(a);!(i=(u=h.next()).done);i=!0){var p=u.value;if(0!=p.shopId&&!p.shopId&&5!==p.platformId)return void this.$notify.warning({title:"温馨提示",message:"勾选的门店存在三方门店ID为空的门店，不能直接操作启用/禁用"});r.push(p.storeId),n.push(p.platformStoreId)}}catch(e){l=!0,c=e}finally{try{!i&&h.return&&h.return()}finally{if(l)throw c}}s.r(),this.$http.post(f,{ids:n,storeIds:r,openOnline:0}).then(function(e){if(s.c(),0===e.code)return t.$message.success("批量禁用成功"),void t.doSearchHandel();throw new Error(e.msg)}).catch(function(e){s.c(),t.$notify.error({title:"提示",message:e.message})})},batchEditCheck:function(e){var t=e.checkedList,a=[],n=!0,r=!1,i=void 0;try{for(var s,l=o()(t);!(n=(s=l.next()).done);n=!0){var c=s.value;a.push(c.platformStoreId)}}catch(e){r=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw i}}1===t.length?this.pickType=t[0].pickType:this.pickType=null,this.ids=a,this.dialogVisible=!0},batchEditCheckHandel:function(){var e=this;this.disabled=!0,this.$http.post(v,{ids:this.ids,pickType:this.pickType}).then(function(t){if(setTimeout(function(){e.disabled=!1},800),0===t.code)return e.$message.success("批量切换捡货方式成功"),e.dialogVisible=!1,void e.doSearchHandel();throw new Error(t.msg)}).catch(function(t){setTimeout(function(){e.disabled=!1},800),e.$notify.error({title:"提示",message:t.message})})}},beforeRouteLeave:function(e,t,a){t.meta.keepAlive=!1,a()}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("store-group",{on:{StoreGroupChange:e.StoreGroupChange}}),e._v(" "),a("el-form-item",{attrs:{label:"门店类型"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择门店类型",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.saleType,callback:function(t){e.$set(e.searchContent,"saleType",t)},expression:"searchContent.saleType"}},e._l(e.saleTypeOptList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"营业状态"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择营业状态",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.openStatus,callback:function(t){e.$set(e.searchContent,"openStatus",t)},expression:"searchContent.openStatus"}},e._l(e.openStatusOptList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"启用状态"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择启用状态",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.openOnline,callback:function(t){e.$set(e.searchContent,"openOnline",t)},expression:"searchContent.openOnline"}},e._l(e.openOnlineOptList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandel(!0)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-wraper tab-wraper"},[a("my-table",{ref:"myTable",on:{openOnlineJobThirdP:e.openOnlineJobThirdP,sureCategorical:e.sureCategorical,openOnlineJob:e.openOnlineJob,batchOpenHandel:e.batchOpenHandel,batchCloseHandel:e.batchCloseHandel,batchEableHandel:e.batchEableHandel,batchDisableHandel:e.batchDisableHandel,batchEditCheck:e.batchEditCheck}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-sizes":[10,50,100,150,200],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}})],1),e._v(" "),a("div",[a("open-on-jtp",{ref:"OpenOnlineJobThirdP",on:{doSearchHandel:e.doSearchHandel}})],1),e._v(" "),a("el-dialog",{attrs:{title:"批量切换捡货方式",visible:e.dialogVisible,width:"460px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-radio-group",{model:{value:e.pickType,callback:function(t){e.pickType=t},expression:"pickType"}},[a("el-radio",{attrs:{label:2}},[e._v("扫码完成捡货")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("一键完成捡货")])],1),e._v(" "),a("div",{staticClass:"mt20"},[a("p",[e._v("\n        注意：1、扫码完成捡货，按实际重量减扣库存，实现差额退款；\n      ")]),e._v(" "),a("p",{staticStyle:{"text-indent":"3em"}},[e._v("\n        2、当门店称重打码设备正常，应设置为扫码完成捡货方式；\n      ")])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isDisabled},on:{click:e.batchEditCheckHandel}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(m,b,!1,function(e){a("L1mY")},null,null);t.default=g.exports},L1mY:function(e,t){}});
//# sourceMappingURL=113.59a57531eb4b75f399fd.js.map