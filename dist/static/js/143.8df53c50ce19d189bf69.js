webpackJsonp([143],{nJus:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Gu7T"),i=a.n(n),s=a("Dd8w"),r=a.n(s),o=a("oAV5"),p="/plateform/a/order/storePreSaleMap",l=void 0,c=void 0,d={data:function(){return{loading:!1,defaultRange:[""+o.u(Date.parse(new Date)),""+o.u(Date.parse(new Date))],orderStartTime:o.u(Date.parse(new Date)),orderEndTime:o.u(Date.parse(new Date)),pickUpTime:o.u(Date.parse(new Date)),businessType:1,openStatusRadioOpt:[{label:1,labelName:"按下单日期"},{label:2,labelName:"按提货日期"}]}},mounted:function(){this.initMap()},components:{"date-picker-range":a("XfvZ").a},methods:{initMap:function(){l=new AMap.Map("mapContainerForSaleOrder",{resizeEnable:!0,center:[116.397428,36.90923],zoom:12}),c=new AMap.InfoWindow({offset:new AMap.Pixel(0,-30)}),this.doSearchHandel(!0)},doSearchHandel:function(){var e=this,t=this,a={businessType:this.businessType};1===this.businessType?(a.orderStartTime=this.orderStartTime+" 00:00:00",a.orderEndTime=this.orderEndTime+" 23:59:59"):2===this.businessType&&(a.pickUpTime=this.pickUpTime),l.clearMap(),this.loading=!0,this.$http.post(p,r()({},a)).then(function(a){if(e.loading=!1,0!==a.code)throw new Error(a.msg);a.data&&a.data.length&&(a.data.forEach(function(e){var a="";a=e.goodsCount>=100?"/shop/static/map/91-100.png":e.goodsCount>=50?"/shop/static/map/61-90.png":e.goodsCount>=25?"/shop/static/map/31-60.png":e.goodsCount>=10?"/shop/static/map/1-30.png":"/shop/static/map/0.png";var n=new AMap.Marker({map:l,icon:a,position:[e.lng,e.lat],offset:new AMap.Pixel(-13,-30)});n.content="<p>"+e.storeNo+"-"+e.storeName+"</p><p>商品销量汇总："+e.goodsCount+"份</p><p>订单数量:"+e.orderCount+"笔</p>",n.on("click",t.markClick),n.emit("click",{target:n})}),l.setFitView())}).catch(function(t){l.clearMap(),e.loading=!1,e.$notify.error({title:"提示",message:t.message})})},markClick:function(e){c.setContent(e.target.content),c.open(l,e.target.getPosition())},datePickerRangeChange:function(e){this.defaultRange=e?[].concat(i()(e)):e,this.orderStartTime=e?e[0]:"",this.orderEndTime=e?e[1]:"",this.doSearchHandel(!0)}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",[a("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.businessType,callback:function(t){e.businessType=t},expression:"businessType"}},e._l(e.openStatusRadioOpt,function(t,n){return a("el-radio-button",{key:n,attrs:{label:t.label}},[e._v(e._s(t.labelName))])}),1)],1),e._v(" "),1===e.businessType?a("el-form-item",{attrs:{label:"下单时间"}},[a("date-picker-range",{attrs:{defaultRange:e.defaultRange,format:"yyyy-MM-dd",type:"daterange"},on:{datePickerRangeChange:e.datePickerRangeChange}})],1):e._e(),e._v(" "),2===e.businessType?a("el-form-item",{attrs:{label:"提货日期"}},[a("el-date-picker",{staticClass:"search-input",attrs:{type:"date",placeholder:"提货日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.pickUpTime,callback:function(t){e.pickUpTime=t},expression:"pickUpTime"}})],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandel(!0)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"row-col-wrap"},[e._v("\n        门店销量汇总：\n        "),a("img",{attrs:{src:"/shop/static/map/91-100.png",alt:""}}),e._v(" 100以上    \n        "),a("img",{attrs:{src:"/shop/static/map/61-90.png",alt:""}}),e._v(" 50 - 100    \n        "),a("img",{attrs:{src:"/shop/static/map/31-60.png",alt:""}}),e._v(" 25 - 49    \n        "),a("img",{attrs:{src:"/shop/static/map/1-30.png",alt:""}}),e._v(" 10 - 24    \n        "),a("img",{attrs:{src:"/shop/static/map/0.png",alt:""}}),e._v(" 10以下\n      ")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-wraper"},[a("div",{attrs:{id:"mapContainerForSaleOrder",tabindex:"0"}})])])},staticRenderFns:[]};var m=a("VU/8")(d,u,!1,function(e){a("s8uW")},null,null);t.default=m.exports},s8uW:function(e,t){}});
//# sourceMappingURL=143.8df53c50ce19d189bf69.js.map