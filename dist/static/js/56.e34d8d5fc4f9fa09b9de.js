webpackJsonp([56],{MM3q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Gu7T"),n=a.n(o),r=a("BO1k"),s=a.n(r),i=a("Dd8w"),l=a.n(i),c=a("ssT3"),d=(a("oAV5"),a("VZ4h")),h=a("XfvZ"),m=a("ylbZ"),u=a("3GJe"),g=a("bzuE"),p="/plateform/a/mall/recommend/delRecommend",f="/plateform/a/mall/recommend/recommendList",C="/plateform/a/mall/recommend/saveRecommend",v={data:function(){return{loading:!1,pageNum:1,pageSize:10,pageSizes:g.a.pageSizes10,total:0,searchContent:{DIFFCITY:!0,regionCode:c.a.get("regionCode")||"",queryString:"",platformId:5,platformCityGoodsIds:[],defaultRange:[],startCreateTime:"",endCreateTime:""},tableData:[]}},mounted:function(){this.doSearchHandel(!0),this.goodsSelectInit()},components:{"choose-goods":d.a,"goods-select":u.a,"date-picker-range":h.a,region:m.a},methods:{RegionChange:function(e){this.searchContent.regionCode=e.regionCode},imortGoods:function(){if(this.$refs.chooseGoods){var e={title:"选择商品",regionCode:this.searchContent.regionCode};this.$refs.chooseGoods.setDefault(e)}},changeSize:function(e){this.pageSize=e,this.doSearchHandel()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandel()},doSearchHandel:function(e){var t=this;this.loading=!0,!0===e&&(this.pageNum=1),this.$http.post(f,l()({},this.searchContent,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(e){if(t.loading=!1,0!==e.code)throw new Error(e.msg);if(e.data&&e.data.result&&e.data.result.length){var a=!0,o=!1,n=void 0;try{for(var r,i=s()(e.data.result);!(a=(r=i.next()).done);a=!0){var l=r.value;l.showUpdate=!1,l.updateSortNum=l.sortNum}}catch(e){o=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(o)throw n}}t.tableData=e.data.result}else t.tableData=[];1==t.pageNum&&(t.total=e.data.total)}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})},deleteItem:function(e){var t=this,a=[],o=e.id;a.push(o);var n={isDeleted:1,recommendIds:a,DIFFCITY:this.searchContent.DIFFCITY};this.$confirm("您确定要移除所选商品吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(p,n).then(function(e){if(0===e.code)return t.$message.success("移除成功"),void t.doSearchHandel();throw new Error(e.msg)}).catch(function(e){t.$notify.error({title:"提示",message:e.message})})}).catch(function(){})},goodsSelectInit:function(){if(this.$refs.GoodsSelect){var e={queryString:this.searchContent.queryString,categoryIdList:this.searchContent.categoryIdList,saleType:this.searchContent.recommendType,platformId:this.searchContent.platformId,platformCityGoodsIds:this.searchContent.platformCityGoodsIds};this.$refs.GoodsSelect.setDefaultMesg(e)}},DoSelectGoodsHandel:function(e){var t=e.checkedList,a=e.queryString,o=[],n=!0,r=!1,i=void 0;try{for(var l,c=s()(t);!(n=(l=c.next()).done);n=!0){var d=l.value;o.push(d.platformCityGoodsId)}}catch(e){r=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}this.searchContent.platformCityGoodsIds=o,this.searchContent.queryString=a,this.doSearchHandel(!0)},datePickerRangeChange:function(e){this.searchContent.defaultRange=e?[].concat(n()(e)):e,this.searchContent.startCreateTime=e?e[0]:"",this.searchContent.endCreateTime=e?e[1]:"",this.doSearchHandel(!0)},confirmChooseGoods:function(e){var t=this,a=e.checkedList&&e.checkedList.length?e.checkedList.map(function(e){return e.platformCityGoodsId}):[];this.$http.post(C,{plateformCityGoodsIds:a,platformId:5,regionCode:this.searchContent.regionCode,DIFFCITY:this.searchContent.DIFFCITY}).then(function(e){if(0===e.code)return t.$message.success("导入成功"),void t.doSearchHandel(!0);throw new Error(e.msg)}).catch(function(e){t.$notify.error({title:"提示",message:e.message})})}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"handel-search-wraper"},[a("div",{staticClass:"handel-wraper"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.imortGoods}},[e._v("导入商品")])],1),e._v(" "),a("hr",{staticClass:"s-slip"}),e._v(" "),a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("region",{staticClass:"region-wrap",on:{RegionChange:e.RegionChange}}),e._v(" "),a("el-form-item",{attrs:{label:"SKU编码/商品名称"}},[a("goods-select",{ref:"GoodsSelect",on:{DoSelectGoodsHandel:e.DoSelectGoodsHandel}})],1),e._v(" "),a("el-form-item",{attrs:{label:"导入时间"}},[a("date-picker-range",{attrs:{defaultRange:e.searchContent.defaultRange,format:"yyyy-MM-dd",type:"daterange"},on:{datePickerRangeChange:e.datePickerRangeChange}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandel(!0)}}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"table-wraper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"没有查询到您想要的数据",size:"small"}},[a("el-table-column",{attrs:{"min-width":"236px",label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"p-m-w"},[a("div",{staticClass:"img-w"},[t.row.imgUrl&&""!=t.row.imgUrl?a("img",{attrs:{src:t.row.imgUrl,alt:"",onerror:"onerror=null;src='/shop/static/img_error.png'"}}):a("img",{attrs:{src:"/shop/static/img_error.png",alt:""}})]),e._v(" "),a("div",{staticClass:"p-m-c-r"},[a("div",[e._v(e._s(t.row.goodsName||"--"))]),e._v(" "),a("div",{staticClass:"erp-p-no"},[e._v("SKU编码："+e._s(t.row.goodsNo||"--"))]),e._v(" "),a("div",{staticClass:"erp-p-no"},[e._v("商品ID："+e._s(t.row.recommendGoodsId||"--"))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"spec",label:"规格"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"price",label:"售价"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"160px",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"160px",prop:"createUserId",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.deleteItem(t.row)}}},[e._v("移除")])],1)]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length>0"}],staticClass:"tc mt20",attrs:{background:"","current-page":e.pageNum,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}})],1),e._v(" "),a("choose-goods",{ref:"chooseGoods",on:{confirmChooseGoods:e.confirmChooseGoods}})],1)},staticRenderFns:[]};var w=a("VU/8")(v,y,!1,function(e){a("WDX1")},null,null);t.default=w.exports},WDX1:function(e,t){}});
//# sourceMappingURL=56.e34d8d5fc4f9fa09b9de.js.map