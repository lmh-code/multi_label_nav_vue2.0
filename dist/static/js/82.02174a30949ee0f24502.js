webpackJsonp([82],{MRe2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),r=a("ssT3"),s=a("bzuE"),o=a("3/Xe"),l="/plateform/p/client/mall/popup/ad/adList",c="/plateform/p/client/mall/popup/ad/updatePopupAdStatus",u={data:function(){return{loading:!1,pageNum:1,pageSize:10,pageSizes:s.a.pageSizes10,total:0,searchContent:{DIFFCITY:!0,regionCode:r.a.get("regionCode")||"",adIdOrAdName:"",adStatus:"",adType:""},adTypeOptions:o.a.adTypeOptions,adStatusOptions:o.a.adStatusOptions,tableData:[]}},components:{Region:a("ylbZ").a},created:function(){var t=r.a.get("searchContent");this.$route.meta.keepAlive&&t&&(this.pageNum=t.pageNum,this.searchContent=t.searchContent),r.a.remove("searchContent"),this.doSearchHandel()},methods:{RegionChange:function(t){this.searchContent.regionCode=t.regionCode,this.doSearchHandel()},addHandel:function(){this.$router.push("/ad/add")},changeSize:function(t){this.pageSize=t,this.doSearchHandel()},changeCurrent:function(t){this.pageNum=t,this.doSearchHandel()},doSearchHandel:function(t){var e=this;this.loading=!0,!0===t&&(this.pageNum=1),this.$http.post(l,i()({},this.searchContent,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(t){if(e.loading=!1,0===t.code)return e.tableData=t.data&&t.data.result&&t.data.result.length?t.data.result:[],void(e.total=t.data.total);throw new Error(t.msg)}).catch(function(t){e.loading=!1,e.$notify.error({title:"提示",message:t.message})})},adStatusFormatter:function(t,e,a,n){var i=this.adStatusOptions.filter(function(t){return t.value===a})[0];return i?i.label:"-"},updatePopupAdStatus:function(t,e){var a=this,n="";1===e?n="发布":5===e?n="终止":9===e&&(n="删除"),this.$confirm("您确定要执行"+n+"操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post(c,{adId:t.id,adStatus:e,DIFFCITY:!0}).then(function(t){if(0===t.code)return a.$message.success(n+"成功"),void a.doSearchHandel();throw new Error(t.msg)}).catch(function(t){a.$notify.error({title:"提示",message:t.message})})}).catch(function(){})},editItem:function(t,e){var a={searchContent:this.searchContent,pageNum:this.pageNum};r.a.set("searchContent",a),"show"===e?this.$router.push("/ad/show/"+t.id):this.$router.push("/ad/edit/"+t.id+"/"+e+"?status="+t.adStatus)}},beforeRouteLeave:function(t,e,a){e.meta.keepAlive=!1,a()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"handel-search-wraper"},[a("div",{staticClass:"handel-wraper"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.addHandel}},[t._v("添加弹窗广告")])],1),t._v(" "),a("hr",{staticClass:"s-slip"}),t._v(" "),a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:t.searchContent,"label-position":"top"}},[a("region",{staticClass:"region-wrap",attrs:{refresh:!1},on:{RegionChange:t.RegionChange}}),t._v(" "),a("el-form-item",{attrs:{label:"ID/弹窗广告名称"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"ID/弹窗广告名称"},model:{value:t.searchContent.adIdOrAdName,callback:function(e){t.$set(t.searchContent,"adIdOrAdName",e)},expression:"searchContent.adIdOrAdName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"跳转路径"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"跳转路径",clearable:"",size:"small"},on:{change:function(e){return t.doSearchHandel(!0)}},model:{value:t.searchContent.adType,callback:function(e){t.$set(t.searchContent,"adType",e)},expression:"searchContent.adType"}},t._l(t.adTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"状态",clearable:"",size:"small"},on:{change:function(e){return t.doSearchHandel(!0)}},model:{value:t.searchContent.adStatus,callback:function(e){t.$set(t.searchContent,"adStatus",e)},expression:"searchContent.adStatus"}},t._l(t.adStatusOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.doSearchHandel(!0)}}},[t._v("搜索")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"table-wraper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:t.tableData,"empty-text":"没有查询到您想要的数据",size:"small"}},[a("el-table-column",{attrs:{"min-width":"60px",prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"200px",label:"广告信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"p-m-w"},[a("div",{staticClass:"img-w-34 g-m-r"},[e.row.adImgUrl&&""!=e.row.adImgUrl?a("img",{attrs:{src:e.row.adImgUrl,alt:"",onerror:"onerror=null;src='/shop/static/img_error.png'"}}):a("img",{attrs:{src:"/shop/static/img_error.png",alt:""}})]),t._v(" "),a("div",{staticClass:"p-m-c-r"},[a("div",[t._v(t._s(e.row.adName||"--"))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"adTypeDesc",label:"跳转路径"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"140px",prop:"adLinkName",label:"跳转内容"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"adStoreNum",label:"应用门店数"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"210px",label:"有效期"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.startDateTime&&e.row.endDateTime?a("div",{staticClass:"date-wrap-inline"},[a("div",[a("p",[t._v(t._s(e.row.startDateTime.substr(0,10)))]),t._v(" "),a("p",[t._v(t._s(e.row.startDateTime.substr(11,8)))])]),t._v(" "),a("div",[t._v(" - ")]),t._v(" "),a("div",[a("p",[t._v(t._s(e.row.endDateTime.substr(0,10)))]),t._v(" "),a("p",[t._v(t._s(e.row.endDateTime.substr(11,8)))])])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"adStatus",label:"状态",formatter:t.adStatusFormatter}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[0!==e.row.adStatus&&2!==e.row.adStatus?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){return t.editItem(e.row,"show")}}},[t._v("查看")]):t._e(),t._v(" "),0===e.row.adStatus||2===e.row.adStatus?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.editItem(e.row,"edit")}}},[t._v("编辑")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-tickets"},on:{click:function(a){return t.editItem(e.row,"copy")}}},[t._v("复制")])],1),t._v(" "),a("div",[0===e.row.adStatus?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.updatePopupAdStatus(e.row,9)}}},[t._v("删除")]):t._e(),t._v(" "),2===e.row.adStatus||3===e.row.adStatus?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-warning"},on:{click:function(a){return t.updatePopupAdStatus(e.row,5)}}},[t._v("终止")]):t._e(),t._v(" "),0===e.row.adStatus?a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-upload2"},on:{click:function(a){return t.updatePopupAdStatus(e.row,1)}}},[t._v("发布")]):t._e()],1)]}}])})],1),t._v(" "),t.total>0?a("el-pagination",{staticClass:"tc mt20",attrs:{background:"","current-page":t.pageNum,"page-sizes":t.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.changeSize,"current-change":t.changeCurrent,"update:currentPage":function(e){t.pageNum=e},"update:current-page":function(e){t.pageNum=e}}}):t._e()],1)])},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(t){a("aR8l")},null,null);e.default=p.exports},aR8l:function(t,e){}});
//# sourceMappingURL=82.02174a30949ee0f24502.js.map