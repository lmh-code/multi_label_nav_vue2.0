{"version":3,"sources":["webpack:///src/components/MallConfig/BannerMgt/EditBanner.vue","webpack:///./src/components/MallConfig/BannerMgt/EditBanner.vue?6695","webpack:///./src/components/MallConfig/BannerMgt/EditBanner.vue","webpack:///src/components/MallConfig/BannerMgt/ChooseProduct.vue","webpack:///./src/components/MallConfig/BannerMgt/ChooseProduct.vue?cbb1","webpack:///./src/components/MallConfig/BannerMgt/ChooseProduct.vue"],"names":["bannerUrlList","bannerUrl","EditBanner","data","loading","saveLoading","isDisabled","imageUploadLoading","isShowProductList","statusBannerDialogVisible","product","transitionList","value","label","editBanner","id","productNo","presaleId","name","url","status","type","canStatus","created","mounted","bannerMeg","localStorage","get","this","getProduct","statusName","components","choose-product","ChooseProduct","methods","doSearchHandel","_this2","$http","post","then","res","code","Error","msg","list","length","result","forEach","item","i","catch","e","console","log","message","_this3","currentPage","total","$notify","error","title","chooseProduct","_this","setTimeout","$refs","ProductListDialog","setDefault","doSaveHandel","_param","_this4","$message","extends_default","$router","push","doCancelHandel","imageUploadReg","file","_this5","isPic","indexOf","isJPG","isSize","promise_default","a","resolve","reject","_URL","window","URL","webkitURL","img","Image","onload","width","height","src","createObjectURL","emitUpload","_this6","getToken","qiniu_min","fileName","token","subscribe","complete","urlImage","key","next","_this7","closeDialog","val","isShowGoods","BannerMgt_EditBanner","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","expression","ref","attrs","model","label-width","required","size","placeholder","callback","$$v","$set","_v","action","show-file-list","before-upload","http-request","_l","staticStyle","display","_s","productName","spec","on","click","disabled","visible","update:visible","$event","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","chooseProductUrl","pageSize","categoriesList","searchContent","categoryCode","tableData","categoriesSelectList","watch","curVal","oldVal","getCategoriesList","_val","timeFormatter","row","column","cellValue","preStartDate","preEndDate","preStartTime","preEndTime","map","categoryName","categoryId","categoryVoList","children","changeSize","changeCurrent","pageNum","queryCode","queryType","dataMesg","$emit","BannerMgt_ChooseProduct","clearable","nativeOn","keyup","_k","keyCode","trim","expand-trigger","options","change-on-select","empty-text","max-height","min-width","scopedSlots","_u","fn","scope","productImg","alt","onerror","goodsNo","prop","formatter","margin-bottom","background","current-page","page-sizes","layout","pager-count","size-change","current-change","update:currentPage","update:current-page"],"mappings":"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","file":"static/js/17.5256a420b8e8da758582.js","sourcesContent":["<style>\n  @import \"../../../../static/style/file_upload.css\";\n  .banner-uploader .el-form-item__content{\n    line-height: 0\n  }\n  .banner-uploader .avatar-uploader{\n    width: 322px;\n    height: 122px;\n  }\n  .banner-uploader .tip-txt-w{\n    margin-left: 0;\n  }\n  .banner-uploader .tip-txt-w span {\n    line-height: 40px;\n  }\n  .banner-uploader .avatar-uploader-icon{\n    width: 320px;\n    height: 120px;\n    line-height: 120px !important;\n  }\n  .banner-uploader .avatar{\n    width: 322px;\n    height: 122px;\n  }\n</style>\n\n<template>\n  <div>\n    <div class=\"add-form-wraper\">\n      <el-form ref=\"form\" :model=\"editBanner\" label-width=\"200px\" v-loading=\"loading\">\n        <el-form-item label=\"名称\" required>\n          <el-input v-model=\"editBanner.name\" size=\"small\" class=\"add-input\" placeholder=\"请输入Banner名称\"></el-input>\n          <span>请输入展示名称，长度不超过20个字</span>\n        </el-form-item>\n\n        <el-form-item label=\"Banner图片\" class=\"banner-uploader\" required>\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"\"\n            :show-file-list=\"false\"\n            :before-upload=\"imageUploadReg\"\n            :http-request=\"emitUpload\">\n            <div v-loading=\"imageUploadLoading\">\n              <img v-if=\"editBanner.url\" :src=\"editBanner.url\" class=\"avatar\">\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </div>\n          </el-upload>\n          <div class=\"tip-txt-w\">\n            <span>请上传750*280像素的JPG图片，大小不能超过2M</span>\n          </div>\n        </el-form-item>\n\n        <el-form-item label=\"跳转类型\" required>  \n          <el-select v-model=\"editBanner.type\" class=\"add-input\" size=\"small\" placeholder=\"请选择跳转类型\">\n            <el-option\n              v-for=\"item in transitionList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"选择商品\" v-show=\"editBanner.type == 0\" required>\n          <p v-show=\"product.productName\" style=\"display: inline-block;\">{{product.productName}}&nbsp;&nbsp;{{product.spec}}&nbsp;&nbsp;</p>\n          <el-button size=\"small\" @click=\"chooseProduct\">选择</el-button>\n        </el-form-item>\n\n        <el-form-item label=\"启用状态\" required>\n          <el-radio-group v-model=\"editBanner.status\" size=\"small\">\n            <el-radio-button label=\"启用\"></el-radio-button>\n            <el-radio-button label=\"禁用\"></el-radio-button>\n          </el-radio-group>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\">保存</el-button>\n          <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n\n    <!-- 选择商品dialog -->\n    <el-dialog title=\"选择商品\" :visible.sync=\"isShowProductList\" width=\"700px\">\n      <choose-product ref=\"ProductListDialog\" @closeDialog=\"closeDialog\"></choose-product>\n    </el-dialog>\n\n    <!-- 启用Bannerdialog -->\n    <el-dialog title=\"启用失败\" :visible.sync=\"statusBannerDialogVisible\" width=\"360px\">\n      <span>已经超过Banner的启用数量，限制6个</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"statusBannerDialogVisible = false\" size=\"mini\">确 认</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport Storage from '@/utils/localStorage'\nimport ChooseProduct from './ChooseProduct'\nimport * as utils from '@/utils/utils'\nimport * as qiniu from 'qiniu-js'\n\nconst bannerUrlList = {\n  getQiNiuToken: '/foundation/qiniu/auth/file'\n}\nconst bannerUrl = {\n  // 获取Banner列表\n  list: '/plateform/a/banner/list',\n  // 修改Banner\n  update: '/plateform/a/banner/update',\n  // 查询预售商品列表\n  getPreProduct: '/plateform/a/mall/groupProduct/getPreProduct'\n}\nexport default {\n  data() {\n    return {\n      loading: false,\n      saveLoading: false,\n      isDisabled: false,\n      imageUploadLoading: false, // 添加默认图片loading\n      isShowProductList: false, // 显示商品列表\n      statusBannerDialogVisible: false, // 启用\n      product: {}, // 选择的商品\n      transitionList: [ // 跳转类型\n        {\n          value: 0,\n          label: '商品详情'\n        },\n        {\n          value: 1,\n          label: '静态展示不跳转'\n        }\n      ],\n      editBanner: {\n        id: '', // bannerID\n        productNo: '', // 商品编号\n        presaleId: '', // 商品编号\n        name: '', // 名称\n        url: '', // URL\n        status: '', // 状态\n        type: '' // 跳转类型\n      },\n      canStatus: true\n    }\n  },\n  created() {\n  },\n  mounted() {\n    let bannerMeg = Storage.get('bannerMeg')\n    this.editBanner.type = bannerMeg.type\n    if(this.editBanner.type != 0) {\n      this.editBanner.productNo = ''\n    }else{\n      this.editBanner.productNo = bannerMeg.productNo\n      this.getProduct()\n    }\n    this.editBanner.name = bannerMeg.name\n    this.editBanner.url = bannerMeg.url\n    this.editBanner.status = bannerMeg.statusName\n    this.editBanner.id = bannerMeg.id\n  },\n  components: {\n    'choose-product': ChooseProduct\n  },\n  methods: {\n    /**\n     * [doSearchHandel 搜索启用数量]\n     * @return {[type]} [description]\n     */\n    doSearchHandel() {\n      this.$http.post(bannerUrl.list, {status: 0}).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          if(res.data && res.data.list && res.data.list.length) {\n            let result = res.data.list\n            this.canStatus = (result.length < 6)\n            result.forEach((item, i) => {\n              if(this.editBanner.id == item.id) {\n                this.canStatus = true\n              }\n            })\n          }else {\n            this.canStatus = true\n          }\n          return \n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        console.log(\"提示(获取启用banner):\", e.message)\n      })\n\n    },\n    /**\n     * [getProduct 获取商品]\n     * @return {[type]}      [description]\n     */\n    getProduct() {\n      this.$http.post(bannerUrl.getPreProduct, {productNo: this.editBanner.productNo}).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          if(res.data && res.data.result && res.data.result.length) {\n            this.product = res.data.result[0]\n          }else {\n            // 此商品可能失效或已删除\n            this.product = {}\n            this.editBanner.productNo = ''\n          }\n\n          if(this.currentPage == 1) {\n            this.total = res.data.total\n          }\n          return \n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        this.$notify.error({\n          title: '提示',\n          message: e.message\n        })\n      })\n    },\n\n    /**\n     * [chooseProduct 选择商品]\n     * @return {[type]}      [description]\n     */\n    chooseProduct() {\n      this.isShowProductList = true\n      let _this = this  \n      setTimeout(function() {\n        // 调用子组件的方法\n        _this.$refs.ProductListDialog.setDefault()\n      }, 200)\n    },\n    /**\n     * [doSaveHandel 触发保存事件]\n     * @return {[type]}        [description]\n     */\n    doSaveHandel(_param) {\n      if(this.editBanner.name == \"\") {\n        this.$message(\"请输入展示名称\")\n        return \n      }\n      if(this.editBanner.name.length > 20) {\n        this.$message(\"展示名称限制长度不超过20\")\n        return\n      }\n\n      if(this.editBanner.url == \"\") {\n        this.$message(\"请添加Banner图片\")\n        return \n      }\n\n      if(this.editBanner.type === '') {\n        this.$message(\"请选择跳转类型\")\n        return \n      }\n      if(this.editBanner.type == 0 && this.editBanner.productNo == \"\"){\n        //商品详情\n        this.$message(\"请选择商品\")\n        return\n      }\n\n      if(this.editBanner.status == \"\") {\n        this.$message(\"请选择启用状态\")\n        return \n      }\n\n      if(this.editBanner.status == \"启用\" && this.canStatus == false) {\n        this.statusBannerDialogVisible = true\n        return\n      }\n\n      if(this.editBanner.status == \"启用\") {\n        this.editBanner.status = 0\n      }else if(this.editBanner.status == \"禁用\") {\n        this.editBanner.status = 1\n      }\n      this.loading = true\n      this.isDisabled = true\n      this.$http.post(bannerUrl.update, {...this.editBanner}).then(res => {\n        this.loading = false   \n        this.isDisabled = false\n        if(res.code === 0) {\n          this.$message({\n            message: '编辑Banner成功',\n            type: 'success'\n          }) \n          this.$router.push('/banner_mgt?status=' + this.editBanner.status)\n          return \n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        this.isDisabled = false\n\n        if(this.editBanner.status == 0) {\n          this.editBanner.status = \"启用\"\n        }else if(this.editBanner.status == 1) {\n          this.editBanner.status = \"禁用\"\n        }\n        this.$notify.error({\n          title: '提示',\n          message: e.message\n        })\n      })\n\n    },\n    /**\n     * [doCancelHandel 取消发布跳转至商品管理页面]\n     * @return {[type]} [description]\n     */\n    doCancelHandel() {\n      this.$router.push('/banner_mgt')\n    },\n    /**\n     * [imageUploadReg 上传图片检测]\n     * @return {[type]}      [description]\n     */\n    imageUploadReg (file) {\n      const isPic = file.type.indexOf('image/') !== -1\n      const isJPG = file.type === 'image/jpeg'\n      if (!isPic) {\n        this.$message.error('Banner图片文件必须是图片格式!')\n      }\n      if (!isJPG) {\n        this.$message.error('Banner图片只能是JPG格式!')\n      }\n      /**\n       * [检测上传图片宽高]\n       * @param  {[type]}   resolve [description]\n       * @param  {Function} reject) {                     let width [description]\n       * @param  {[type]}   ()      [description]\n       * @return {[type]}           [description]\n       */\n      const isSize = new Promise(function(resolve, reject) {\n        let width = 750\n        let height = 280  \n\n        let _URL = window.URL || window.webkitURL\n        let img = new Image();\n        img.onload = function() {\n          let valid = img.width == width && img.height == height\n          valid ? resolve() : reject()\n        }\n        img.src = _URL.createObjectURL(file)\n      }).then(() => {\n        return file\n      }, () => {\n        this.$message.error('请上传750*280像素的JPG图片!')\n        return Promise.reject()\n      })\n\n      return isPic && isJPG && isSize\n    },\n    /**\n     * [emitUpload 上传图片]\n     * @return {[type]}   [description]\n     */\n    emitUpload (e) {\n      this.imageUploadLoading = true\n      this.getToken().then((res) => {\n        // 开始上传图片\n        let uploader = qiniu.upload(e.file, res.fileName, res.token)\n        uploader.subscribe({\n          error: () => {\n            this.imageUploadLoading = false\n          },\n          complete: (res) => {\n            let urlImage = 'http://retailimg01.benlailife.com/' + res.key\n            this.editBanner.url = urlImage\n            this.imageUploadLoading = false\n          },\n          next: res => {\n          }\n        })\n      })\n    },\n    /**\n     * [getToken 通过后台封装的接口获取七牛的token]\n     * @return {[type]}            [description]\n     */\n    getToken () {\n      return this.$http.post(bannerUrlList.getQiNiuToken, {}).then(res => {\n        if (res.code == 0) {\n          let token = res.data.token\n          let fileName = res.data.key\n          return {fileName, token}\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.imageUploadLoading = false\n        this.$notify.error({\n          title: '提示',\n          message: e.message\n        })\n      })\n    },\n    /**\n     * [closeDialog 关闭Dialog]\n     * @param {[type]} _param [platformId]\n     */\n    closeDialog(val) {\n      this.isShowProductList = val.isShowGoods;\n      if(val.chooseProduct) {\n        this.product = val.chooseProduct\n        this.editBanner.productNo = this.product.productNo\n        this.editBanner.presaleId = this.product.presaleId\n      }\n    }\n\n\n  }\n\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/MallConfig/BannerMgt/EditBanner.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"form\",attrs:{\"model\":_vm.editBanner,\"label-width\":\"200px\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入Banner名称\"},model:{value:(_vm.editBanner.name),callback:function ($$v) {_vm.$set(_vm.editBanner, \"name\", $$v)},expression:\"editBanner.name\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"请输入展示名称，长度不超过20个字\")])],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"banner-uploader\",attrs:{\"label\":\"Banner图片\",\"required\":\"\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"show-file-list\":false,\"before-upload\":_vm.imageUploadReg,\"http-request\":_vm.emitUpload}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.imageUploadLoading),expression:\"imageUploadLoading\"}]},[(_vm.editBanner.url)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.editBanner.url}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"tip-txt-w\"},[_c('span',[_vm._v(\"请上传750*280像素的JPG图片，大小不能超过2M\")])])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"跳转类型\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请选择跳转类型\"},model:{value:(_vm.editBanner.type),callback:function ($$v) {_vm.$set(_vm.editBanner, \"type\", $$v)},expression:\"editBanner.type\"}},_vm._l((_vm.transitionList),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editBanner.type == 0),expression:\"editBanner.type == 0\"}],attrs:{\"label\":\"选择商品\",\"required\":\"\"}},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.product.productName),expression:\"product.productName\"}],staticStyle:{\"display\":\"inline-block\"}},[_vm._v(_vm._s(_vm.product.productName)+\"  \"+_vm._s(_vm.product.spec)+\"  \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.chooseProduct}},[_vm._v(\"选择\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"启用状态\",\"required\":\"\"}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.editBanner.status),callback:function ($$v) {_vm.$set(_vm.editBanner, \"status\", $$v)},expression:\"editBanner.status\"}},[_c('el-radio-button',{attrs:{\"label\":\"启用\"}}),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"禁用\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"选择商品\",\"visible\":_vm.isShowProductList,\"width\":\"700px\"},on:{\"update:visible\":function($event){_vm.isShowProductList=$event}}},[_c('choose-product',{ref:\"ProductListDialog\",on:{\"closeDialog\":_vm.closeDialog}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"启用失败\",\"visible\":_vm.statusBannerDialogVisible,\"width\":\"360px\"},on:{\"update:visible\":function($event){_vm.statusBannerDialogVisible=$event}}},[_c('span',[_vm._v(\"已经超过Banner的启用数量，限制6个\")]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.statusBannerDialogVisible = false}}},[_vm._v(\"确 认\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-153c3642\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MallConfig/BannerMgt/EditBanner.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-153c3642\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditBanner.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditBanner.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditBanner.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-153c3642\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditBanner.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MallConfig/BannerMgt/EditBanner.vue\n// module id = null\n// module chunks = ","<style type=\"text/css\">\n.ll-p-m-w {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n}\n.ll-img-w {\n  width: 60px;\n  height: 60px;\n}\n.ll-img-w>img {\n  width: 60px;\n}\n.ll-p-m-c-r {\n  padding: 0 10px;\n}\n.ll-erp-p-no {\n  color: #666;\n  font-size: 12px;\n}\n</style>\n<template>\n  <div>\n    <!-- 操作框 -->  \n    <el-row>\n      <el-input class=\"search-input\" v-model.trim=\"searchContent.productNo\" placeholder=\"请输入商品ERP编码\" size=\"small\" @keyup.enter.native=\"doSearchHandel\" clearable></el-input>\n      <el-input class=\"search-input\" v-model.trim=\"searchContent.productName\" placeholder=\"请输入名称关键字\" size=\"small\" @keyup.enter.native=\"doSearchHandel\" clearable></el-input>\n      <el-cascader class=\"search-input\" expand-trigger=\"click\" :options=\"categoriesList\" placeholder=\"请选择分类\" change-on-select v-model=\"categoriesSelectList\" size=\"small\" clearable></el-cascader>\n      <el-button type=\"primary\" @click=\"doSearchHandel\" size=\"mini\">搜索</el-button>\n    </el-row>\n\n    <!-- 搜索结果 -->\n    <el-row>\n      <el-table\n        class=\"fixed-height\"\n        :data=\"tableData\"\n        v-loading=\"loading\"\n        empty-text=\"没有查询到您想要的数据\"\n        style=\"width:100%;\"\n        ref=\"tableRef\"\n        max-height=\"320\"\n        size=\"small\">\n        <el-table-column min-width=\"210\" label=\"商品信息\">\n          <template slot-scope=\"scope\">\n            <div class=\"ll-p-m-w\">\n              <div class=\"ll-img-w\">\n                <img v-if=\"scope.row.productImg && scope.row.productImg != ''\" :src=\"scope.row.productImg\" alt=\"\" onerror=\"onerror=null;src='/shop/static/img_error.png'\">\n                <img v-else src=\"/shop/static/img_error.png\" alt=\"\">\n              </div>\n              <div class=\"ll-p-m-c-r\">\n                <div>{{scope.row.productName}}</div>\n                <div class=\"ll-erp-p-no\">SKU编码：{{scope.row.goodsNo || '--'}}</div>\n              </div>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column min-width=\"65\" prop=\"presalePrice\" label=\"预售价\"></el-table-column>\n        <el-table-column width=\"185\" label=\"预售时间\" :formatter=\"timeFormatter\"></el-table-column>\n        <el-table-column min-width=\"80\" prop=\"productStatusStr\" label=\"有效状态\"></el-table-column>\n        <el-table-column min-width=\"75\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" size=\"mini\" @click=\"chooseProduct(scope.row)\">选择</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 分页条 -->\n      <el-pagination\n        v-show=\"tableData.length>0\"\n        class=\"tc mt20\"\n        background\n        style=\"margin-bottom: 10px;\"\n        @size-change=\"changeSize\"\n        @current-change=\"changeCurrent\"\n        :current-page.sync=\"currentPage\"\n        :page-sizes=\"[10, 50, 100, 150, 200]\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :pager-count=\"5\"\n        :total=\"total\">\n      </el-pagination>\n    </el-row>\n<!-- \n    <el-row style=\"margin:20px;\">\n      <el-button type=\"primary\" @click=\"close(true)\" size=\"mini\" style=\"float: right;margin-left: 20px;\">选择并导入</el-button>\n      <el-button @click=\"close(false)\" size=\"mini\" style=\"float: right;\">关闭</el-button>\n    </el-row> -->\n\n  </div>\n</template>\n\n<script>\nimport Storage from '@/utils/localStorage'\nimport * as utils from '@/utils/utils'\n \nconst chooseProductUrl = {\n  // 获取分类\n  getCategoryTree: '/plateform/a/category/getCategoryTree',\n  // 查询预售商品列表\n  getPreProduct: '/plateform/a/mall/groupProduct/getPreProduct'\n}\nexport default {\n  data() {\n    return {\n      loading: false,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      categoriesList: [], // 获取分类\n      searchContent: {\n        categoryCode: '', // 分类\n        productNo: '',\n        productName: ''\n      },\n      tableData: [],\n      categoriesSelectList: [] // 选择分类\n    }\n  },\n  watch: {\n    categoriesSelectList(curVal, oldVal) {\n      this.searchContent.categoryCode = curVal\n      this.doSearchHandel()\n    }\n  },\n  created() {\n    // 获取分类\n    this.getCategoriesList()\n  },\n  mounted() {\n  },\n  components: {},\n  methods: {\n    /**\n     * [setDefault 设置默认]\n     */\n    setDefault(_val) {\n      // 搜索\n      this.doSearchHandel()\n    },\n    /**\n     * [timeFormatter 时间格式化]\n     * @return {[type]} [description]\n     */\n    timeFormatter(row, column, cellValue) {\n      if(row.preStartDate && row.preEndDate && row.preStartTime && row.preEndTime) {\n        let value = row.preStartDate + '-' + row.preEndDate + ' ' + row.preStartTime + '-' + row.preEndTime\n        return cellValue = value\n      }else{\n        return cellValue = ''\n      }\n    },\n    /**\n     * [getCategoriesList 获取分类]\n     * @return {[type]} [description]\n     */\n    getCategoriesList() {\n      this.$http.post(chooseProductUrl.getCategoryTree).then(res => {\n        if(res.code === 0) {\n          if(res.data && res.data.length) {\n            this.categoriesList = res.data.map(item => {\n              let label = item.categoryName\n              let value = item.categoryId\n              let children = []\n              if(item.categoryVoList && item.categoryVoList.length) {\n                let childList = item.categoryVoList\n                children = childList.map(item => {\n                  let label = item.categoryName\n                  let value = item.categoryId\n                  return {\n                    label: label,\n                    value: value\n                  }\n                })\n                return {\n                  label: label,\n                  value: value,\n                  children: children\n                }\n              }else{\n                return {\n                  label: label,\n                  value: value\n                }\n              }\n\n            })\n          }else {\n            this.categoriesList = []\n\n          }\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        console.log(\"提示(获取分类列表):\", e.message)\n      })\n    },\n    /**\n     * [changeSize description]\n     * @param    {[type]}                 value [description]\n     * @return   {[type]}                       [description]\n     */\n    changeSize (value) {\n      this.pageSize = value\n      this.doSearchHandel()\n    },\n    /**\n     * [changeCurrent 点击分页条]\n     * @param    {[type]}                 value [当前页]\n     * @return   {[type]}                       [description]\n     */\n    changeCurrent (value) {\n      this.currentPage = value\n      this.doSearchHandel()\n    },\n    /**\n     * [doSearchHandel 搜索]\n     * @return {[type]} [description]\n     */\n    doSearchHandel() {\n      this.loading = true\n      this.$http.post(chooseProductUrl.getPreProduct, { ...this.searchContent, pageNum: this.currentPage, pageSize: this.pageSize, queryCode: null, queryType: null}).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          if(res.data && res.data.result && res.data.result.length) {\n            this.tableData = res.data.result\n          }else {\n            this.tableData = []\n          }\n\n          if(this.currentPage == 1) {\n            this.total = res.data.total\n          }\n          return \n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        this.$notify.error({\n          title: '提示',\n          message: e.message\n        })\n      })\n    },\n    /**\n     * [chooseProduct 选择商品]\n     * @return {[type]} [description]\n     */\n    chooseProduct(_param) {\n      // 选择并关闭\n      let chooseProduct = _param\n      let dataMesg = {\n        isShowGoods: false,\n        chooseProduct: _param\n      }\n      this.$emit(\"closeDialog\", dataMesg)\n\n    }\n\n  }\n\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/MallConfig/BannerMgt/ChooseProduct.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"请输入商品ERP编码\",\"size\":\"small\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.doSearchHandel($event)}},model:{value:(_vm.searchContent.productNo),callback:function ($$v) {_vm.$set(_vm.searchContent, \"productNo\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.productNo\"}}),_vm._v(\" \"),_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"请输入名称关键字\",\"size\":\"small\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.doSearchHandel($event)}},model:{value:(_vm.searchContent.productName),callback:function ($$v) {_vm.$set(_vm.searchContent, \"productName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.productName\"}}),_vm._v(\" \"),_c('el-cascader',{staticClass:\"search-input\",attrs:{\"expand-trigger\":\"click\",\"options\":_vm.categoriesList,\"placeholder\":\"请选择分类\",\"change-on-select\":\"\",\"size\":\"small\",\"clearable\":\"\"},model:{value:(_vm.categoriesSelectList),callback:function ($$v) {_vm.categoriesSelectList=$$v},expression:\"categoriesSelectList\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.doSearchHandel}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('el-row',[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"tableRef\",staticClass:\"fixed-height\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"empty-text\":\"没有查询到您想要的数据\",\"max-height\":\"320\",\"size\":\"small\"}},[_c('el-table-column',{attrs:{\"min-width\":\"210\",\"label\":\"商品信息\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"ll-p-m-w\"},[_c('div',{staticClass:\"ll-img-w\"},[(scope.row.productImg && scope.row.productImg != '')?_c('img',{attrs:{\"src\":scope.row.productImg,\"alt\":\"\",\"onerror\":\"onerror=null;src='/shop/static/img_error.png'\"}}):_c('img',{attrs:{\"src\":\"/shop/static/img_error.png\",\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"ll-p-m-c-r\"},[_c('div',[_vm._v(_vm._s(scope.row.productName))]),_vm._v(\" \"),_c('div',{staticClass:\"ll-erp-p-no\"},[_vm._v(\"SKU编码：\"+_vm._s(scope.row.goodsNo || '--'))])])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"65\",\"prop\":\"presalePrice\",\"label\":\"预售价\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"185\",\"label\":\"预售时间\",\"formatter\":_vm.timeFormatter}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"80\",\"prop\":\"productStatusStr\",\"label\":\"有效状态\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"75\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.chooseProduct(scope.row)}}},[_vm._v(\"选择\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tableData.length>0),expression:\"tableData.length>0\"}],staticClass:\"tc mt20\",staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[10, 50, 100, 150, 200],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"pager-count\":5,\"total\":_vm.total},on:{\"size-change\":_vm.changeSize,\"current-change\":_vm.changeCurrent,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3cad4aaa\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MallConfig/BannerMgt/ChooseProduct.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3cad4aaa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChooseProduct.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChooseProduct.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChooseProduct.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3cad4aaa\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChooseProduct.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MallConfig/BannerMgt/ChooseProduct.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}