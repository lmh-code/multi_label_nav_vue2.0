{"version":3,"sources":["webpack:///src/components/StoreMgt/Poster/Add.vue","webpack:///./src/components/StoreMgt/Poster/Add.vue?b6ef","webpack:///./src/components/StoreMgt/Poster/Add.vue","webpack:///src/components/StoreMgt/Poster/Category.vue","webpack:///./src/components/StoreMgt/Poster/Category.vue?a15a","webpack:///./src/components/StoreMgt/Poster/Category.vue"],"names":["fileUrlList","Add","data","isDisabled","imageUploadLoading","addParamMsg","DIFFCITY","regionCode","localStorage","get","templateType","posterTitle","posterImageUrl","enable","categoryNoList","categoryNamesStr","templateTypeOptions","label","value","enableOptions","categoryList","components","region","Region","category","Category","created","this","selectCategoryList","methods","getToken","_this2","$http","post","then","res","code","token","fileName","key","Error","msg","catch","e","$notify","error","title","message","imageUploadReg","file","_this3","_this","isPic","type","indexOf","isJPG","isSizeNum","size","$message","isSize","promise_default","a","resolve","reject","_URL","window","URL","webkitURL","img","Image","src","createObjectURL","onload","width","height","emitUpload","_this4","qiniu_min","subscribe","complete","urlImage","next","doSaveHandel","_this5","length","StoreMgt","saveAndUpdate","extends_default","setTimeout","success","$router","push","showChooseCatDialog","_params","showModel","defaultCheckedKeys","$refs","chooseGoodsDialog","setDefaultMsg","doCancelHandel","_this6","$confirm","confirmButtonText","cancelButtonText","_this7","confirmChooseCategory","params","checkedKeys","categoryNames","Poster_Add","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","className","required","_v","placeholder","callback","$$v","$set","expression","_l","item","trim","action","show-file-list","before-upload","http-request","directives","name","rawName","slot","icon","on","click","idx","_s","disabled","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","props","Array","default","defaultProps","children","tree","setCheckedKeys","concat","toConsumableArray_default","doConfirmHandel","getCheckedKeys","join","$emit","Poster_Category","close-on-click-modal","close-on-press-escape","visible","update:visible","$event","staticStyle","max-height","overflow-y","show-checkbox","node-key","default-checked-keys"],"mappings":"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","file":"static/js/33.703174305265bbbcb765.js","sourcesContent":["<style>\n  @import \"../../../../static/style/file_upload.css\";\n</style>\n\n<template>\n  <div>\n    <div class=\"add-form-wraper\">\n      <el-form ref=\"form\" :model=\"addParamMsg\" label-width=\"160px\">\n        <region class=\"region-wrap\" className=\"add-input\" label=\"选择区域\" :required=\"true\"></region>\n        <el-form-item label=\"模板类型\" required>\n          <el-select class=\"add-input\" v-model=\"addParamMsg.templateType\" placeholder=\"请选择模板类型\" size=\"small\">\n            <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in templateTypeOptions\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"海报标题\" required>\n          <el-input v-model.trim=\"addParamMsg.posterTitle\" size=\"small\" class=\"add-input\" placeholder=\"请输入海报标题\"></el-input>\n          <span>海报标题，限制20个字</span>\n        </el-form-item>\n        <el-form-item label=\"海报图片\" required>\n          <el-upload\n            class=\"avatar-uploader-3ratio4\"\n            action=\"\"\n            :show-file-list=\"false\"\n            :before-upload=\"imageUploadReg\"\n            :http-request=\"emitUpload\">\n            <div v-loading=\"imageUploadLoading\">\n              <img v-if=\"addParamMsg.posterImageUrl\" :src=\"addParamMsg.posterImageUrl\" class=\"avatar-3ratio4\">\n              <i v-else class=\"el-icon-plus avatar-uploader-3ratio4-icon\"></i>\n            </div>\n          </el-upload>\n          <span>请上传大小不超过500K的jpg或png图片（预售模板和爆款模板满足750*2812像素，秒杀模板满足750*2252像素）</span>\n        </el-form-item>\n        <el-form-item label=\"展示商品配置\">\n          <el-input v-model=\"categoryNamesStr\" size=\"small\" class=\"add-input\" placeholder=\"选择商品分类\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"showChooseCatDialog\"></el-button>\n          </el-input>\n          <span>请选择的商品分类</span>\n        </el-form-item>\n        <el-form-item label=\"启用状态\" required>\n          <el-radio-group v-model=\"addParamMsg.enable\" size=\"small\">\n            <el-radio-button :label=\"item.value\" v-for=\"(item, idx) in enableOptions\" :key=\"idx\">{{item.label}}\n            </el-radio-button>\n          </el-radio-group>\n          <span>开启后线上将直接启用</span>\n        </el-form-item>\n\n        <hr class=\"s-slip-tb\">\n        <el-form-item>\n          <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\" :icon=\"isDisabled ? 'el-icon-loading' : null\">保存</el-button>\n          <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <category \n      ref=\"chooseGoodsDialog\" \n      :categoryList=\"categoryList\"\n      @confirmChooseCategory=\"confirmChooseCategory\"></category>\n  </div>\n</template>\n\n<script>\n  import Region from '@/components/Common/StoreCommon/Region'\n  import requestUrl from \"@/api/StoreMgt.js\"\n  import * as utils from '@/utils/utils'\n  import * as qiniu from 'qiniu-js'\n  import config from \"@/utils/config\"\n  import Storage from '@/utils/localStorage'\n  import Category from \"./Category\"\n  const fileUrlList = {\n    getQiNiuToken: '/foundation/qiniu/auth/file'\n  }\n  export default {\n    data() {\n      return {\n        isDisabled: false,\n        imageUploadLoading: false,\n        addParamMsg: {\n          DIFFCITY: true,\n          regionCode: Storage.get('regionCode') || '', // 区域ID\n          templateType: 1,\n          posterTitle: '',\n          posterImageUrl: '',\n          enable: 0,\n          categoryNoList: []\n        },\n        categoryNamesStr: '', // 分类名称，展示使用\n        // 模板类型 1-预售模板;2-爆款模板;3-秒杀模板\n        templateTypeOptions: [\n          {\n            label: '预售模板',\n            value: 1\n          },\n          {\n            label: '爆款模板',\n            value: 2\n          },\n          {\n            label: '秒杀模板',\n            value: 3\n          }\n        ],\n        enableOptions: [{\n            label: '启用',\n            value: 0\n          },\n          {\n            label: '禁用',\n            value: 1\n          }\n        ],\n        \n        categoryList: []\n\n      }\n    },\n    components: {\n      \"region\": Region,\n      \"category\": Category\n    },\n    created() {\n      this.selectCategoryList()\n    },\n    methods: {\n      /**\n       * [getToken 通过后台封装的接口获取七牛的token]\n       * @return {[type]}            [description]\n       */\n      getToken () {\n        return this.$http.post(fileUrlList.getQiNiuToken, {}).then(res => {\n          if (res.code == 0) {\n            let token = res.data.token\n            let fileName = res.data.key\n            return {fileName, token}\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.imageUploadLoading = false\n          this.$notify.error({\n            title: '获取七牛token提示',\n            message: e.message\n          })\n        })\n      },\n      /**\n       * [imageUploadReg 上传图片检测]\n       * @param  {[type]} file [description]\n       * @return {[type]}      [description]\n       */\n       imageUploadReg (file) {\n        let _this = this\n        const isPic = file.type.indexOf('image/') !== -1\n        const isJPG = file.type === 'image/jpeg' || 'image/png'\n        const isSizeNum = file.size <= 1 * 500 * 1024\n        if (!isPic || !isJPG || !isSizeNum) {\n          this.$message.error('海报图片为大小不超过500K的jpg或png图片（预售模板和爆款模板满足750*2812像素，秒杀模板满足750*2252像素）')\n          return false\n        }\n        const isSize = new Promise(function(resolve, reject) {\n          let _URL = window.URL || window.webkitURL\n          let img = new Image();\n          img.src = _URL.createObjectURL(file)\n          img.onload = function() {\n            if(_this.addParamMsg.templateType === 3) {\n              // 秒杀\n              img.width === 750 && img.height === 2252 ? resolve() : reject()\n            }else {\n              img.width === 750 && img.height === 2812 ? resolve() : reject()\n            }\n          }\n        }).then(() => {\n          return file\n        }, () => {\n          if(_this.addParamMsg.templateType === 3) {\n            // 秒杀\n            this.$message.error('海报图片为大小不超过500K的jpg或png图片，秒杀模板满足750*2252像素')\n          }else {\n            this.$message.error('海报图片为大小不超过500K的jpg或png图片，预售模板和爆款模板满足750*2812像素')\n          }\n          return Promise.reject()\n        })\n        return isPic && isJPG && isSizeNum && isSize\n      },\n      /**\n       * [emitUpload 上传图片]\n       * @param  {[type]} e [description]\n       * @return {[type]}   [description]\n       */\n      emitUpload(e) {\n        this.imageUploadLoading = true\n        this.getToken().then((res) => {\n          // 开始上传图片\n          let uploader = qiniu.upload(e.file, res.fileName, res.token)\n          uploader.subscribe({\n            error: () => {\n              this.$message.error('图片上传失败，请重试')\n              this.imageUploadLoading = false\n            },\n            complete: (res) => {\n              // 添加内容设置图片地址\n              let urlImage = 'http://retailimg01.benlailife.com/' + res.key\n              this.imageUploadLoading = false\n              // 设置对应的图片地址\n              this.addParamMsg.posterImageUrl = urlImage\n            },\n            next: res => {\n            }\n          })\n        })\n      },\n      doSaveHandel() {\n        if(!this.addParamMsg.posterTitle) {\n          this.$message('请输入海报标题') \n          return\n        }else if(this.addParamMsg.posterTitle.length > 20) {\n          this.$message('海报标题限制20个字') \n          return\n        }\n        if(!this.addParamMsg.posterImageUrl) {\n          this.$message('请上传大小不超过500K的jpg或png图片（预售模板和爆款模板满足750*2812像素，秒杀模板满足750*2252像素）') \n          return\n        }\n        this.isDisabled = true\n        this.$http.post(requestUrl.saveAndUpdate, {...this.addParamMsg}).then(res => {\n          // 保存按钮可再次点击\n          setTimeout(() => {\n            this.isDisabled = false\n          }, 800)\n          if(res.code === 0) {\n            this.$message.success(\"保存成功\")\n            this.$router.push('/poster')\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.isDisabled = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      showChooseCatDialog() {\n        let _params = {\n          showModel: true,\n          defaultCheckedKeys: this.addParamMsg.categoryNoList\n        }\n        this.$refs.chooseGoodsDialog.setDefaultMsg(_params)\n      },\n      doCancelHandel() {\n        this.$confirm('确定取消添加商品吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push('/poster')\n        }).catch(() => {})\n      },\n      selectCategoryList() {\n        this.$http.get(requestUrl.selectCategoryList).then(res => {\n          if (res.code === 0) {\n            this.categoryList = res.data && res.data.length ? res.data : []\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      confirmChooseCategory(params) {\n        this.addParamMsg.categoryNoList = params.checkedKeys || []\n        this.categoryNamesStr = params.categoryNames || ''\n      }\n    }\n    \n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/StoreMgt/Poster/Add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMsg,\"label-width\":\"160px\"}},[_c('region',{staticClass:\"region-wrap\",attrs:{\"className\":\"add-input\",\"label\":\"选择区域\",\"required\":true}}),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"模板类型\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择模板类型\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.templateType),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"templateType\", $$v)},expression:\"addParamMsg.templateType\"}},_vm._l((_vm.templateTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"海报标题\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入海报标题\"},model:{value:(_vm.addParamMsg.posterTitle),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"posterTitle\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"addParamMsg.posterTitle\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"海报标题，限制20个字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"海报图片\",\"required\":\"\"}},[_c('el-upload',{staticClass:\"avatar-uploader-3ratio4\",attrs:{\"action\":\"\",\"show-file-list\":false,\"before-upload\":_vm.imageUploadReg,\"http-request\":_vm.emitUpload}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.imageUploadLoading),expression:\"imageUploadLoading\"}]},[(_vm.addParamMsg.posterImageUrl)?_c('img',{staticClass:\"avatar-3ratio4\",attrs:{\"src\":_vm.addParamMsg.posterImageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-3ratio4-icon\"})])]),_vm._v(\" \"),_c('span',[_vm._v(\"请上传大小不超过500K的jpg或png图片（预售模板和爆款模板满足750*2812像素，秒杀模板满足750*2252像素）\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"展示商品配置\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"选择商品分类\"},model:{value:(_vm.categoryNamesStr),callback:function ($$v) {_vm.categoryNamesStr=$$v},expression:\"categoryNamesStr\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.showChooseCatDialog},slot:\"append\"})],1),_vm._v(\" \"),_c('span',[_vm._v(\"请选择的商品分类\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"启用状态\",\"required\":\"\"}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.addParamMsg.enable),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"enable\", $$v)},expression:\"addParamMsg.enable\"}},_vm._l((_vm.enableOptions),function(item,idx){return _c('el-radio-button',{key:idx,attrs:{\"label\":item.value}},[_vm._v(_vm._s(item.label)+\"\\n          \")])}),1),_vm._v(\" \"),_c('span',[_vm._v(\"开启后线上将直接启用\")])],1),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"icon\":_vm.isDisabled ? 'el-icon-loading' : null},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1),_vm._v(\" \"),_c('category',{ref:\"chooseGoodsDialog\",attrs:{\"categoryList\":_vm.categoryList},on:{\"confirmChooseCategory\":_vm.confirmChooseCategory}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2678d9d9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/StoreMgt/Poster/Add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2678d9d9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Add.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2678d9d9\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StoreMgt/Poster/Add.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <el-dialog \n      title=\"商品分类\" \n      :close-on-click-modal = \"false\"\n      :close-on-press-escape = \"false\"\n      :visible.sync=\"showModel\" \n      width='400px'>\n      <div style=\"max-height: 300px;overflow-y: auto;\">\n        <el-tree\n          ref=\"tree\"\n          :data=\"categoryList\"\n          show-checkbox\n          node-key=\"categoryId\"\n          :default-checked-keys=\"defaultCheckedKeys\"\n          :props=\"defaultProps\">\n        </el-tree>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"showModel = false\" size=\"mini\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"doConfirmHandel\" size=\"mini\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  export default {\n    props: {\n      categoryList: {\n        type: Array,\n        default: function() {return []}\n      }\n    },\n    data() {\n      return {\n        defaultProps: {\n          children: 'childCategoryList',\n          label: 'categoryName'\n        },\n        showModel: false,\n        defaultCheckedKeys: []\n      }\n    },\n    methods: {\n      setDefaultMsg(params) {\n        this.showModel = params.showModel\n        this.defaultCheckedKeys = params.defaultCheckedKeys\n        setTimeout(() => {\n          this.$refs.tree.setCheckedKeys([...params.defaultCheckedKeys])\n        }, 0);\n      },\n      doConfirmHandel () {\n        this.showModel = false\n        // let categoryNames = this.$refs.tree.getCheckedNodes(true).map(item => {\n        //   return item.categoryName\n        // }).join(',')\n        let checkedKeys = this.$refs.tree.getCheckedKeys(true)\n        let categoryNames = checkedKeys.join(',')\n        let params = {\n          categoryNames: categoryNames,\n          checkedKeys: checkedKeys\n        }\n        this.$emit(\"confirmChooseCategory\", params)\n      }\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/StoreMgt/Poster/Category.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"title\":\"商品分类\",\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"visible\":_vm.showModel,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.showModel=$event}}},[_c('div',{staticStyle:{\"max-height\":\"300px\",\"overflow-y\":\"auto\"}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.categoryList,\"show-checkbox\":\"\",\"node-key\":\"categoryId\",\"default-checked-keys\":_vm.defaultCheckedKeys,\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.showModel = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.doConfirmHandel}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e0ab906\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/StoreMgt/Poster/Category.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Category.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Category.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e0ab906\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Category.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StoreMgt/Poster/Category.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}