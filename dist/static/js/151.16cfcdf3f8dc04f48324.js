webpackJsonp([151],{Hj4h:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),r=a("Gu7T"),o=a.n(r),l=a("ylbZ"),s=a("XfvZ"),c=a("OVbB"),u=a("oAV5"),d=a("bzuE"),p=a("ssT3"),h={data:function(){return{pageSizes:d.a.pageSizes20,loading:!1,pageNum:1,pageSize:20,total:0,searchContent:{DIFFCITY:!0,regionCode:p.a.get("regionCode")||"",id:"",posterTitle:"",enable:"",defaultRange:[u.u(Date.parse(new Date)-5184e5)+" 00:00:00",u.u(Date.parse(new Date))+" 23:59:59"],createStartTime:u.u(Date.parse(new Date)-5184e5)+" 00:00:00",createEndTime:u.u(Date.parse(new Date))+" 23:59:59"},enableOptions:[{label:"全部",value:""},{label:"启用",value:0},{label:"禁用",value:1}],tableData:[],visible:!1,posterImg:""}},components:{"date-picker-range":s.a,region:l.a},created:function(){var e=p.a.get("searchContent");this.$route.meta.keepAlive&&e&&(this.pageNum=e.pageNum,this.searchContent=e.searchContent),p.a.remove("searchContent"),this.doSearchHandel()},methods:{RegionChange:function(e){this.searchContent.regionCode=e.regionCode,this.doSearchHandel(!0)},datePickerRangeChange:function(e){this.searchContent.defaultRange=e?[].concat(o()(e)):e,this.searchContent.createStartTime=e?e[0]:"",this.searchContent.createEndTime=e?e[1]:"",this.doSearchHandel(!0)},changeSize:function(e){this.pageSize=e,this.doSearchHandel()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandel()},doSearchHandel:function(e){var t=this;!0===e&&(this.pageNum=1),this.loading=!0,this.$http.post(c.a.getList,i()({},this.searchContent,{pageSize:this.pageSize,pageNum:this.pageNum})).then(function(e){if(t.loading=!1,0===e.code)return t.tableData=e.data&&e.data.result&&e.data.result.length?e.data.result:[],void(t.total=e.data.total);throw new Error(e.msg)}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})},goAddPage:function(){this.$router.push("/poster/add")},editItem:function(e){this.$router.push("/poster/edit/"+e.id)},deleteItem:function(e){var t=this,a={DIFFCITY:!0,id:e.id};this.$confirm("确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(c.a.delete,i()({},a)).then(function(e){if(0===e.code)return t.$message.success("删除成功"),void t.doSearchHandel();throw new Error(e.msg)}).catch(function(e){t.$notify.error({title:"提示",message:e.message})})}).catch(function(){})},operateHandel:function(e){var t=this,a={DIFFCITY:!0,id:e.id},n="";0===e.enable?(n="确定要禁用吗?",a.enable=1):1===e.enable&&(n="确定要启用吗?",a.enable=0),this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post(c.a.operate,i()({},a)).then(function(a){if(0===a.code)return 0===e.enable?t.$message.success("禁用成功"):1===e.enable&&t.$message.success("启用成功"),void t.doSearchHandel();throw new Error(a.msg)}).catch(function(e){t.$notify.error({title:"提示",message:e.message})})}).catch(function(){})},enableFormatter:function(e,t,a,n){return 0===a?"已启用":1==a?"未启用":a},showPoster:function(e){this.visible=!0,this.posterImg=e.posterImageUrl}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"handel-search-wraper"},[a("div",{staticClass:"handel-wraper"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.goAddPage}},[e._v("添加模板")])],1),e._v(" "),a("hr",{staticClass:"s-slip"}),e._v(" "),a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("region",{staticClass:"region-wrap",attrs:{refresh:!1},on:{RegionChange:e.RegionChange}}),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("date-picker-range",{attrs:{defaultRange:e.searchContent.defaultRange,clearable:!1,editable:!1},on:{datePickerRangeChange:e.datePickerRangeChange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"海报ID"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入海报ID",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearchHandel(!0)}},model:{value:e.searchContent.id,callback:function(t){e.$set(e.searchContent,"id","string"==typeof t?t.trim():t)},expression:"searchContent.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"海报标题"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入海报标题",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearchHandel(!0)}},model:{value:e.searchContent.posterTitle,callback:function(t){e.$set(e.searchContent,"posterTitle","string"==typeof t?t.trim():t)},expression:"searchContent.posterTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"请选择订单状态",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.enable,callback:function(t){e.$set(e.searchContent,"enable",t)},expression:"searchContent.enable"}},e._l(e.enableOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandel(!0)}}},[e._v("搜索")])],1)],1)],1)]),e._v(" "),a("div",{staticClass:"table-wraper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"没有查询到您想要的数据",size:"small"}},[a("el-table-column",{attrs:{"min-width":"70px",prop:"id",label:"海报ID"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"posterTitle",label:"海报标题"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90px",prop:"regionName",label:"城市"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"170px",prop:"categoryNameList",label:"展示商品配置","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"170px",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"createSysUserId",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"enable",label:"状态",formatter:e.enableFormatter}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:0===t.row.enable?"el-icon-error":"el-icon-success"},on:{click:function(a){return e.operateHandel(t.row)}}},[e._v("\n              "+e._s(0===t.row.enable?"禁用":"启用"))]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-document-copy"},on:{click:function(a){return e.editItem(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-document-copy"},on:{click:function(a){return e.deleteItem(t.row)}}},[e._v("删除")])],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-document-copy"},on:{click:function(a){return e.showPoster(t.row)}}},[e._v("查看海报")])],1)]}}])})],1),e._v(" "),e.total>0?a("el-pagination",{staticClass:"tc mt20",attrs:{background:"","current-page":e.pageNum,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"查看海报","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.visible,width:"400px"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticStyle:{"max-height":"400px","overflow-y":"auto"}},[a("img",{attrs:{src:e.posterImg,alt:"",width:"100%"}})]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")])],1)])],1)},staticRenderFns:[]},g=a("VU/8")(h,m,!1,null,null,null);t.default=g.exports}});
//# sourceMappingURL=151.16cfcdf3f8dc04f48324.js.map