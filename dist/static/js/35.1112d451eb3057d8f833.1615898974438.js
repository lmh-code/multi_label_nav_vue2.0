webpackJsonp([35],{"3aSk":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),s=a("t0/o"),l=a("segh"),o=a("WorT"),r=(a("ssT3"),{mixins:[o.a],data:function(){return{loading:!1,initData:{confirmPaperNo:"",region:"",type:"",goodsNo:"",paperNo:"",supplier:"",validDateStartTime:"",validDateEndTime:""},searchContent:{},regionOptions:[],categoryList:[],paperNo:"",supplier:"",productInfo:"",searchMore:!1,typeOptions:[{label:"全部类型",value:""},{label:"调价",value:3},{label:"促销",value:2}],startTime:"",endTime:"",checkedList:[],selectedRowKeys:[],columns:[{title:"定价单号",dataIndex:"confirmPaperNo",minWidth:120,ellipsis:!0},{title:"类型",dataIndex:"typeName",minWidth:90,ellipsis:!0},{title:"区域",dataIndex:"storeGroupName",minWidth:90,ellipsis:!0},{title:"生效日期",dataIndex:"validTimeRange",minWidth:110,ellipsis:!0},{title:"状态",dataIndex:"stateName",minWidth:90,ellipsis:!0},{title:"报价单号",dataIndex:"paperNo",minWidth:90,ellipsis:!0},{title:"制单时间",dataIndex:"createTime",minWidth:120,ellipsis:!0},{title:"制单人",dataIndex:"createUserName",minWidth:100,ellipsis:!0},{title:"审核时间",dataIndex:"confirmTime",minWidth:120,ellipsis:!0},{title:"审核人",dataIndex:"confirmUserName",minWidth:100,ellipsis:!0},{title:"操作",fixed:"right",minWidth:80,operation:[{label:"查看",icon:"el-icon-view",clickFunc:this.goDetailPage}]}],tableData:[],pageNum:1,pageSize:10,total:0,isAdvanced:!1}},created:function(){this._getAreas(),this.doSearchHandle()},methods:{FormItemChange:function(){this.pageNum=1},taggleAdvanced:function(){this.isAdvanced=!this.isAdvanced},doSearchHandle:function(){var e=this;if(this.searchContent.validDateStartTime&&this.searchContent.validDateEndTime&&this.searchContent.validDateStartTime>this.searchContent.validDateEndTime)this.$tip.message("结束时间不可早于开始时间","warning");else{var t={storeGroupNo:this.searchContent.region,typeNo:this.searchContent.type,confirmPaperNo:this.searchContent.confirmPaperNo,paperNo:this.searchContent.paperNo,vendorNo:this.searchContent.supplier,createTimeStart:this.searchContent.validDateStartTime?this.searchContent.validDateStartTime+"  00:00:00":null,createTimeEnd:this.searchContent.validDateEndTime?this.searchContent.validDateEndTime+" 23:59:59":null,goodsNo:this.searchContent.goodsNo,pageNum:this.pageNum,pageSize:this.pageSize};this.loading=!0,this.$http.post(l.a.fixList,i()({},t)).then(function(t){if(e.loading=!1,t&&0===t.code){var a=t.data&&t.data.result&&t.data.result.length&&t.data.result.map(function(e){return e.validTimeRange=e.startTime+" 至 "+e.endTime,e});e.tableData=a,e.total=t.data&&t.data.total}else e.$tip.notify(t.msg,"error")}).catch(function(t){e.loading=!1,e.$tip.notify(t.message,"error")})}},doResetHandle:function(){this.searchContent=i()({},this.initData),this.pageNum=1,this.pageSize=20,this.total=0},_getAreas:function(){var e=this;this.$http.get(s.a.areaStoreGroupList).then(function(t){t&&0===t.code?e.regionOptions=t.data||[]:e.$tip.notify(t.msg,"error")}).catch(function(t){e.$tip.notify(t.message,"error")})},goDetailPage:function(e){this.$router.push("/fixprice/"+e.confirmPaperNo)},changeSize:function(e){this.pageSize=e,this.doSearchHandle()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandle()}}}),c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("el-form-item",{attrs:{label:"区域"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"选择区域","collapse-tags":"",clearable:"",size:"small"},on:{change:e.FormItemChange},model:{value:e.searchContent.region,callback:function(t){e.$set(e.searchContent,"region",t)},expression:"searchContent.region"}},e._l(e.regionOptions,function(e){return a("el-option",{key:e.storeGroupNo,attrs:{label:e.storeGroupName,value:e.storeGroupNo}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"选择类型",clearable:"",size:"small"},on:{change:e.FormItemChange},model:{value:e.searchContent.type,callback:function(t){e.$set(e.searchContent,"type",t)},expression:"searchContent.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"定价单号"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",clearable:"",placeholder:"定价单号"},on:{change:e.FormItemChange},model:{value:e.searchContent.confirmPaperNo,callback:function(t){e.$set(e.searchContent,"confirmPaperNo","string"==typeof t?t.trim():t)},expression:"searchContent.confirmPaperNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品编码"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入商品",clearable:""},on:{change:e.FormItemChange},model:{value:e.searchContent.goodsNo,callback:function(t){e.$set(e.searchContent,"goodsNo","string"==typeof t?t.trim():t)},expression:"searchContent.goodsNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"报价单号"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",clearable:"",placeholder:"报价单号"},on:{change:e.FormItemChange},model:{value:e.searchContent.paperNo,callback:function(t){e.$set(e.searchContent,"paperNo","string"==typeof t?t.trim():t)},expression:"searchContent.paperNo"}})],1),e._v(" "),e.isAdvanced?a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"选择供应商","collapse-tags":"",clearable:"",size:"small"},on:{change:e.FormItemChange},model:{value:e.searchContent.supplier,callback:function(t){e.$set(e.searchContent,"supplier",t)},expression:"searchContent.supplier"}},e._l(e.vendors,function(e){return a("el-option",{key:e.vendorNo,attrs:{label:e.vendorName,value:e.vendorNo}})}),1)],1):e._e(),e._v(" "),e.isAdvanced?a("el-form-item",{attrs:{label:"制单起始日期"}},[a("el-date-picker",{staticClass:"search-input",attrs:{clearable:"",type:"date",placeholder:"制单起始日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small"},on:{change:e.FormItemChange},model:{value:e.searchContent.validDateStartTime,callback:function(t){e.$set(e.searchContent,"validDateStartTime",t)},expression:"searchContent.validDateStartTime"}})],1):e._e(),e._v(" "),e.isAdvanced?a("el-form-item",{attrs:{label:"制单终止日期"}},[a("el-date-picker",{staticClass:"search-input",attrs:{clearable:"",type:"date",placeholder:"制单终止日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small"},on:{change:e.FormItemChange},model:{value:e.searchContent.validDateEndTime,callback:function(t){e.$set(e.searchContent,"validDateEndTime",t)},expression:"searchContent.validDateEndTime"}})],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.doSearchHandle}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"",size:"mini"},on:{click:e.taggleAdvanced}},[e._v(e._s(e.isAdvanced?"收起高级查询":"高级查询"))])],1)],1),e._v(" "),a("div",{staticClass:"table-wraper"},[a("bl-table",{attrs:{loading:e.loading,border:!1,dataSource:e.tableData,columns:e.columns}}),e._v(" "),a("bl-pagination",{attrs:{showPagination:e.tableData.length>0,pageNum:e.pageNum,total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent}})],1)],1)},staticRenderFns:[]},d=a("VU/8")(r,c,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=35.1112d451eb3057d8f833.1615898974438.js.map