{"version":3,"sources":["webpack:///src/module/views/Qualification/GoodsQua/Edit.vue","webpack:///./src/module/views/Qualification/GoodsQua/Edit.vue?50e1","webpack:///./src/module/views/Qualification/GoodsQua/Edit.vue","webpack:///./src/components/Common/File/ImageUpload.vue?83ff","webpack:///src/components/Common/File/ImageUpload.vue","webpack:///./src/components/Common/File/ImageUpload.vue?ebd9","webpack:///./src/components/Common/File/ImageUpload.vue"],"names":["Edit","mixins","options","data","isDisabled","type","supplierId","statusOptions","label","value","id","qualificationModelId","qualificationModelName","qualificationNo","status","qualificationBasicMsgList","qualificationTimeMsgList","qualificationImgList","created","this","$route","params","modelId","mounted","getDetailMsg","components","image-upload","ImageUpload","methods","_this","url","qualification","qualificationMsgEdit","goodsEdit","$loading","show","$http","post","extends_default","then","res","hide","code","Error","msg","qualificationDetailMsg","setStateRenderDom","catch","e","$tip","notify","message","detail","items","length","filter","item","fieldType","split","map","index","imageUrl","formatStatus","filterMsg","setImageList","imageList","concat","toConsumableArray_default","doSaveHandel","_this2","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","textValue","qualificationFieldName","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_item","timeValue","urlList","join","uploadQualification","uploadGoodsUpload","editSuccessHandel","closePage","doCancelHandel","GoodsQua_Edit","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","label-position","label-width","_v","_s","size","placeholder","clearable","model","callback","$$v","trim","expression","_l","key","$set","format","value-format","ref","defaultImages","imgAspect","maxImgsNum","imgSize","on","images-change","disabled","loading","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","colorMain","colorSubBlack","colorGrey","fileUrlList","getQiNiuToken","reqUrl","props","Number","default","width","height","Array","imageUploadLoading","currentUpFileIdx","dialogVisible","bigImageUrl","draggable","vuedraggable_umd_default","a","watch","immediate","handler","newVal","oldVal","imageListTemp","push","datadragStart","datadragEnd","evt","newImageList","$emit","imageListItem","setItemIdx","idx","imageUploadReg","file","isPic","isSizeNum","_sizeValiTipStr","imgWidthHeightCheck","that","promise_default","resolve","reject","_URL","window","URL","webkitURL","img","Image","onload","src","createObjectURL","sizeValiTipStr","_that","_that2","emitUpload","getToken","qiniu_min","fileName","token","subscribe","error","complete","urlImage","_this3","$notify","title","deleteUpFile","splice","forEach","onPreviewHandel","filePath","File_ImageUpload","update","start","$event","class","action","show-file-list","before-upload","http-request","directives","name","rawName","_e","visible","append-to-body","update:visible","alt"],"mappings":"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","file":"static/js/2.af2a8022ebbfaab5cc8c.1615898974438.js","sourcesContent":["<style lang=\"less\" scoped>\n  .title {\n    font-weight: bold;\n    font-size: 16px;\n    color: @colorTitle;\n  }\n</style>\n<template>\n  <div class=\"add-form-wraper\">\n    <el-form \n      label-position=\"right\" \n      label-width=\"160px\">\n      <div class=\"title\">基本信息：</div> \n      <el-form-item label=\"资质名称:\">\n        {{qualificationModelName}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;资质状态：&nbsp;{{formatStatus(status)}}\n      </el-form-item>\n      <el-form-item label=\"资质编码:\">\n        <el-input \n          v-model.trim=\"qualificationNo\" \n          size=\"small\" \n          class=\"add-input\" \n          placeholder=\"请输入资质编码\"\n          clearable></el-input>\n      </el-form-item>\n      <div class=\"title\">普通信息：</div> \n      <template v-for=\"(item, index) of qualificationBasicMsgList\">\n        <el-form-item :label=\"item.qualificationFieldName + ':'\" :key=\"index\">\n          <el-input \n            v-model.trim=\"item.textValue\" \n            size=\"small\" \n            class=\"add-input\" \n            :placeholder=\"item.qualificationFieldName\"\n            clearable></el-input>\n        </el-form-item>\n      </template>\n      <div class=\"title\">时间信息：</div> \n      <template v-for=\"(item, index) of qualificationTimeMsgList\">\n        <el-form-item \n          :label=\"item.qualificationFieldName + ':'\" \n          :key=\"index + 10000\">\n          <el-date-picker \n            :clearable=\"false\"\n            class=\"add-input\" \n            v-model=\"item.timeValue\" \n            type=\"date\" \n            :placeholder=\"item.qualificationFieldName\"\n            format=\"yyyy-MM-dd\" \n            value-format=\"yyyy-MM-dd\" \n            size=\"small\">\n          </el-date-picker>\n        </el-form-item>\n      </template>\n      <div>\n        <span class=\"title\">资质图片：</span>(图片格式要求jpg、png ;图片大小不超过3M;上传的资质需是加盖供应商公章的彩色扫描件；资质要求清晰；最多只能上传3张。)\n      </div>\n      <el-form-item label=\"图片内容:\">\n        <image-upload\n          ref=\"imageUpload\" \n          @images-change=\"setImageList\"\n          :defaultImages=\"qualificationImgList\"\n          :imgAspect=\"2\"\n          :maxImgsNum=\"3\"\n          :imgSize=\"3 * 1024\"/>\n      </el-form-item>\n      <el-form-item>\n        <hr class=\"s-slip-tb\">\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\" :loading=\"isDisabled\">提交</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">关闭</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport optionsMixin from '@/module/mixin/options'\nimport requestUrl from '@/module/api/qualification'\nimport ImageUpload from '@/components/Common/File/ImageUpload'\nexport default {\n  mixins: [optionsMixin],\n  data() {\n    return {\n      isDisabled: false,\n      type: '',\n      supplierId: '',\n      statusOptions: [\n        {\n          label: '待上传',\n          value: 0\n        },\n        {\n          label: '待审核',\n          value: 1\n        },\n        {\n          label: '审核通过',\n          value: 2\n        },\n        {\n          label: '已驳回',\n          value: 3\n        },\n        {\n          label: '已过期',\n          value: 4\n        },\n        {\n          label: '即将过期',\n          value: 5\n        },\n        {\n          label: '即将过期-更换中',\n          value: 6\n        },\n      ],\n      id: '',\n      qualificationModelId: '',\n      qualificationModelName: '',\n      qualificationNo: '', // 资质编码\n      status: '',\n      qualificationBasicMsgList: [], // 基本信息\n      qualificationTimeMsgList: [], // 时间信息\n      qualificationImgList: [] // 图片信息\n    }\n  },\n  created() {\n    this.type = this.$route.params.type\n    this.id = this.$route.params.id\n    this.qualificationModelId = this.$route.params.modelId\n    this.supplierId = this.$route.params.supplierId\n  },\n  mounted() {\n    this.getDetailMsg()\n  },\n  components: {\n    \"image-upload\": ImageUpload\n  },\n  methods: {\n    getDetailMsg() {\n      let url = requestUrl.qualificationMsgEdit\n      if(this.type === '001') {\n        // 供应商资质管理\n        url = requestUrl.qualificationMsgEdit\n      }else if(this.type === '002') {\n        // 商品资质管理\n        url = requestUrl.goodsEdit\n      }\n      let params = {\n        id: this.id,\n        qualificationModelId: this.qualificationModelId,\n        supplierId: this.supplierId\n      }\n      this.$loading.show()\n      this.$http.post(url, {...params}).then(res => {\n        this.$loading.hide()\n        if(res.code === 0) {\n          let qualificationDetailMsg = res.data ? res.data : {}\n          this.setStateRenderDom(qualificationDetailMsg)\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.$loading.hide()\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    },\n    setStateRenderDom(detail) {\n      if(!detail) return\n      this.id = detail.id\n      this.qualificationModelId = detail.qualificationModelId\n      this.qualificationModelName = detail.qualificationModelName\n      this.qualificationNo = detail.qualificationNo\n      this.status = detail.status\n      this.qualificationBasicMsgList = detail.items && detail.items.length ? detail.items.filter(item => {\n        return item.fieldType === 0\n      }) : []\n      this.qualificationTimeMsgList = detail.items && detail.items.length ? detail.items.filter(item => {\n        return item.fieldType === 1\n      }) : []\n      this.qualificationImgList = detail.url ? detail.url.split(',').map((url, index) => {\n        return {\n          index: index,\n          imageUrl: url\n        }\n      }) : [{\n        index: 0,\n        imageUrl: ''\n      }]\n    },\n    formatStatus(status) {\n      let filterMsg = this.statusOptions.filter(item => {\n        return item.value === status\n      })[0]\n      return filterMsg ? filterMsg.label : ''\n    },\n    setImageList(params) {\n      this.qualificationImgList = params && params.imageList.length ? [...params.imageList] : [{\n        index: 0,\n        imageUrl: ''\n      }]\n    },\n    doSaveHandel() {\n      if(!this.qualificationNo) {\n        this.$tip.message('请输入资质编号', 'warning')\n        return\n      }\n      for(let item of this.qualificationBasicMsgList) {\n        if(!item.textValue) {\n          this.$tip.message(`请输入${item.qualificationFieldName}的内容`, 'warning')\n          return\n        }else if(item.textValue.length > 50) {\n          this.$tip.message(`${item.qualificationFieldName}的内容长度不能超过50`, 'warning')\n          return\n        }\n      }\n      for(let item of this.qualificationTimeMsgList) {\n        if(!item.timeValue) {\n          this.$tip.message(`请选择${item.qualificationFieldName}`, 'warning')\n          return\n        }\n      }\n      const urlList = this.qualificationImgList.filter(item => {\n        return item.imageUrl\n      }).map(item => {\n        return item.imageUrl\n      })\n      if(!urlList || urlList.length === 0) {\n        this.$tip.message(`请上传资质图片`, 'warning')\n        return\n      }\n      let params = {\n        id: this.id,\n        qualificationModelId: this.qualificationModelId,\n        qualificationModelName: this.qualificationModelName,\n        qualificationNo: this.qualificationNo,\n        status: this.status,\n        items: [...this.qualificationBasicMsgList, ...this.qualificationTimeMsgList],\n        url: urlList.join(',')\n      }\n      this.isDisabled = true\n      let url = requestUrl.uploadQualification\n      if(this.type === '001') {\n        // 供应商资质管理\n        url = requestUrl.uploadQualification\n      }else if(this.type === '002') {\n        // 商品资质管理\n        url = requestUrl.uploadGoodsUpload\n      }\n      this.$http.post(url, {...params}).then(res => {\n        this.isDisabled = false\n        if(res.code === 0) {\n          this.$tip.message(`提交成功`, 'success')\n          if(this.type === '001') {\n            // 设置刷新列表页状态\n            this.editSuccessHandel('/sc_qua')\n            // 关闭当前页并跳转至详情页\n            this.closePage(`/sc_qua/detail/001/${this.id}/${this.qualificationModelId}/${this.supplierId}`)\n          }else if(this.type === '002') {\n            this.editSuccessHandel('/goods_qua')\n            this.closePage(`/goods_qua/detail/002/${this.id}/${this.qualificationModelId}/${this.supplierId}`)\n          }\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.isDisabled = false\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    },\n    doCancelHandel() {\n      if(this.type === '001') {\n        this.closePage('/sc_qua')\n      }else if(this.type === '002') {\n        this.closePage('/goods_qua')\n      }\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/Qualification/GoodsQua/Edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"160px\"}},[_c('div',{staticClass:\"title\"},[_vm._v(\"基本信息：\")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"资质名称:\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.qualificationModelName)+\"        资质状态： \"+_vm._s(_vm.formatStatus(_vm.status))+\"\\n    \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"资质编码:\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入资质编码\",\"clearable\":\"\"},model:{value:(_vm.qualificationNo),callback:function ($$v) {_vm.qualificationNo=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"qualificationNo\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(\"普通信息：\")]),_vm._v(\" \"),_vm._l((_vm.qualificationBasicMsgList),function(item,index){return [_c('el-form-item',{key:index,attrs:{\"label\":item.qualificationFieldName + ':'}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":item.qualificationFieldName,\"clearable\":\"\"},model:{value:(item.textValue),callback:function ($$v) {_vm.$set(item, \"textValue\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.textValue\"}})],1)]}),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(\"时间信息：\")]),_vm._v(\" \"),_vm._l((_vm.qualificationTimeMsgList),function(item,index){return [_c('el-form-item',{key:index + 10000,attrs:{\"label\":item.qualificationFieldName + ':'}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"clearable\":false,\"type\":\"date\",\"placeholder\":item.qualificationFieldName,\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"size\":\"small\"},model:{value:(item.timeValue),callback:function ($$v) {_vm.$set(item, \"timeValue\", $$v)},expression:\"item.timeValue\"}})],1)]}),_vm._v(\" \"),_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"资质图片：\")]),_vm._v(\"(图片格式要求jpg、png ;图片大小不超过3M;上传的资质需是加盖供应商公章的彩色扫描件；资质要求清晰；最多只能上传3张。)\\n    \")]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"图片内容:\"}},[_c('image-upload',{ref:\"imageUpload\",attrs:{\"defaultImages\":_vm.qualificationImgList,\"imgAspect\":2,\"maxImgsNum\":3,\"imgSize\":3 * 1024},on:{\"images-change\":_vm.setImageList}})],1),_vm._v(\" \"),_c('el-form-item',[_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"loading\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"关闭\")])],1)],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2c47f672\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/Qualification/GoodsQua/Edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2c47f672\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!style-resources-loader?{\\\"patterns\\\":\\\"/Users/zhanyizhu/Desktop/projects/blx-code/supplier_web/src/assets/style/base.less\\\"}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c47f672\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2c47f672\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/Qualification/GoodsQua/Edit.vue\n// module id = null\n// module chunks = ","// removed by extract-text-webpack-plugin\nmodule.exports = {\"colorMain\":\"#1890ff\",\"colorSubBlack\":\"#001529\",\"colorGrey\":\"#cccccc\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-09ccbe57\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./node_modules/style-resources-loader/lib?{\"patterns\":\"/Users/zhanyizhu/Desktop/projects/blx-code/supplier_web/src/assets/style/base.less\"}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/Common/File/ImageUpload.vue\n// module id = CbgY\n// module chunks = 2 5","<style lang=\"less\">\n  .bl-draggable-wrap {\n    overflow: hidden;\n  }\n  .bl-draggable-wrap .bl-upload-wrap {\n    float: left;\n    margin: 0 5px;\n  }\n  .bl-upload-wrap .uploader11 {\n    width: 120px;\n    height: 120px;\n    display: inline-block;\n  }\n  .bl-upload-wrap .uploader34 {\n    width: 90px;\n    height: 120px;\n    display: inline-block;\n  }\n  .bl-upload-wrap .uploader43 {\n    width: 120px;\n    height: 90px;\n    display: inline-block;\n  }\n  .bl-upload-wrap .el-upload {\n    width: 100%;\n    height: 100%;\n    border: 1px dashed @colorSplit;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .bl-upload-wrap .el-upload:hover {\n    border-color: @colorMain;\n  }\n  .bl-upload-wrap img {\n    width: 100%;\n    height: 100%;\n    display: block;\n  }\n  .upload-img-wrap {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 28px;\n    color: @colorSubTitle;\n  }\n  .btn-w {\n    padding: 0 5px;\n    line-height: 0;\n    text-align: center;\n  }\n  .btn-w .up-h-i {\n    cursor: pointer;\n    padding-left: 4px;\n    padding-right: 4px;\n  }\n  .btn-w .up-h-i:hover {\n    color: @colorMain;\n  }\n</style>\n\n<template>\n  <div>\n    <!-- 用例如下：\n      <image-upload \n        ref=\"imageUpload\" \n        @setImageList=\"setImageList\"\n        :maxImgsNum=\"6\"\n        :imgSize=\"2048\"\n        :width=\"800\"\n        :height=\"800\"/> -->\n    <draggable v-model=\"imageList\" @update=\"datadragEnd\" @start=\"datadragStart\" class=\"bl-draggable-wrap\">\n      <transition-group>\n        <div class=\"bl-upload-wrap\" \n          v-for=\"(item, idx) of imageList\" \n          @click=\"setItemIdx(idx)\" \n          :key=\"item.imageUrl\">\n          <el-upload\n            :class=\"imgAspect === 2 ? 'uploader34' : imgAspect === 3 ? 'uploader43' : 'uploader11'\"\n            action=\"\"\n            :show-file-list=\"false\"\n            :before-upload=\"imageUploadReg\"\n            :http-request=\"emitUpload\">\n            <div v-loading=\"imageUploadLoading && currentUpFileIdx == idx\" class=\"upload-img-wrap\">\n              <img v-if=\"item.imageUrl\" :src=\"item.imageUrl\">\n              <i v-else class=\"el-icon-plus\"></i>\n            </div>\n          </el-upload>\n          <div class=\"btn-w\" v-if=\"item.imageUrl && item.imageUrl != ''\"> \n            <span class=\"up-h-i\" \n              @click=\"onPreviewHandel(item.imageUrl)\">\n              <i class=\"el-icon-zoom-in\"></i>\n            </span>\n            <span class=\"up-h-i\" \n              @click=\"deleteUpFile(idx)\">\n              <i class=\"el-icon-delete\"></i>\n            </span>\n            <span class=\"up-h-i\">\n              <i class=\"el-icon-rank\"></i>\n            </span>\n          </div>\n        </div>\n      </transition-group>\n    </draggable>\n    <el-dialog \n      :visible.sync=\"dialogVisible\" \n      append-to-body>\n      <img width=\"100%\" :src=\"bigImageUrl\" alt=\"\"/>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Draggable from 'vuedraggable'\n  import * as qiniu from 'qiniu-js'\n  import config from '@/utils/config'\n  const fileUrlList = {\n    getQiNiuToken: `${config.reqUrl}/foundation/qiniu/auth/file`\n  }\n  export default {\n    props: {\n      // imgAspect 图片宽高比 1表示1:1  2:表示长图 3:4  3: 表示长图 4:3\n      imgAspect: {\n        type: Number,\n        default: 1\n      },\n      // imgSize 图片尺寸限制大小, 单位kb\n      imgSize: {\n        type: Number,\n        default: 0\n      },\n      // 最多上传几张：不传默认不限张数\n      maxImgsNum: {\n        type: Number,\n        default: 0\n      },\n      // 是否检查图片宽度，默认不限\n      width: {\n        type: Number,\n        default: 0\n      },\n      // 是否检查图片高度，默认不限\n      height: {\n        type: Number,\n        default: 0\n      },\n      defaultImages: { // 默认已有的图片\n        type: Array,\n        default: () => []\n      }\n    },\n    data() {\n      return {\n        imageUploadLoading: false,\n        currentUpFileIdx: -1,\n        imageList: [\n          {\n            imageUrl: '',\n            index: 0\n          }\n        ],\n        dialogVisible: false,\n        bigImageUrl: ''\n      }\n    },\n    components: {\n      'draggable': Draggable\n    },\n    watch: {\n      defaultImages: {\n        immediate: true,\n        handler: function(newVal, oldVal) {\n          let images = [...newVal]\n          let imageListTemp = images.filter((item, index) => {\n            item.index = index\n            return item.imageUrl\n          })\n          if(imageListTemp.length < this.maxImgsNum || this.maxImgsNum === 0) {\n            imageListTemp.push({\n              imageUrl: '',\n              index: imageListTemp.length\n            })\n          }\n          this.imageList = imageListTemp\n        }\n      }\n    },\n    methods: {\n      datadragStart() {\n        if(this.imageUploadLoading || this.maxImgsNum === 1) return\n      },\n      datadragEnd(evt) {\n        const imageListTemp = [...this.imageList]\n        let newImageList = imageListTemp.filter((item, index) => {\n          item.index = index\n          return item.imageUrl && item.imageUrl != ''\n        });\n        // 给父组件发送指令\n        this.$emit(\"images-change\", {\n          imageList: newImageList\n        })\n        let imageListItem = {}\n        if(this.maxImgsNum) {\n          // 验证上传图片文件数\n          if(newImageList.length < this.maxImgsNum) {\n            imageListItem.imageUrl = ''\n            imageListItem.index = imageListTemp.length\n            newImageList.push(imageListItem)\n          }\n        }else {\n          imageListItem.imageUrl = ''\n          imageListItem.index = imageListTemp.length\n          newImageList.push(imageListItem)\n        }\n        this.imageList = newImageList\n      },\n      setItemIdx(idx) {\n        if(this.imageUploadLoading) return\n        this.currentUpFileIdx = idx\n      },\n      imageUploadReg (file) {\n        const isPic = file.type === 'image/jpeg' || 'image/png'\n        if (!isPic) {\n          this.$tip.message('图片只能是JPG或PNG格式!', 'warning')\n          return false\n        }\n        let isSizeNum = true\n        if(this.imgSize) {\n          // imgSize：参数有值，对图片大小验证\n          let sizeValiTipStr = ''\n          if(this.imgSize < 1024) {\n            sizeValiTipStr = `${this.imgSize}KB`\n          }else {\n            sizeValiTipStr = `${this.imgSize / 1024}M`\n          }\n          if(file.size > this.imgSize * 1024) {\n            isSizeNum = false\n            this.$tip.message(`图片大小不能超过${sizeValiTipStr}！`, 'warning')\n            return false\n          }\n        }\n        let imgWidthHeightCheck = null\n        if(this.width && this.height) {\n          // 宽和高都检查\n          const that = this\n          imgWidthHeightCheck = new Promise(function(resolve, reject) {\n            let _URL = window.URL || window.webkitURL\n            let img = new Image();\n            img.onload = function() {\n              let valid = img.width == that.width && img.height == that.height\n              valid ? resolve() : reject()\n            }\n            img.src = _URL.createObjectURL(file)\n          }).then(() => {\n            return file\n          }, () => {\n            this.$tip.message(`请上传宽度为: ${that.width}，高度为: ${that.height}像素，大小不超过${sizeValiTipStr}的JPG或PNG图片！`, 'warning')\n            return Promise.reject()\n          })\n        }else if(this.width) {\n          // 只检查宽度\n          const that = this\n          imgWidthHeightCheck = new Promise(function(resolve, reject) {\n            let _URL = window.URL || window.webkitURL\n            let img = new Image();\n            img.onload = function() {\n              let valid = img.width == that.width\n              valid ? resolve() : reject()\n            }\n            img.src = _URL.createObjectURL(file)\n          }).then(() => {\n            return file\n          }, () => {\n            this.$tip.message(`请上传宽度为: ${that.width}像素，大小不超过${sizeValiTipStr}的JPG或PNG图片！`, 'warning')\n            return Promise.reject()\n          })\n        }else if(this.height) {\n          // 只检查高度\n          const that = this\n          imgWidthHeightCheck = new Promise(function(resolve, reject) {\n            let _URL = window.URL || window.webkitURL\n            let img = new Image();\n            img.onload = function() {\n              let valid = img.height == that.height\n              valid ? resolve() : reject()\n            }\n            img.src = _URL.createObjectURL(file)\n          }).then(() => {\n            return file\n          }, () => {\n            this.$tip.message(`请上传高度为: ${that.height}像素，大小不超过${sizeValiTipStr}的JPG或PNG图片！`, 'warning')\n            return Promise.reject()\n          })\n        }\n        if((this.width && this.height) || this.width || this.height) {\n          return isPic && isSizeNum && imgWidthHeightCheck\n        }else {\n          return isPic && isSizeNum\n        }\n      },\n      emitUpload (e) {\n        if(this.maxImgsNum) {\n          if(this.imageList.length > this.maxImgsNum) {\n            this.$tip.message(`最多只能上传${this.maxImgsNum}张图片！`, 'warning')\n            return false\n          }\n        }\n        this.imageUploadLoading = true\n        this.getToken().then((res) => {\n          // 开始上传图片\n          let uploader = qiniu.upload(e.file, res.fileName, res.token)\n          uploader.subscribe({\n            error: () => {\n              this.imageUploadLoading = false\n            },\n            complete: (res) => {\n              this.imageUploadLoading = false\n              const urlImage = `http://retailimg01.benlailife.com/${res.key}`\n              this.imageList[this.currentUpFileIdx].imageUrl = urlImage\n              let newImageList = this.imageList.filter(item => {\n                return item.imageUrl && item.imageUrl != ''\n              })\n              // 给父组件发送指令\n              this.$emit(\"images-change\", {\n                imageList: newImageList\n              })\n              if(this.maxImgsNum) {\n                // 验证上传图片文件数\n                if(newImageList.length < this.maxImgsNum) {\n                  newImageList.push({\n                    index: this.currentUpFileIdx + 1,\n                    imageUrl: ''\n                  })\n                }\n              }else {\n                newImageList.push({\n                  index: this.currentUpFileIdx + 1,\n                  imageUrl: ''\n                })\n              }\n              this.imageList = newImageList\n            },\n            next: res => {\n            }\n          })\n        })\n      },\n      /**\n       * [getToken 通过后台封装的接口获取七牛的token]\n       * @param  {Function} callback [description]\n       * @return {[type]}            [description]\n       */\n      getToken () {\n        return this.$http.post(fileUrlList.getQiNiuToken, {}).then(res => {\n          if (res.code == 0) {\n            let token = res.data.token\n            let fileName = res.data.key\n            return {fileName, token}\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.imageUploadLoading = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      deleteUpFile(idx) {\n        if(this.imageUploadLoading) return\n        this.imageList.splice(idx, 1)\n        let newImageList = this.imageList.filter(item => {\n          return item.imageUrl && item.imageUrl != ''\n        })\n        // 给父组件发送指令\n        this.$emit(\"images-change\", {\n          imageList: newImageList\n        })\n        newImageList.push({\n          index: newImageList.length,\n          imageUrl: ''\n        })\n        newImageList.forEach((item, index) => {\n          item.index = index\n        })\n        this.imageList = newImageList\n      },\n      onPreviewHandel(filePath) {\n        this.bigImageUrl = filePath\n        this.dialogVisible = true\n      }\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Common/File/ImageUpload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('draggable',{staticClass:\"bl-draggable-wrap\",on:{\"update\":_vm.datadragEnd,\"start\":_vm.datadragStart},model:{value:(_vm.imageList),callback:function ($$v) {_vm.imageList=$$v},expression:\"imageList\"}},[_c('transition-group',_vm._l((_vm.imageList),function(item,idx){return _c('div',{key:item.imageUrl,staticClass:\"bl-upload-wrap\",on:{\"click\":function($event){return _vm.setItemIdx(idx)}}},[_c('el-upload',{class:_vm.imgAspect === 2 ? 'uploader34' : _vm.imgAspect === 3 ? 'uploader43' : 'uploader11',attrs:{\"action\":\"\",\"show-file-list\":false,\"before-upload\":_vm.imageUploadReg,\"http-request\":_vm.emitUpload}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.imageUploadLoading && _vm.currentUpFileIdx == idx),expression:\"imageUploadLoading && currentUpFileIdx == idx\"}],staticClass:\"upload-img-wrap\"},[(item.imageUrl)?_c('img',{attrs:{\"src\":item.imageUrl}}):_c('i',{staticClass:\"el-icon-plus\"})])]),_vm._v(\" \"),(item.imageUrl && item.imageUrl != '')?_c('div',{staticClass:\"btn-w\"},[_c('span',{staticClass:\"up-h-i\",on:{\"click\":function($event){return _vm.onPreviewHandel(item.imageUrl)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),_vm._v(\" \"),_c('span',{staticClass:\"up-h-i\",on:{\"click\":function($event){return _vm.deleteUpFile(idx)}}},[_c('i',{staticClass:\"el-icon-delete\"})]),_vm._v(\" \"),_c('span',{staticClass:\"up-h-i\"},[_c('i',{staticClass:\"el-icon-rank\"})])]):_vm._e()],1)}),0)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible,\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.bigImageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-09ccbe57\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Common/File/ImageUpload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-09ccbe57\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!style-resources-loader?{\\\"patterns\\\":\\\"/Users/zhanyizhu/Desktop/projects/blx-code/supplier_web/src/assets/style/base.less\\\"}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ImageUpload.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09ccbe57\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ImageUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Common/File/ImageUpload.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}