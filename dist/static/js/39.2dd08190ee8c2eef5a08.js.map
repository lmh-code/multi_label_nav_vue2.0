{"version":3,"sources":["webpack:///src/components/Activity/StoreAct/TimelyBuy/EditTBPage.vue","webpack:///./src/components/Activity/StoreAct/TimelyBuy/EditTBPage.vue?81e2","webpack:///./src/components/Activity/StoreAct/TimelyBuy/EditTBPage.vue","webpack:///src/components/Activity/StoreAct/TimelyBuy/JoinGoodsTable.vue","webpack:///./src/components/Activity/StoreAct/TimelyBuy/JoinGoodsTable.vue?a694","webpack:///./src/components/Activity/StoreAct/TimelyBuy/JoinGoodsTable.vue"],"names":["reqUrl","numReg","salePriceReg","EditTBPage","data","optType","status","pickerOptions","disabledDate","time","getTime","Date","now","isDisabled","addParamMesg","DIFFCITY","platformId","regionCode","regionName","activityType","activityTypeName","activityName","activityStartDate","activityEndDate","activityCode","activityStoreList","activityStoreGroupList","activityScenes","activeName","scene","label","activityStartTime","activityEndTime","platCityGoodsInfos","checkedList","discount","performanceDate","activityStoresCheckedList","tempConfig","platformCityGoodsId","goodsNo","skuNo","activityGoodsName","preSalePrice","platformCurStock","limitCount","sortNum","sfInStockStr","showTipErrorMsg","hasErrorMsgData","saveErrorMsgList","saveErrTempConfig","goodsName","storeNo","storeName","beforeRouteEnter","to","from","next","params","type","meta","breadcrumbList","name","path","created","this","activityId","$route","query","parseInt","getDetail","components","choose-store","ChooseStore","choose-goods","ChooseGoods","join-goods-table","JoinGoodsTable","excel-add","AddByExcel","methods","_this","utils","$http","post","then","res","code","Error","msg","createGoodsMesg","id","storeGroupVos","length","map","item","performanceDatetime","substr","storeVos","activityScenesTemp","forEach","i","j","slice","platCityGoodsVos","k","disabled","sfInStock","setJoinGoodsMesg","catch","e","$notify","error","title","message","chooseStoreOpen","groupIndex","_params","otherCheckedList","getCheckedStores","$refs","chooseStore","setDefault","chooseGoodsOpen","sceneMsg","activityEndDateTime","parse","$message","warning","chooseGoods","handleTabClick","_val","_scene","tableData","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","value","err","return","_value","joinGoodsTable","setDefaultMesg","confirmChooseStore","confirmChooseGoods","activityGoodsCheckedList","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","deleteStoreItem","row","erpStoreNo","checkedStoreList","filter","deleteGoodsItem","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","setDefaultChecked","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","doSaveHandel","_this2","activityStartDateNum","replace","activityEndDateNum","idx","index","storeNoList","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","sceneName","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_item","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","goodsItem","groupPrice","test","parseFloat","price","limitGoodsCount","curStock","push","startTimeArr","endTimeArr","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_item2","concat","requestUrl","extends_default","setTimeout","typeof_default","$alert","dangerouslyUseHTMLString","showCancelButton","cancelButtonText","showConfirmButton","confirmButtonText","downLoadSaveErrorMsg","success","$router","doCancelHandel","_this3","$confirm","doAddStoreGroupHandel","doMinusStoreGroupHandel","splice","excludeIdx","allCheckedStores","toConsumableArray_default","showExcelBatchInsertDialog","excelAdd","val","setDefaultMsg","doConfirmHandel","_this4","excelDataList","dataList","closeDisabled","closeDialog","some","msgType","checkedListTemp","goodsId","hash","reduceRight","downLoadErrorMsg","_this5","downloadExcelConfig","msgTypeStr","tHeader","filterVal","exportExcel","ExportJsonToExcel","header","filename","_this6","beforeRouteLeave","keepAlive","TimelyBuy_EditTBPage","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","required","staticStyle","color","font-size","font-weight","_v","_s","size","callback","$$v","$set","expression","_e","placeholder","clearable","format","value-format","picker-options","_l","key","class","icon","on","click","$event","empty-text","max-height","min-width","scopedSlots","_u","fn","scope","erpStoreName","prop","align","width","circle","tab-click","slot","visible","close-on-click-modal","close-on-press-escape","update:visible","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","defaultSelectFun","handleSelect","checkedListTempArr","$emit","handleSelectAll","checkedListArr","rows","activityTimes","groupCount","limitGroupType","multipleTable","clearSelection","rowItem","toggleRowSelection","sfInStockHeader","h","placement","trigger","_row","TimelyBuy_JoinGoodsTable","directives","rawName","select","select-all","imgUrl","src","alt","onerror","render-header","fixed","_m"],"mappings":"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","file":"static/js/39.2dd08190ee8c2eef5a08.js","sourcesContent":["<style>\r\n  .ll-p-m-w {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n  }\r\n  .ll-img-w {\r\n    width: 60px;\r\n    height: 60px;\r\n  }\r\n  .ll-img-w>img {\r\n    width: 60px;\r\n  }\r\n  .ll-p-m-c-r {\r\n    padding: 0 10px;\r\n  }\r\n  .ll-erp-p-no {\r\n    color: #666;\r\n    font-size: 12px;\r\n  }\r\n  .del-store-icon-w {\r\n    position: absolute;\r\n    top: -8px;\r\n    right: 2px;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .store-pre-time-item-wrap {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n    align-items: center;\r\n  }\r\n  .store-pre-time-item-wrap>.item-left {\r\n    flex: 0 0 90px;\r\n    width: 90px;\r\n    text-align: left;\r\n    margin-left: 20px\r\n  }\r\n  .store-pre-time-item-wrap>.item-right {\r\n    border: 1px solid #ececec;\r\n    border-radius: 8px;\r\n    padding: 8px;\r\n    width: 550px;\r\n    box-sizing: border-box;\r\n  }\r\n</style>\r\n<template>\r\n  <div>\r\n    <div class=\"add-form-wraper\">\r\n      <el-form ref=\"form\" :model=\"addParamMesg\" label-width=\"140px\">\r\n        <el-form-item label=\"活动类型\" required>\r\n          <p style=\"color: #222;font-size: 16px; font-weight: bold;\">{{addParamMesg.activityTypeName}}</p>\r\n        </el-form-item>\r\n        <el-form-item label=\"选择区域\" required>\r\n          <el-input v-model=\"addParamMesg.regionName\" size=\"small\" class=\"add-input\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动编码\" required v-if=\"optType !== 'copy'\">\r\n          <el-input v-model=\"addParamMesg.activityCode\" size=\"small\" class=\"add-input\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动名称\" required>\r\n          <el-input v-model=\"addParamMesg.activityName\" size=\"small\" class=\"add-input\" placeholder=\"请输入活动名称\" clearable :disabled=\"status === 3 || status === 2\"></el-input>\r\n          <span>活动名称,限制30个汉字</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"开始时间\" required>\r\n          <el-date-picker\r\n            :disabled=\"status === 3 || status === 2\"\r\n            class=\"add-input\"\r\n            v-model=\"addParamMesg.activityStartDate\"\r\n            type=\"date\"\r\n            placeholder=\"请选择活动开始时间\"\r\n            format=\"yyyy-MM-dd\"\r\n            value-format=\"yyyy-MM-dd\"\r\n            size=\"small\"\r\n            :picker-options=\"pickerOptions\">\r\n          </el-date-picker>\r\n          <span>活动开始时间</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"结束时间\" required>\r\n          <el-date-picker\r\n            :disabled=\"status === 3 || status === 2\"\r\n            class=\"add-input\"\r\n            v-model=\"addParamMesg.activityEndDate\"\r\n            type=\"date\"\r\n            placeholder=\"请选择活动结束时间\"\r\n            format=\"yyyy-MM-dd\"\r\n            value-format=\"yyyy-MM-dd\"\r\n            size=\"small\"\r\n            :picker-options=\"pickerOptions\">\r\n          </el-date-picker>\r\n          <span>活动结束时间</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"门店/履约时间\" required>\r\n          <div class=\"store-pre-time-item-wrap\" :class=\"index > 0 ? 'mt10' : null\" v-for=\"(item, index) of activityStoreGroupList\" :key=\"index\">\r\n            <div class=\"item-right\">\r\n              <div>\r\n                <span>参与门店</span>\r\n                <el-button size=\"small\" @click=\"chooseStoreOpen(index)\" icon=\"el-icon-plus\"  :disabled=\"status === 3 || status === 2\">选择门店</el-button>\r\n                <div v-if=\"item.activityStoresCheckedList.length > 0\">\r\n                  <el-table\r\n                    class=\"fixed-height\"\r\n                    :data=\"item.activityStoresCheckedList\"\r\n                    empty-text=\"暂无选中任何门店\"\r\n                    max-height=\"250\"\r\n                    size=\"small\">\r\n                    <el-table-column min-width=\"220px\" label=\"门店编码/名称\">\r\n                      <template slot-scope=\"scope\">\r\n                        <div>\r\n                          {{scope.row.erpStoreNo}}_{{scope.row.erpStoreName}}\r\n                        </div>\r\n                      </template>\r\n                    </el-table-column>\r\n                    <el-table-column min-width=\"80\" prop=\"cityName\" label=\"城市\"></el-table-column>\r\n                    <el-table-column min-width=\"80\" prop=\"saleTypeName\" label=\"门店类型\"></el-table-column>\r\n                    <el-table-column\r\n                      align=\"center\"\r\n                      label=\"操作\"\r\n                      width=\"100\">\r\n                      <template slot-scope=\"scope\" size=\"small\">\r\n                        <el-button @click=\"deleteStoreItem(index, scope.row)\" type=\"text\" size=\"mini\" icon=\"el-icon-delete\" :disabled=\"status === 3 || status === 2\">删除</el-button>\r\n                      </template>\r\n                    </el-table-column>\r\n                  </el-table>\r\n                </div>\r\n              </div>\r\n              <div class=\"mt10\">\r\n                <span>履约时间</span>\r\n                <el-date-picker\r\n                  :disabled=\"status === 3 || status === 2\"\r\n                  class=\"search-input\"\r\n                  v-model=\"item.performanceDate\"\r\n                  type=\"date\"\r\n                  placeholder=\"请选择履约时间\"\r\n                  format=\"yyyy-MM-dd\"\r\n                  value-format=\"yyyy-MM-dd\"\r\n                  size=\"small\"\r\n                  :picker-options=\"pickerOptions\">\r\n                </el-date-picker>\r\n                <span>门店仅支持自提则为自提时间</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"item-left\">\r\n              <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" circle @click=\"doAddStoreGroupHandel\" :disabled=\"status === 3 || status === 2\"></el-button>\r\n              &nbsp;\r\n              <el-button size=\"mini\" icon=\"el-icon-minus\" circle v-if=\"activityStoreGroupList.length > 1\" @click=\"doMinusStoreGroupHandel(index)\" :disabled=\"status === 3 || status === 2\"></el-button>\r\n            </div>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"参与商品\" required>\r\n          <el-tabs v-model=\"activeName\" @tab-click=\"handleTabClick\">\r\n            <el-tab-pane :name=\"item.activeName\" v-for=\"(item, idx) in activityScenes\" :key=\"idx\">\r\n              <span slot=\"label\">\r\n                {{item.label}} \r\n                <span v-if=\"item.activityStartTime && item.activityEndTime\">\r\n                  {{item.activityStartTime}}-{{item.activityEndTime}}\r\n                </span>\r\n              </span>\r\n\r\n              <span>\r\n                开始时间:\r\n              </span>\r\n              <el-time-picker\r\n                v-model=\"item.activityStartTime\"\r\n                :disabled=\"status === 3 || status === 2\"\r\n                format=\"HH:mm\"\r\n                value-format=\"HH:mm\"\r\n                class=\"add-input-inline\"\r\n                size=\"small\" \r\n                clearable\r\n                placeholder=\"开始时间\">\r\n              </el-time-picker>\r\n              \r\n              <span>\r\n                结束时间:\r\n              </span>\r\n              <el-time-picker\r\n                v-model=\"item.activityEndTime\"\r\n                :disabled=\"status === 3 || status === 2\"\r\n                format=\"HH:mm\"\r\n                class=\"add-input-inline\"\r\n                value-format=\"HH:mm\"\r\n                size=\"small\" \r\n                clearable\r\n                placeholder=\"结束时间\"\r\n                :picker-options=\"pickerOptions\">\r\n              </el-time-picker>\r\n\r\n              <el-button size=\"small\" type=\"primary\" @click=\"chooseGoodsOpen(item)\" icon=\"el-icon-plus\">选择商品</el-button>\r\n              <el-button v-if=\"status !== 3 && status !== 2\" @click=\"showExcelBatchInsertDialog(item)\" size=\"mini\" icon=\"el-icon-plus\">Excel批量导入</el-button>\r\n            </el-tab-pane>\r\n            \r\n            <join-goods-table ref=\"joinGoodsTable\" @deleteGoodsItem=\"deleteGoodsItem\" @setDefaultChecked=\"setDefaultChecked\"></join-goods-table>\r\n          </el-tabs>\r\n        </el-form-item>\r\n\r\n        <hr class=\"s-slip-tb\">\r\n        <el-form-item>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\" :icon=\"isDisabled ? 'el-icon-loading' : null\">保存</el-button>\r\n          <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 选择门店 -->\r\n    <div>\r\n      <choose-store ref=\"chooseStore\" @confirmChooseStore=\"confirmChooseStore\"></choose-store>\r\n    </div>\r\n    <!-- 选择商品 -->\r\n    <div>\r\n      <choose-goods ref=\"chooseGoods\" @confirmChooseGoods=\"confirmChooseGoods\"></choose-goods>\r\n    </div>\r\n    <excel-add ref=\"excelAdd\" @doConfirmHandel=\"doConfirmHandel\"></excel-add>\r\n    <el-dialog \r\n      title=\"批量导入失败\" \r\n      :visible.sync=\"showTipErrorMsg\" \r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      width='450px'>\r\n      <div>\r\n        部分商品不符合要求，请按要求修改后再重新导入。<el-button type=\"text\" size=\"mini\" @click=\"downLoadErrorMsg\">下载查看失败原因</el-button>\r\n      </div>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showTipErrorMsg = false\" size=\"mini\">关 闭</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import * as utils from '@/utils/utils'\r\n  import exportSheet from '@/utils/exportExcel'\r\n  import ChooseStore from \"@/components/Activity/Common/ChooseStore\"\r\n  import ChooseGoods from \"@/components/Activity/Common/ChooseGoods\"\r\n  import JoinGoodsTable from \"./JoinGoodsTable\"\r\n  import AddByExcel from \"@/components/Common/Excel/AddByExcel\"\r\n  const reqUrl = {\r\n    // 校验新增预售商品\r\n    checkPreGoodsInsert: '/plateform/a/preSale/goods/checkPreGoodsInsert',\r\n    // 活动规则编辑跳转\r\n    edit: \"/plateform/a/activityRule/edit\",\r\n    // 修改活动规则\r\n    update: \"/plateform/a/activityRule/update\",\r\n    // 新增活动规则\r\n    add: \"/plateform/a/activityRule/add\"\r\n  }\r\n  const numReg = /^[1-9]*[1-9][0-9]*$/\r\n  const salePriceReg = /((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$/\r\n  const salePriceOnePointReg = /((^[1-9]\\d*))(\\.\\d{0,1}){0,1}$/\r\n  export default {\r\n    data() {\r\n      return {\r\n        optType: '', // 此页面操作类型  edit  编辑   copy  复制\r\n        status: 0,\r\n        pickerOptions: {\r\n          disabledDate(time) {\r\n            return time.getTime() < Date.now() - 8.64e7; // 如果没有后面的-8.64e7就是不可以选择今天的\r\n          }\r\n        }, \r\n        isDisabled: false,\r\n        addParamMesg: {\r\n          DIFFCITY: true,\r\n          platformId: 5,\r\n          regionCode: '',\r\n          regionName: '',\r\n          activityType: '', // 活动类型\r\n          activityTypeName: '', // 活动类型名称\r\n          activityName: '', // 活动名称\r\n          activityStartDate: '', // 活动开始时间\r\n          activityEndDate: '', // 活动结束时间\r\n          activityCode: '', // 活动编码\r\n          // 参与门店 秒杀中此字段没用，但是后端有非空验证，所以希望前端加上，故此处把所有门店分组中的门店编号传入\r\n          activityStoreList: [],\r\n          // 活动门店分组集合\r\n          activityStoreGroupList: [],\r\n          // 活动场次集合\r\n          activityScenes: []\r\n        },\r\n        // 默认选中的场次\r\n        activeName: 'first',\r\n        scene: 1,\r\n        // secnce 1 第一场 2 第二场 3 第三场 4 第四场 \r\n        activityScenes: [\r\n          {\r\n            scene: 1, \r\n            activeName: 'first',\r\n            label: '第一场',\r\n            // 开始时间 格式：HH:mm:ss\r\n            activityStartTime: '',\r\n            // 结束时间 格式：HH:mm:ss\r\n            activityEndTime: '',\r\n            // 活动商品集合\r\n            platCityGoodsInfos: [],\r\n            // 当前选中的商品用于批量设置价格\r\n            checkedList: [],\r\n            // 批量修改折扣\r\n            discount: ''\r\n          },\r\n          {\r\n            scene: 2,\r\n            activeName: 'second', \r\n            label: '第二场',\r\n            // 开始时间 格式：HH:mm:ss\r\n            activityStartTime: '',\r\n            // 结束时间 格式：HH:mm:ss\r\n            activityEndTime: '',\r\n            // 活动商品集合\r\n            platCityGoodsInfos: [],\r\n            // 当前选中的商品用于批量设置价格\r\n            checkedList: [],\r\n            // 批量修改折扣\r\n            discount: ''\r\n          },\r\n          {\r\n            scene: 3, \r\n            activeName: 'third', \r\n            label: '第三场',\r\n            // 开始时间 格式：HH:mm:ss\r\n            activityStartTime: '',\r\n            // 结束时间 格式：HH:mm:ss\r\n            activityEndTime: '',\r\n            // 活动商品集合\r\n            platCityGoodsInfos: [],\r\n            // 当前选中的商品用于批量设置价格\r\n            checkedList: [],\r\n            // 批量修改折扣\r\n            discount: ''\r\n          },\r\n          {\r\n            scene: 4, \r\n            activeName: 'fourth', \r\n            label: '第四场',\r\n            // 开始时间 格式：HH:mm:ss\r\n            activityStartTime: '',\r\n            // 结束时间 格式：HH:mm:ss\r\n            activityEndTime: '',\r\n            // 活动商品集合\r\n            platCityGoodsInfos: [],\r\n            // 当前选中的商品用于批量设置价格\r\n            checkedList: [],\r\n            // 批量修改折扣\r\n            discount: ''\r\n          }\r\n        ],\r\n        // 参与门店与履约时间\r\n        activityStoreGroupList: [\r\n          {\r\n            performanceDate: '', // 履约时间\r\n            activityStoresCheckedList: [] // 选中的门店\r\n          }\r\n        ],\r\n        tempConfig: {\r\n          platformCityGoodsId: '区域商品id(必填)',\r\n          goodsNo: 'SKU编码(选填)',\r\n          skuNo: 'ERP商品编码(选填)',\r\n          activityGoodsName: '活动商品名称(可修改，必填)',\r\n          preSalePrice: '活动价(必填)',\r\n          platformCurStock: '活动库存（必填）',\r\n          limitCount: '每人每期限购(选填，为空时不限)',\r\n          sortNum: '排序(必填)',\r\n          sfInStockStr: '顺丰仓现货（选填，填是/否，空时为是）'\r\n        },\r\n        // 显示下载含有失败原因的excel\r\n        showTipErrorMsg: false, \r\n        // 后台返回的又失败原因的内容\r\n        hasErrorMsgData: [],\r\n        saveErrorMsgList: [],\r\n        saveErrTempConfig: {\r\n          skuNo: 'ERP商品编码',\r\n          goodsName: '商品名称',\r\n          storeNo: '门店编码',\r\n          storeName: '门店名称',\r\n        }\r\n      }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n      if(to.params.type === 'edit') {\r\n        to.meta.breadcrumbList = [\r\n          {name: '营销活动', path: ''},\r\n          {name: '店铺活动', path: '/store_act'},\r\n          {name: '编辑活动', path: ''}\r\n        ]\r\n      }else if(to.params.type === 'copy') {\r\n        to.meta.breadcrumbList = [\r\n          {name: '营销活动', path: ''},\r\n          {name: '店铺活动', path: '/store_act'},\r\n          {name: '复制活动', path: ''}\r\n        ]\r\n      }\r\n      next()\r\n    },\r\n    created() {\r\n      this.addParamMesg.activityId = this.$route.params.activityId\r\n      this.optType = this.$route.params.type\r\n      this.status = this.$route.query.status ? parseInt(this.$route.query.status) : 0\r\n      this.getDetail()\r\n    },\r\n    components: {\r\n      \"choose-store\": ChooseStore,\r\n      \"choose-goods\": ChooseGoods,\r\n      \"join-goods-table\": JoinGoodsTable,\r\n      \"excel-add\": AddByExcel\r\n    },\r\n    methods: {\r\n      /**\r\n       * [getDetail 获取活动详情]\r\n       * @return {[type]} [description]\r\n       */\r\n      getDetail() {\r\n        let activityId = this.addParamMesg.activityId || ''\r\n        utils.showLoading()\r\n        this.$http.post(reqUrl.edit, {activityId: activityId, DIFFCITY: true}).then(res => {\r\n          utils.clearLoading()\r\n          if(res.code === 0) {\r\n            if(res.data) {\r\n              let createGoodsMesg = res.data\r\n              this.addParamMesg.id = createGoodsMesg.id\r\n              this.addParamMesg.activityId = createGoodsMesg.id\r\n              this.addParamMesg.regionCode = createGoodsMesg.regionCode || ''\r\n              this.addParamMesg.regionName = createGoodsMesg.regionName || ''\r\n              this.addParamMesg.activityType = createGoodsMesg.activityType || ''\r\n              this.addParamMesg.activityTypeName = createGoodsMesg.activityTypeName || ''\r\n              this.addParamMesg.activityName = createGoodsMesg.activityName || ''\r\n              this.addParamMesg.activityStartDate = createGoodsMesg.activityStartDate || ''\r\n              this.addParamMesg.activityEndDate = createGoodsMesg.activityEndDate || ''\r\n              this.addParamMesg.performanceDate = createGoodsMesg.performanceDate || ''\r\n              this.addParamMesg.activityCode = createGoodsMesg.activityCode || ''\r\n              // 处理选中的门店\r\n              this.activityStoreGroupList = createGoodsMesg.storeGroupVos && createGoodsMesg.storeGroupVos.length ? createGoodsMesg.storeGroupVos.map(item => {\r\n                return {\r\n                  performanceDate: item.performanceDatetime ? item.performanceDatetime.substr(0, 10) : '',\r\n                  activityStoresCheckedList: item.storeVos\r\n                }\r\n              }) : [{\r\n                performanceDate: '',\r\n                activityStoresCheckedList: []\r\n              }]\r\n              // 处理参与商品数据\r\n              if(createGoodsMesg.activityScenes && createGoodsMesg.activityScenes.length) {\r\n                let activityScenesTemp = createGoodsMesg.activityScenes\r\n                this.activityScenes.forEach(i => {\r\n                  activityScenesTemp.forEach(j => {\r\n                    if(i.scene === j.scene) {\r\n                      i.activityStartTime = j.activityStartTime.slice(0, 5)\r\n                      i.activityEndTime = j.activityEndTime.slice(0, 5)\r\n                      j.platCityGoodsVos.forEach(k => {\r\n                        k.disabled = this.status === 3 || this.status === 2 ? true : false\r\n                        k.sfInStock = k.sfInStock\r\n                      })\r\n                      i.platCityGoodsInfos = j.platCityGoodsVos\r\n                    }\r\n                  })\r\n                })\r\n              }\r\n              this.setJoinGoodsMesg(this.scene)\r\n            }\r\n            return\r\n          }\r\n          throw new Error(res.msg)\r\n        }).catch(e => {\r\n          utils.clearLoading()\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: e.message\r\n          })\r\n        })\r\n      },\r\n      /**\r\n       * [chooseStoreOpen 选择门店]\r\n       * @return {[type]} [description]\r\n       */\r\n      chooseStoreOpen(groupIndex) {\r\n        let _params = {\r\n          title: '选择门店',\r\n          platformId: this.addParamMesg.platformId,\r\n          regionCode: this.addParamMesg.regionCode,\r\n          groupIndex: groupIndex,\r\n          checkedList: this.activityStoreGroupList[groupIndex].activityStoresCheckedList,\r\n          otherCheckedList: this.getCheckedStores(groupIndex)\r\n        }\r\n        this.$refs.chooseStore.setDefault(_params)\r\n      },\r\n      /**\r\n       * [chooseGoodsOpen 选择商品]\r\n       * @return {[type]} [description]\r\n       */\r\n      chooseGoodsOpen(sceneMsg) {\r\n        // 进行中活动添加商品加强校验\r\n        if(sceneMsg.activityEndTime && this.status === 3) {\r\n          let activityEndDateTime = `${utils.dateFormat(\"yyyy-MM-dd\", Date.parse(new Date()))} ${sceneMsg.activityEndTime}:00`\r\n          if(utils.changeDateToTimestamp(activityEndDateTime) <= Date.parse(new Date())) {\r\n            this.$message.warning(\"今天该场次的秒杀活动已结束，不可再添加商品\")\r\n            return\r\n          }\r\n        }\r\n        if(!sceneMsg.activityStartTime || !sceneMsg.activityEndTime) {\r\n          this.$message.warning(\"请先选择本场次的开始时间和结束时间\")\r\n          return\r\n        }\r\n        let params = {\r\n          title: '选择商品',\r\n          regionCode: this.addParamMesg.regionCode,\r\n          checkedList: sceneMsg.platCityGoodsInfos\r\n        }\r\n        this.$refs.chooseGoods.setDefault(params)\r\n      },\r\n\r\n       /**\r\n       * [handleTabClick tab点击切换]\r\n       */\r\n      handleTabClick(_val) {\r\n        if(_val.name == 'first') {\r\n          this.scene = 1\r\n        }else if(_val.name == 'second') {\r\n          this.scene = 2\r\n        }else if(_val.name == 'third') {\r\n          this.scene = 3\r\n        }else if(_val.name == 'fourth') {\r\n          this.scene = 4\r\n        }\r\n\r\n        this.activeName = _val.name\r\n        this.setJoinGoodsMesg(this.scene)\r\n      },\r\n      /**\r\n       * [setJoinGoodsMesg 设置表格组件数据]\r\n       * @param {[type]} _scene [description]\r\n       */\r\n      setJoinGoodsMesg(_scene) {\r\n        let tableData = []\r\n        let checkedList = []\r\n\r\n        for(let item of this.activityScenes) {\r\n          if(item.scene === _scene) {\r\n            tableData = item.platCityGoodsInfos\r\n            checkedList = item.checkedList\r\n          }\r\n        }\r\n\r\n        let _value = {\r\n          scene: _scene,\r\n          checkedList: checkedList,\r\n          tableData: tableData\r\n        }\r\n        this.$refs.joinGoodsTable.setDefaultMesg(_value)\r\n      },\r\n      /**\r\n       * [confirmChooseStore 选中的门店]\r\n       * @param  {[type]} _value [description]\r\n       * @return {[type]}        [description]\r\n       */\r\n      confirmChooseStore(_value) {\r\n        let activityStoresCheckedList = _value.checkedList || []\r\n        let groupIndex = _value.groupIndex || 0\r\n        this.activityStoreGroupList[groupIndex].activityStoresCheckedList = activityStoresCheckedList\r\n      },\r\n      /**\r\n       * [confirmChooseStore 选中的商品]\r\n       * @param  {[type]} _value [description]\r\n       * @return {[type]}        [description]\r\n       */\r\n      confirmChooseGoods(_value) {\r\n        let activityGoodsCheckedList = []\r\n        if(_value.checkedList && _value.checkedList.length) {\r\n          activityGoodsCheckedList = _value.checkedList\r\n        }else {\r\n          activityGoodsCheckedList = []\r\n        }\r\n        for(let item of this.activityScenes) {\r\n          if(item.scene === this.scene) {\r\n            item.platCityGoodsInfos = activityGoodsCheckedList\r\n          }\r\n        }\r\n        this.setJoinGoodsMesg(this.scene)\r\n      },\r\n      /**\r\n       * [deleteItem 删除选中的门店]\r\n       * @param  {[type]} row [description]\r\n       * @return {[type]}      [description]\r\n       */\r\n      deleteStoreItem(groupIndex, row) {\r\n        let erpStoreNo = row.erpStoreNo\r\n        let checkedStoreList = this.activityStoreGroupList[groupIndex].activityStoresCheckedList\r\n\r\n        this.activityStoreGroupList[groupIndex].activityStoresCheckedList = checkedStoreList.filter(item => {\r\n          return item.erpStoreNo !== erpStoreNo\r\n        })\r\n      },\r\n      /**\r\n       * [deleteItem 删除选中的商品]\r\n       * @param  {[type]} _row [description]\r\n       * @return {[type]}      [description]\r\n       */\r\n      deleteGoodsItem(_value) {\r\n        let _row = _value.row ? _value.row : {}\r\n        let platformCityGoodsId = _row.platformCityGoodsId\r\n        let scene = _value.scene ? _value.scene : ''\r\n        for(let item of this.activityScenes) {\r\n          if(item.scene === scene) {\r\n            item.platCityGoodsInfos = item.platCityGoodsInfos.filter(j => {\r\n              return j.platformCityGoodsId !== platformCityGoodsId\r\n            })\r\n          }\r\n        }\r\n\r\n        this.setJoinGoodsMesg(scene)\r\n      },\r\n      /**\r\n       * [setDefaultChecked 给选中的商品默认赋值]\r\n       * @param {[type]} _value [description]\r\n       */\r\n      setDefaultChecked(_value) {\r\n        let checkedList = _value.checkedList ? _value.checkedList : {}\r\n        let scene = _value.scene ? _value.scene : ''\r\n        for(let item of this.activityScenes) {\r\n          if(item.scene === scene) {\r\n            item.checkedList = checkedList\r\n          }\r\n        }\r\n      },\r\n      /**\r\n       * [doSaveHandel 保存]\r\n       * @return {[type]} [description]\r\n       */\r\n      doSaveHandel() {\r\n        if(!this.addParamMesg.activityName) {\r\n          this.$message(\"请输入活动名称\")\r\n          return\r\n        }else if(this.addParamMesg.activityName.length > 30) {\r\n          this.$message(\"活动名称限制30个汉字\")\r\n          return\r\n        }\r\n        if(!this.addParamMesg.activityStartDate) {\r\n          this.$message(\"请输入活动开始时间\")\r\n          return\r\n        }\r\n        if(!this.addParamMesg.activityEndDate) {\r\n          this.$message(\"请输入活动结束时间\")\r\n          return\r\n        }\r\n        // 根据后台要求传递日期参数是带上时分秒\r\n        if(!this.addParamMesg.activityStartDate.substr(11)) {\r\n          this.addParamMesg.activityStartDate = this.addParamMesg.activityStartDate + ' 00:00:00'\r\n        }\r\n        if(!this.addParamMesg.activityEndDate.substr(11)) {\r\n          this.addParamMesg.activityEndDate = this.addParamMesg.activityEndDate + ' 23:59:59'\r\n        }\r\n        \r\n        let activityStartDateNum = Date.parse(new Date(this.addParamMesg.activityStartDate.replace(/\\-/g, '/')))\r\n        let activityEndDateNum = Date.parse(new Date(this.addParamMesg.activityEndDate.replace(/\\-/g, '/')))\r\n        let currentDateNum = new Date().getTime()\r\n        if(activityEndDateNum < currentDateNum) {\r\n          this.$message(\"活动结束时间不能早于当前时间\")\r\n          return\r\n        }\r\n        if(activityStartDateNum > activityEndDateNum) {\r\n          this.$message(\"活动结束时间不能早于开始时间\")\r\n          return\r\n        }\r\n\r\n        this.addParamMesg.activityStoreGroupList = this.activityStoreGroupList.map((i, idx) => {\r\n          return {\r\n            index: idx,\r\n            performanceDate: i.performanceDate,\r\n            storeNoList: i.activityStoresCheckedList.map(k => {\r\n              return k.erpStoreNo\r\n            })\r\n          }\r\n        })\r\n        for(let item of this.addParamMesg.activityStoreGroupList) {\r\n          if(!item.storeNoList || !item.storeNoList.length) {\r\n            this.$message(`请选择参与门店/履约时间组中【第${item.index + 1}组】的参与门店`)\r\n            return\r\n          }\r\n          if(item.performanceDate) {\r\n            let performanceDateNum = Date.parse(new Date(`${item.performanceDate} 23:59:59`.replace(/\\-/g, '/')))\r\n            if(activityEndDateNum > performanceDateNum) {\r\n              this.$message(`参与门店/履约时间组中【第${item.index + 1}组】的履约时间不能早于活动结束时间`)\r\n              return\r\n            }\r\n            item.performanceDatetime = `${item.performanceDate} 23:59:59`\r\n          }else {\r\n            this.$message(`请选择参与门店/履约时间组中【第${item.index + 1}组】的履约时间`)\r\n            return\r\n          }\r\n        }\r\n        this.addParamMesg.activityStoreList = this.getCheckedStores().map(item => {\r\n          return item.erpStoreNo\r\n        })\r\n\r\n        let sceneName = ''\r\n        let activityScenesTemp = []\r\n        for(let item of this.activityScenes) {\r\n          if(item.scene === 1) {\r\n            sceneName = '第一场'\r\n          }else if(item.scene === 2) {\r\n            sceneName = '第二场'\r\n          }else if(item.scene === 3) {\r\n            sceneName = '第三场'\r\n          }else if(item.scene === 4) {\r\n            sceneName = '第四场'\r\n          }\r\n\r\n          if(!item.activityStartTime) {\r\n            item.activityStartTime = ''\r\n          }\r\n          if(!item.activityEndTime) {\r\n            item.activityEndTime = ''\r\n          }\r\n          if(item.platCityGoodsInfos && item.platCityGoodsInfos.length) {\r\n            if(!item.activityStartTime || !item.activityEndTime) {\r\n              this.$message(`请选择【${sceneName}】的开始时间和结束时间`)\r\n              return\r\n            }\r\n            if(utils.changeStrToMinutes(item.activityEndTime) <= utils.changeStrToMinutes(item.activityStartTime)) {\r\n              this.$message(`请选择【${sceneName}】的结束时间必须晚于开始时间`)\r\n              return\r\n            }\r\n        \r\n            for(let goodsItem of item.platCityGoodsInfos) {\r\n              if(!goodsItem.goodsName) {\r\n                this.$message(`请输入【${sceneName}】中(${goodsItem.goodsName})的活动商品名称`)\r\n                return\r\n              }\r\n              if(!goodsItem.groupPrice) {\r\n                this.$message(`请输入【${sceneName}】中(${goodsItem.goodsName})的活动价`)\r\n                return\r\n              }else if(!salePriceReg.test(goodsItem.groupPrice)) {\r\n                this.$message(`【${sceneName}】中(${goodsItem.goodsName})的活动价是大于0，小数保留小数点后2位`)\r\n                return\r\n              }else {\r\n                if(parseFloat(goodsItem.groupPrice) == '0.00') {\r\n                  this.$message(`【${sceneName}】中(${goodsItem.goodsName})的活动价是大于0，小数保留小数点后2位`)\r\n                  return\r\n                }\r\n              }\r\n              if(parseFloat(goodsItem.groupPrice) > goodsItem.price) {\r\n                this.$message(`【${sceneName}】中(${goodsItem.goodsName})的活动价必须小于或等于原价`)\r\n                return\r\n              }\r\n              if(goodsItem.limitGoodsCount) {\r\n                if(!numReg.test(goodsItem.limitGoodsCount)) {\r\n                  this.$message(`【${sceneName}】中(${goodsItem.goodsName})的限购数量为大于零的正整数`)\r\n                  return\r\n                }\r\n              }\r\n              if(!goodsItem.curStock) {\r\n                this.$message(`请输入【${sceneName}】中(${goodsItem.goodsName})的活动库存`)\r\n                return\r\n              }else if(!numReg.test(goodsItem.curStock)) {\r\n                this.$message(`【${sceneName}】中(${goodsItem.goodsName})的活动库存为大于零的正整数`)\r\n                return\r\n              }\r\n              if(!goodsItem.sortNum) {\r\n                this.$message(`请输入【${sceneName}】中(${goodsItem.goodsName})的排序权重`)\r\n                return\r\n              }else {\r\n                if(!numReg.test(goodsItem.sortNum)) {\r\n                  this.$message(`【${sceneName}】中(${goodsItem.goodsName})的排序权重为1—100正整数`)\r\n                  return\r\n                }else {\r\n                  if(goodsItem.sortNum < 1 || goodsItem.sortNum > 100) {\r\n                    this.$message(`【${sceneName}】中(${goodsItem.goodsName})的排序权重为1—100正整数`)\r\n                    return\r\n                  }\r\n                }\r\n              }\r\n              goodsItem.activityStartDate = this.addParamMesg.activityStartDate\r\n              goodsItem.activityEndDate = this.addParamMesg.activityEndDate\r\n              goodsItem.activityStartTime = item.activityStartTime\r\n              goodsItem.activityEndTime = item.activityEndTime\r\n            }\r\n            activityScenesTemp.push(item)\r\n          }\r\n        }\r\n        \r\n        let startTimeArr = []\r\n        let endTimeArr = []\r\n        for(let item of activityScenesTemp) {\r\n          startTimeArr.push(utils.changeStrToMinutes(item.activityStartTime))\r\n          endTimeArr.push(utils.changeStrToMinutes(item.activityEndTime))\r\n        }\r\n\r\n        if(!utils.compareDate(startTimeArr, endTimeArr)) {\r\n          this.$message(\"活动各场次的开始时间和结束时间有冲突\")\r\n          return\r\n        }\r\n\r\n        this.addParamMesg.activityScenes = [...activityScenesTemp]\r\n        if(this.addParamMesg.activityScenes.length === 0) {\r\n          this.$message(\"请选择参与商品\")\r\n          return\r\n        }\r\n        let requestUrl = ''\r\n        if(this.optType === 'edit') {\r\n          requestUrl = reqUrl.update\r\n        }else if(this.optType === 'copy') {\r\n          requestUrl = reqUrl.add\r\n          delete this.addParamMesg.activityId\r\n          delete this.addParamMesg.id\r\n        }else {\r\n          this.$message(\"操作类型不匹配\")\r\n          return\r\n        }\r\n        this.isDisabled = true\r\n        this.$http.post(requestUrl, {...this.addParamMesg}).then(res => {\r\n          // 保存按钮可再次点击\r\n          setTimeout(() => {\r\n            this.isDisabled = false\r\n          }, 800)\r\n          if(res.code === 0) {\r\n            if(res.data && typeof(res.data) === 'object' && res.data.length > 0) {\r\n              this.$alert(\"<div><p>活动保存成功</p><p style='color: red;'>有商品在门店线上不可售</p></div>\", '温馨提示', {\r\n                dangerouslyUseHTMLString: true,\r\n                showCancelButton: true,\r\n                cancelButtonText: \"下载明细\",\r\n                showConfirmButton: true,\r\n                confirmButtonText: '关闭'\r\n              }).then(() => {}).catch(() => {\r\n                this.saveErrorMsgList = res.data\r\n                this.downLoadSaveErrorMsg()\r\n              });\r\n            }else {\r\n              this.$message.success(\"保存成功\")\r\n              this.$router.push('/store_act')\r\n            }\r\n            return\r\n          }\r\n          throw new Error(res.msg)\r\n        }).catch(e => {\r\n          this.isDisabled = false\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: e.message\r\n          })\r\n        })\r\n      },\r\n      doCancelHandel() {\r\n        this.$confirm('确定取消吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.push('/store_act')\r\n        }).catch(() => {})\r\n      },\r\n      /**\r\n       * @description: 添加分组\r\n       * @param {type} \r\n       * @return: \r\n       */\r\n      doAddStoreGroupHandel() {\r\n        let groupItem = {\r\n          performanceDate: '',\r\n          activityStoresCheckedList: []\r\n        }\r\n        this.activityStoreGroupList.push(groupItem)\r\n      },\r\n      doMinusStoreGroupHandel(index) {\r\n        this.activityStoreGroupList.splice(index, 1)\r\n      },\r\n      /**\r\n       * @description: 计算出所有门店和履约时间分组中已经选中的门店\r\n       * @param {type} \r\n       * @return: \r\n       */\r\n      getCheckedStores(excludeIdx) {\r\n        let allCheckedStores = []\r\n        if(excludeIdx || excludeIdx === 0) {\r\n          this.activityStoreGroupList.forEach((item, idx) => {\r\n            if(idx != excludeIdx) {\r\n              allCheckedStores = [...allCheckedStores, ...item.activityStoresCheckedList]\r\n            }\r\n          })\r\n        }else {\r\n          this.activityStoreGroupList.forEach(item => {\r\n            allCheckedStores = [...allCheckedStores, ...item.activityStoresCheckedList]\r\n          })\r\n        }\r\n        return allCheckedStores\r\n      },\r\n      /**\r\n       * @description: excel 批量导入添加商品\r\n       */\r\n      showExcelBatchInsertDialog(sceneMsg) {\r\n        if(!sceneMsg.activityStartTime || !sceneMsg.activityEndTime) {\r\n          this.$message.warning(\"请先选择本场次的开始时间和结束时间\")\r\n          return\r\n        }\r\n        if(this.$refs.excelAdd) {\r\n          let val = {\r\n            title: 'Excel 批量导入',\r\n            tempConfig: this.tempConfig\r\n          }\r\n          this.$refs.excelAdd.setDefaultMsg(val)\r\n        }\r\n      },\r\n      doConfirmHandel (value) {\r\n        let excelDataList = value.dataList || []\r\n        excelDataList.forEach(item => {\r\n          item.activityType = 21\r\n        })\r\n        this.$http.post(reqUrl.checkPreGoodsInsert, [...excelDataList]).then(res => {\r\n          this.$refs.excelAdd.closeDisabled()\r\n          this.$refs.excelAdd.closeDialog()\r\n          if (res.code === 0) {\r\n            this.hasErrorMsgData = res.data && res.data.length ? res.data : []\r\n            this.hasErrorMsgData.forEach(item => {\r\n              item.groupPrice = item.preSalePrice\r\n              item.curStock = item.platformCurStock\r\n              item.limitGoodsCount = item.limitCount\r\n            })\r\n            let isOk = this.hasErrorMsgData.some(item => {\r\n              return item.msgType === 1\r\n            })\r\n            if (isOk) {\r\n              this.showTipErrorMsg = true\r\n            } else {\r\n              let checkedListTemp = [...this.activityScenes[this.scene - 1].platCityGoodsInfos]\r\n              checkedListTemp.forEach(i => {\r\n                this.hasErrorMsgData.forEach(j => {\r\n                  if (i.goodsId === j.goodsId && i.goodsNo === j.goodsNo && i.platformCityGoodsId === j.platformCityGoodsId && i.skuNo === j.skuNo) {\r\n                    i.activityGoodsName = j.activityGoodsName\r\n                    i.groupPrice = j.groupPrice\r\n                    i.curStock = j.curStock\r\n                    i.limitGoodsCount = j.limitGoodsCount\r\n                    i.sortNum = j.sortNum\r\n                    i.sfInStock = j.sfInStock\r\n                  }\r\n                })\r\n              })\r\n              let hash = {}\r\n              this.activityScenes[this.scene - 1].platCityGoodsInfos = [...checkedListTemp, ...this.hasErrorMsgData].reduceRight((item, next) => {\r\n                hash[next.platformCityGoodsId] ? '' : hash[next.platformCityGoodsId] = true && item.push(next)\r\n                return item\r\n              }, [])\r\n              this.setJoinGoodsMesg(this.scene)\r\n            }\r\n            return\r\n          }\r\n          throw new Error(res.msg)\r\n        }).catch(e => {\r\n          this.$refs.excelAdd.closeDisabled()\r\n          this.$refs.excelAdd.closeDialog()\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: e.message\r\n          })\r\n        })\r\n      },\r\n      downLoadErrorMsg () {\r\n        let downloadExcelConfig = { ...this.tempConfig }\r\n        downloadExcelConfig.msgTypeStr = '验证结果'\r\n        downloadExcelConfig.msg = '失败原因'\r\n        this.hasErrorMsgData.forEach(item => {\r\n          item.msgTypeStr = item.msgType === 1 ? '验证失败' : '验证成功'\r\n          item.sfInStockStr = item.sfInStock ? '是' : '否'\r\n        })\r\n        const tHeader = utils.objectToArray(downloadExcelConfig, false)\r\n        const filterVal = utils.objectToArray(downloadExcelConfig, true)\r\n        exportSheet.ExportJsonToExcel({\r\n          header: tHeader,\r\n          filterVal,\r\n          data: this.hasErrorMsgData,\r\n          filename: `Excel批量导入模板`\r\n        })\r\n        setTimeout(() => {\r\n          this.$notify.success({\r\n            title: '温馨提示',\r\n            message: `Excel批量导入模板下载成功`\r\n          })\r\n          this.isDisabled = false\r\n        }, 500)\r\n      },\r\n      downLoadSaveErrorMsg() {\r\n        let downloadExcelConfig = {...this.saveErrTempConfig}\r\n        const tHeader = utils.objectToArray(downloadExcelConfig, false)\r\n        const filterVal = utils.objectToArray(downloadExcelConfig, true)\r\n        exportSheet.ExportJsonToExcel({\r\n          header: tHeader,\r\n          filterVal,\r\n          data: this.saveErrorMsgList,\r\n          filename: `活动保存失败商品明细`\r\n        })\r\n        setTimeout(() => {\r\n          this.$notify.success({\r\n            title: '温馨提示',\r\n            message: `活动保存失败商品明细下载成功`\r\n          })\r\n          this.isDisabled = false\r\n        }, 500)\r\n      }\r\n    },\r\n    /**\r\n     * [beforeRouteLeave 页面离开]\r\n     * @param  {[type]}   to   [description]\r\n     * @param  {[type]}   from [description]\r\n     * @param  {Function} next [description]\r\n     * @return {[type]}        [description]\r\n     */\r\n    beforeRouteLeave (to, from, next){\r\n      to.meta.keepAlive = true;\r\n      next();\r\n    }\r\n  }\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Activity/StoreAct/TimelyBuy/EditTBPage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMesg,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"活动类型\",\"required\":\"\"}},[_c('p',{staticStyle:{\"color\":\"#222\",\"font-size\":\"16px\",\"font-weight\":\"bold\"}},[_vm._v(_vm._s(_vm.addParamMesg.activityTypeName))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"选择区域\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.addParamMesg.regionName),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"regionName\", $$v)},expression:\"addParamMesg.regionName\"}})],1),_vm._v(\" \"),(_vm.optType !== 'copy')?_c('el-form-item',{attrs:{\"label\":\"活动编码\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.addParamMesg.activityCode),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityCode\", $$v)},expression:\"addParamMesg.activityCode\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入活动名称\",\"clearable\":\"\",\"disabled\":_vm.status === 3 || _vm.status === 2},model:{value:(_vm.addParamMesg.activityName),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityName\", $$v)},expression:\"addParamMesg.activityName\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动名称,限制30个汉字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"开始时间\",\"required\":\"\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2,\"type\":\"date\",\"placeholder\":\"请选择活动开始时间\",\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"size\":\"small\",\"picker-options\":_vm.pickerOptions},model:{value:(_vm.addParamMesg.activityStartDate),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityStartDate\", $$v)},expression:\"addParamMesg.activityStartDate\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动开始时间\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"结束时间\",\"required\":\"\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2,\"type\":\"date\",\"placeholder\":\"请选择活动结束时间\",\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"size\":\"small\",\"picker-options\":_vm.pickerOptions},model:{value:(_vm.addParamMesg.activityEndDate),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityEndDate\", $$v)},expression:\"addParamMesg.activityEndDate\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动结束时间\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"门店/履约时间\",\"required\":\"\"}},_vm._l((_vm.activityStoreGroupList),function(item,index){return _c('div',{key:index,staticClass:\"store-pre-time-item-wrap\",class:index > 0 ? 'mt10' : null},[_c('div',{staticClass:\"item-right\"},[_c('div',[_c('span',[_vm._v(\"参与门店\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-plus\",\"disabled\":_vm.status === 3 || _vm.status === 2},on:{\"click\":function($event){return _vm.chooseStoreOpen(index)}}},[_vm._v(\"选择门店\")]),_vm._v(\" \"),(item.activityStoresCheckedList.length > 0)?_c('div',[_c('el-table',{staticClass:\"fixed-height\",attrs:{\"data\":item.activityStoresCheckedList,\"empty-text\":\"暂无选中任何门店\",\"max-height\":\"250\",\"size\":\"small\"}},[_c('el-table-column',{attrs:{\"min-width\":\"220px\",\"label\":\"门店编码/名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(\"\\n                        \"+_vm._s(scope.row.erpStoreNo)+\"_\"+_vm._s(scope.row.erpStoreName)+\"\\n                      \")])]}}],null,true)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"80\",\"prop\":\"cityName\",\"label\":\"城市\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"80\",\"prop\":\"saleTypeName\",\"label\":\"门店类型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"disabled\":_vm.status === 3 || _vm.status === 2},on:{\"click\":function($event){return _vm.deleteStoreItem(index, scope.row)}}},[_vm._v(\"删除\")])]}}],null,true)})],1)],1):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"mt10\"},[_c('span',[_vm._v(\"履约时间\")]),_vm._v(\" \"),_c('el-date-picker',{staticClass:\"search-input\",attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2,\"type\":\"date\",\"placeholder\":\"请选择履约时间\",\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"size\":\"small\",\"picker-options\":_vm.pickerOptions},model:{value:(item.performanceDate),callback:function ($$v) {_vm.$set(item, \"performanceDate\", $$v)},expression:\"item.performanceDate\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"门店仅支持自提则为自提时间\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"item-left\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-plus\",\"circle\":\"\",\"disabled\":_vm.status === 3 || _vm.status === 2},on:{\"click\":_vm.doAddStoreGroupHandel}}),_vm._v(\"\\n             \\n            \"),(_vm.activityStoreGroupList.length > 1)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-minus\",\"circle\":\"\",\"disabled\":_vm.status === 3 || _vm.status === 2},on:{\"click\":function($event){return _vm.doMinusStoreGroupHandel(index)}}}):_vm._e()],1)])}),0),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"参与商品\",\"required\":\"\"}},[_c('el-tabs',{on:{\"tab-click\":_vm.handleTabClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_vm._l((_vm.activityScenes),function(item,idx){return _c('el-tab-pane',{key:idx,attrs:{\"name\":item.activeName}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\"\\n              \"+_vm._s(item.label)+\" \\n              \"),(item.activityStartTime && item.activityEndTime)?_c('span',[_vm._v(\"\\n                \"+_vm._s(item.activityStartTime)+\"-\"+_vm._s(item.activityEndTime)+\"\\n              \")]):_vm._e()]),_vm._v(\" \"),_c('span',[_vm._v(\"\\n              开始时间:\\n            \")]),_vm._v(\" \"),_c('el-time-picker',{staticClass:\"add-input-inline\",attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2,\"format\":\"HH:mm\",\"value-format\":\"HH:mm\",\"size\":\"small\",\"clearable\":\"\",\"placeholder\":\"开始时间\"},model:{value:(item.activityStartTime),callback:function ($$v) {_vm.$set(item, \"activityStartTime\", $$v)},expression:\"item.activityStartTime\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"\\n              结束时间:\\n            \")]),_vm._v(\" \"),_c('el-time-picker',{staticClass:\"add-input-inline\",attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2,\"format\":\"HH:mm\",\"value-format\":\"HH:mm\",\"size\":\"small\",\"clearable\":\"\",\"placeholder\":\"结束时间\",\"picker-options\":_vm.pickerOptions},model:{value:(item.activityEndTime),callback:function ($$v) {_vm.$set(item, \"activityEndTime\", $$v)},expression:\"item.activityEndTime\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.chooseGoodsOpen(item)}}},[_vm._v(\"选择商品\")]),_vm._v(\" \"),(_vm.status !== 3 && _vm.status !== 2)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":function($event){return _vm.showExcelBatchInsertDialog(item)}}},[_vm._v(\"Excel批量导入\")]):_vm._e()],1)}),_vm._v(\" \"),_c('join-goods-table',{ref:\"joinGoodsTable\",on:{\"deleteGoodsItem\":_vm.deleteGoodsItem,\"setDefaultChecked\":_vm.setDefaultChecked}})],2)],1),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"icon\":_vm.isDisabled ? 'el-icon-loading' : null},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1),_vm._v(\" \"),_c('div',[_c('choose-store',{ref:\"chooseStore\",on:{\"confirmChooseStore\":_vm.confirmChooseStore}})],1),_vm._v(\" \"),_c('div',[_c('choose-goods',{ref:\"chooseGoods\",on:{\"confirmChooseGoods\":_vm.confirmChooseGoods}})],1),_vm._v(\" \"),_c('excel-add',{ref:\"excelAdd\",on:{\"doConfirmHandel\":_vm.doConfirmHandel}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"批量导入失败\",\"visible\":_vm.showTipErrorMsg,\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"width\":\"450px\"},on:{\"update:visible\":function($event){_vm.showTipErrorMsg=$event}}},[_c('div',[_vm._v(\"\\n      部分商品不符合要求，请按要求修改后再重新导入。\"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":_vm.downLoadErrorMsg}},[_vm._v(\"下载查看失败原因\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.showTipErrorMsg = false}}},[_vm._v(\"关 闭\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b92bf24\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Activity/StoreAct/TimelyBuy/EditTBPage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0b92bf24\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditTBPage.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditTBPage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditTBPage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b92bf24\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditTBPage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Activity/StoreAct/TimelyBuy/EditTBPage.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <div v-show=\"tableData.length > 0\">\n      <el-table\n        class=\"fixed-height\"\n        :data=\"tableData\"\n        ref=\"multipleTable\"\n        empty-text=\"暂无选中任何商品\"\n        style=\"width:100%;\"\n        max-height=\"400\"\n        @select=\"handleSelect\"\n        @select-all=\"handleSelectAll\"\n        size=\"small\">\n        <el-table-column min-width=\"220px\" label=\"商品信息\">\n          <template slot-scope=\"scope\">\n            <div class=\"ll-p-m-w\">\n              <div class=\"ll-img-w\">\n                <img v-if=\"scope.row.imgUrl && scope.row.imgUrl != ''\" :src=\"scope.row.imgUrl\" alt=\"\" onerror=\"onerror=null;src='/shop/static/img_error.png'\">\n                <img v-else src=\"/shop/static/img_error.png\" alt=\"\">\n              </div>\n              <div class=\"ll-p-m-c-r\">\n                <div>\n                  {{scope.row.goodsName || '--'}}\n                </div>\n                <div class=\"ll-erp-p-no\">SKU编码：{{scope.row.goodsNo || '--'}}</div>\n              </div>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column min-width=\"100px\" prop=\"spec\" label=\"规格\"></el-table-column>\n        <el-table-column min-width=\"130px\" label=\"活动商品名称\">\n          <template slot-scope=\"scope\">\n            <div>\n              <el-input :disabled = \"scope.row.disabled\" v-model=\"scope.row.activityGoodsName\" size=\"small\" placeholder=\"输入名称\"></el-input>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column min-width=\"90px\" prop=\"price\" label=\"原价\"></el-table-column>\n        <el-table-column min-width=\"110px\" label=\"活动价\">\n          <template slot-scope=\"scope\">\n            <div>\n              <el-input v-model=\"scope.row.groupPrice\" size=\"small\" placeholder=\"输入价格\" :disabled = \"scope.row.disabled\"></el-input>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column min-width=\"150px\" label=\"限购数量(为空不限)\">\n          <template slot-scope=\"scope\">\n            <div>\n              <el-input v-model=\"scope.row.limitGoodsCount\" size=\"small\" placeholder=\"输入限购数量\" :disabled = \"scope.row.disabled\"></el-input>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column min-width=\"110px\" label=\"活动库存\">\n          <template slot-scope=\"scope\">\n            <div>\n              <el-input v-model=\"scope.row.curStock\" size=\"small\" placeholder=\"输入库存\" :disabled = \"scope.row.disabled\"></el-input>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column min-width=\"110px\" label=\"排序权重\">\n          <template slot-scope=\"scope\">\n            <div>\n              <el-input v-model=\"scope.row.sortNum\" size=\"small\" placeholder=\"输入权重\" :disabled = \"scope.row.disabled\"></el-input>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column min-width=\"190px\" :render-header=\"sfInStockHeader\">\n          <template slot-scope=\"scope\">\n            <div>\n              <el-radio :disabled = \"scope.row.disabled\" v-model=\"scope.row.sfInStock\" :label=\"true\">是</el-radio>\n              <el-radio :disabled = \"scope.row.disabled\" v-model=\"scope.row.sfInStock\" :label=\"false\">否</el-radio>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column\n          align=\"center\"\n          label=\"操作\"\n          fixed=\"right\"\n          width=\"80\">\n          <template slot-scope=\"scope\" size=\"small\">\n            <el-button @click=\"deleteGoodsItem(scope.row)\" type=\"text\" size=\"mini\" icon=\"el-icon-delete\" :disabled = \"scope.row.disabled\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div>\n        <span style=\"color: red;\">*</span>注意：权重排序，先创建的活动商品在前；剩余的按前端规则走。\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import * as utils from '@/utils/utils'\n  export default {\n    data() {\n      return {\n        tableData: [],\n        scene: '',\n        checkedList: []\n      }\n    },\n\n    methods: {\n      /**\n       * [setDefaultMesg 设置信息]\n       * @param {[type]} _val [description]\n       */\n      setDefaultMesg(_val) {\n        this.tableData = _val.tableData || []\n        this.checkedList = _val.checkedList || []\n        this.scene = _val.scene || ''\n\n        this.defaultSelectFun()\n      },\n      /**\n       * [handleSelect 选择某一个]\n       * @return {[type]} [description]\n       */\n      handleSelect(val, row) {\n        let hash = {}\n        let checkedListTemp = []\n\n        if(utils.isKeyInArrayBykey(row.platformCityGoodsId, 'platformCityGoodsId', this.checkedList)) {\n          this.checkedList = utils.removeItemByKeyVal('platformCityGoodsId', row.platformCityGoodsId, this.checkedList)\n          return\n        }else {\n          checkedListTemp.push(row)\n        }\n\n        let checkedListTempArr = [...checkedListTemp, ...this.checkedList]\n        this.checkedList = checkedListTempArr.reduceRight((item, next) => {\n          hash[next.platformCityGoodsId] ? '' : hash[next.platformCityGoodsId] = true && item.push(next)\n          return item\n        }, [])\n\n        // 处理数据\n        let _value = {\n          scene: this.scene,\n          checkedList: this.checkedList\n        }\n        this.$emit(\"setDefaultChecked\", _value)\n      },\n      /**\n       * [handleSelectAll 选择多个]\n       * @return {[type]} [description]\n       */\n      handleSelectAll(val) {\n        let hash = {}\n        if(val.length > 0) {\n          // 全选\n          for(let item of val) {\n            this.checkedList.push(item)\n          }\n          // 去重\n          this.checkedList = this.checkedList.reduceRight((item, next) => {\n            hash[next.platformCityGoodsId] ? '' : hash[next.platformCityGoodsId] = true && item.push(next)\n            return item\n          }, [])\n        }else {\n          // 全不选 此时val.length<=0\n          // 1.获取当前table中每一条的id\n          let checkedListTemp = []\n          for(let item of this.tableData) {\n            checkedListTemp.push(item)\n          }\n          // 2.从要传递的参数中去掉这些重复的\n          let checkedListArr = utils.getSubtract(this.checkedList, checkedListTemp, 'platformCityGoodsId')\n          this.checkedList = checkedListArr && checkedListArr.length > 0 ? checkedListArr : []\n        }\n\n        // 处理数据\n        let _value = {\n          scene: this.scene,\n          checkedList: this.checkedList\n        }\n        this.$emit(\"setDefaultChecked\", _value)\n      },\n      /**\n       * [defaultSelectFun 设置表格中的默认选中项]\n       * @param    {[type]}                 row [description]\n       * @return   {[type]}                     [description]\n       */\n      defaultSelectFun() {\n        let _this = this\n        let rows = []\n        // 设置默认选中项  处理已经有的操作\n        for(let i of this.tableData) {\n          for(let j of this.checkedList) {\n            if(i.platformCityGoodsId == j.platformCityGoodsId) {\n              i.goodsName = j.goodsName\n              i.activityId = j.activityId // 活动id\n              i.id = j.id // 活动明细流水ID\n              i.activityTimes = j.activityTimes // 活动限制时间（小时）\n              i.curStock = j.curStock // 活动库存\n              i.groupCount = j.groupCount // 活动人数\n              i.groupPrice = j.groupPrice // 活动售价\n              i.limitGroupType = j.limitGroupType // 活动限制: 0：全部；1：老用户；2：新用户；\n              i.sortNum = j.sortNum // 活动权重\n              i.limitGoodsCount = j.limitGoodsCount // 活动商品限制数量\n\n              rows.push(i)\n            }\n          }\n        }\n        if(rows.length > 0) {\n          this.$refs.multipleTable.clearSelection()\n          setTimeout(function() {\n            rows.forEach(rowItem => {\n              _this.$refs.multipleTable.toggleRowSelection(rowItem)\n            });\n          }, 100)\n        } else {\n          this.$refs.multipleTable.clearSelection()\n        }\n      },\n      sfInStockHeader() {\n        return (\n          <el-popover\n            placement=\"top-start\"\n            width=\"260\"\n            trigger=\"hover\">\n            <div>\n              <p>1、顺丰标品设为顺丰仓现货时，下单会校验仓库库存；</p>\n              <p>2、本来鲜生鲜品无需设置；</p>\n            </div>\n            <span slot=\"reference\">是否为顺丰仓现货<i class=\"el-icon-question\"></i></span>\n          </el-popover>\n        )\n      },\n      /**\n       * [deleteGoodsItem 删除]\n       * @return {[type]} [description]\n       */\n      deleteGoodsItem(_row) {\n        let _value = {\n          scene: this.scene,\n          row: _row\n        }\n        this.$emit(\"deleteGoodsItem\", _value)\n      }\n\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Activity/StoreAct/TimelyBuy/JoinGoodsTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tableData.length > 0),expression:\"tableData.length > 0\"}]},[_c('el-table',{ref:\"multipleTable\",staticClass:\"fixed-height\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"empty-text\":\"暂无选中任何商品\",\"max-height\":\"400\",\"size\":\"small\"},on:{\"select\":_vm.handleSelect,\"select-all\":_vm.handleSelectAll}},[_c('el-table-column',{attrs:{\"min-width\":\"220px\",\"label\":\"商品信息\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"ll-p-m-w\"},[_c('div',{staticClass:\"ll-img-w\"},[(scope.row.imgUrl && scope.row.imgUrl != '')?_c('img',{attrs:{\"src\":scope.row.imgUrl,\"alt\":\"\",\"onerror\":\"onerror=null;src='/shop/static/img_error.png'\"}}):_c('img',{attrs:{\"src\":\"/shop/static/img_error.png\",\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"ll-p-m-c-r\"},[_c('div',[_vm._v(\"\\n                \"+_vm._s(scope.row.goodsName || '--')+\"\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"ll-erp-p-no\"},[_vm._v(\"SKU编码：\"+_vm._s(scope.row.goodsNo || '--'))])])])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"prop\":\"spec\",\"label\":\"规格\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"130px\",\"label\":\"活动商品名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"disabled\":scope.row.disabled,\"size\":\"small\",\"placeholder\":\"输入名称\"},model:{value:(scope.row.activityGoodsName),callback:function ($$v) {_vm.$set(scope.row, \"activityGoodsName\", $$v)},expression:\"scope.row.activityGoodsName\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"90px\",\"prop\":\"price\",\"label\":\"原价\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"活动价\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入价格\",\"disabled\":scope.row.disabled},model:{value:(scope.row.groupPrice),callback:function ($$v) {_vm.$set(scope.row, \"groupPrice\", $$v)},expression:\"scope.row.groupPrice\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"150px\",\"label\":\"限购数量(为空不限)\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入限购数量\",\"disabled\":scope.row.disabled},model:{value:(scope.row.limitGoodsCount),callback:function ($$v) {_vm.$set(scope.row, \"limitGoodsCount\", $$v)},expression:\"scope.row.limitGoodsCount\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"活动库存\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入库存\",\"disabled\":scope.row.disabled},model:{value:(scope.row.curStock),callback:function ($$v) {_vm.$set(scope.row, \"curStock\", $$v)},expression:\"scope.row.curStock\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"排序权重\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入权重\",\"disabled\":scope.row.disabled},model:{value:(scope.row.sortNum),callback:function ($$v) {_vm.$set(scope.row, \"sortNum\", $$v)},expression:\"scope.row.sortNum\"}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"190px\",\"render-header\":_vm.sfInStockHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-radio',{attrs:{\"disabled\":scope.row.disabled,\"label\":true},model:{value:(scope.row.sfInStock),callback:function ($$v) {_vm.$set(scope.row, \"sfInStock\", $$v)},expression:\"scope.row.sfInStock\"}},[_vm._v(\"是\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"disabled\":scope.row.disabled,\"label\":false},model:{value:(scope.row.sfInStock),callback:function ($$v) {_vm.$set(scope.row, \"sfInStock\", $$v)},expression:\"scope.row.sfInStock\"}},[_vm._v(\"否\")])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"disabled\":scope.row.disabled},on:{\"click\":function($event){return _vm.deleteGoodsItem(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_vm._m(0)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"注意：权重排序，先创建的活动商品在前；剩余的按前端规则走。\\n    \")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-97e939a4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Activity/StoreAct/TimelyBuy/JoinGoodsTable.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./JoinGoodsTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./JoinGoodsTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-97e939a4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./JoinGoodsTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Activity/StoreAct/TimelyBuy/JoinGoodsTable.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}