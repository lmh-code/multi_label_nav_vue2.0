{"version":3,"sources":["webpack:///src/components/StoreMgt/ScreenSet/Media/Edit.vue","webpack:///./src/components/StoreMgt/ScreenSet/Media/Edit.vue?2c36","webpack:///./src/components/StoreMgt/ScreenSet/Media/Edit.vue"],"names":["fileUrlList","reqUrl","Edit","data","isDisabled","id","this","$route","params","addParamMsg","multimediaAudioVoList","templateType","multimediaType","templateName","cityId","enable","storeNo","moduleGoodsReqList","categoryNos","categoryNamesStr","goodsTypes","showMemberPriceB","templateTypeOptions","label","value","enableOptions","cityOptions","storeOptions","uploadLoading","playTypeOptions","created","getCityList","getDetails","methods","_this","utils","_params","DIFFCITY","$http","post","extends_default","then","res","code","parseInt","cityChange","multimediaAudioVoListTemp","length","forEach","mediaItem","timeRange","startTime","endTime","Error","msg","catch","e","$notify","error","title","message","_this2","get","cityList","map","item","cityName","console","log","_this3","pageNum","pageSize","storeList","result","storeName","emitUpload","_this4","getToken","qiniu_min","file","fileName","token","subscribe","complete","audioUrl","key","playType","push","next","beforeUploadReg","fileType","_this5","fileExtension","deleteUpFile","index","splice","doSaveHandel","_this6","$message","startTimeArr","endTimeArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","err","return","tipTxt","$confirm","confirmButtonText","cancelButtonText","type","setTimeout","success","$router","doCancelHandel","_this7","Media_Edit","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","required","placeholder","size","callback","$$v","$set","expression","_l","_v","filterable","on","change","_e","action","disabled","show-file-list","before-upload","http-request","icon","circle","click","$event","href","target","_s","is-range","editable","format","value-format","range-separator","start-placeholder","end-placeholder","idx","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/110.c5216ef424f5ad63931f.js","sourcesContent":["<style>\n  .media-file-item {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    border: 1px solid #ececec;\n    border-radius: 6px;\n    padding: 0 10px;\n  }\n</style>\n\n<template>\n  <div class=\"add-form-wraper\">\n    <el-form ref=\"form\" :model=\"addParamMsg\" label-width=\"160px\">\n      <el-form-item label=\"模板类型\" required>\n        <el-select class=\"add-input\" v-model=\"addParamMsg.templateType\" placeholder=\"请选择模板类型\" size=\"small\">\n          <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in templateTypeOptions\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"区域\" required>\n        <el-select class=\"add-input\" v-model=\"addParamMsg.cityId\" placeholder=\"请选择区域\" size=\"small\" @change=\"cityChange\"\n          filterable>\n          <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in cityOptions\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"门店\" v-if=\"addParamMsg.templateType === 2\" required>\n        <el-select class=\"add-input\" v-model=\"addParamMsg.storeNo\" placeholder=\"请选择门店\" size=\"small\" filterable>\n          <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in storeOptions\"></el-option>\n        </el-select>\n        <span>请先选择区域再选择门店</span>\n      </el-form-item>\n      <el-form-item label=\"模板名称\" required>\n        <el-input v-model=\"addParamMsg.templateName\" size=\"small\" class=\"add-input\" placeholder=\"模板名称\"></el-input>\n        <span>模板名称,限制20个汉字</span>\n      </el-form-item>\n      <el-form-item label=\"页面模板设置\" required>\n        <el-upload\n          action=\"\"\n          :disabled=\"uploadLoading\"\n          :show-file-list=\"false\"\n          :before-upload=\"beforeUploadReg\"\n          :http-request=\"emitUpload\">\n          <el-button :disabled=\"uploadLoading\" size=\"mini\" :icon=\"uploadLoading ? 'el-icon-loading' : 'el-icon-upload2'\" type=\"primary\">上传音频</el-button>\n        </el-upload>\n        <div v-for=\"(item, index) of multimediaAudioVoList\" :key=\"index\" class=\"media-file-item mt10\">\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" circle @click=\"deleteUpFile(index)\"></el-button>\n          <div>\n            <div class=\"audio-url-wrap ml10\">\n              <a :href=\"item.audioUrl\" target=\"_blank\">{{item.audioUrl}}</a>\n            </div>\n            <div>\n              <el-time-picker\n                is-range\n                :editable=\"false\"\n                size=\"small\"\n                class=\"search-date-picker ml10\"\n                format=\"HH:mm\"\n                value-format=\"HH:mm\"\n                v-model=\"item.timeRange\"\n                range-separator=\"-\"\n                start-placeholder=\"开始时间\"\n                end-placeholder=\"结束时间\"\n                placeholder=\"选择时间范围\">\n              </el-time-picker>\n              <el-select class=\"add-input-inline ml10\" v-model=\"item.playType\" placeholder=\"请选择区域\" size=\"small\" filterable>\n                <el-option :label=\"item.label\" :value=\"item.value\" :key=\"item.value\" v-for=\"item in playTypeOptions\"></el-option>\n              </el-select>\n            </div>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item label=\"启用状态\" required>\n        <el-radio-group v-model=\"addParamMsg.enable\" size=\"small\">\n          <el-radio-button :label=\"item.value\" v-for=\"(item, idx) in enableOptions\" :key=\"idx\">{{item.label}}\n          </el-radio-button>\n        </el-radio-group>\n        <span>开启后线上将直接启用</span>\n      </el-form-item>\n      <hr class=\"s-slip-tb\">\n      <el-form-item>\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\">保存</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n  import Storage from '@/utils/localStorage'\n  import * as utils from '@/utils/utils'\n  import * as qiniu from 'qiniu-js'\n  const fileUrlList = {\n    getQiNiuToken: '/foundation/qiniu/auth/file'\n  }\n  const reqUrl = {\n    // 查询用户区域店组一级列表\n    userAreaStoreGroupList: '/foundation/store/userStoreCityList',\n    // 查询用户权限分店列表\n    userStoreList: '/foundation/store/userStoreList',\n    // 保存/更新模板\n    update: '/plateform/a/tv/multimedia/template/update',\n    // 多媒体模板详情\n    detail: '/plateform/a/tv/multimedia/template/detail'\n  }\n  let salePriceReg = /^[1-9]*[1-9][0-9]*$/\n  export default {\n    data() {\n      return {\n        isDisabled: false,\n        id: this.$route.params.id || '', // 编辑时必传\n        addParamMsg: {\n          multimediaAudioVoList: [],\n          templateType: 2, // 模板类型 1：区域模板 2：门店模板\n          multimediaType: 0,\n          templateName: null,\n          cityId: null,\n          enable: 0, // 0启用，1禁用\n          storeNo: null // 门店编码,门店模板必填\n        },\n        moduleGoodsReqList: [{\n            categoryNos: [],\n            categoryNamesStr: '',\n            goodsTypes: [],\n            showMemberPriceB: true\n          },\n          {\n            categoryNos: [],\n            categoryNamesStr: '',\n            goodsTypes: [],\n            showMemberPriceB: true\n          },\n          {\n            categoryNos: [],\n            categoryNamesStr: '',\n            goodsTypes: [],\n            showMemberPriceB: true\n          }\n        ],\n        templateTypeOptions: [{\n            label: '区域模板',\n            value: 1\n          },\n          {\n            label: '门店模板',\n            value: 2\n          }\n        ],\n        enableOptions: [{\n            label: '启用',\n            value: 0\n          },\n          {\n            label: '禁用',\n            value: 1\n          }\n        ],\n        cityOptions: [{\n            label: '商品模块',\n            value: 0\n          },\n          {\n            label: '图片模块',\n            value: 1\n          }\n        ],\n        storeOptions: [],\n        uploadLoading: false,\n        multimediaAudioVoList: [],\n        playTypeOptions: [\n          {\n            label: '循环播放',\n            value: 0\n          },\n          {\n            label: '单次播放',\n            value: 1\n          }\n        ]\n      }\n    },\n    created() {\n      this.getCityList()\n      this.getDetails()\n    },\n    methods: {\n      getDetails() {\n        utils.showLoading()\n        let _params = {\n          DIFFCITY: true,\n          id: this.id\n        }\n        this.$http.post(reqUrl.detail, {\n          ..._params\n        }).then(res => {\n          utils.clearLoading()\n          if (res.code === 0) {\n            this.addParamMsg.templateType = res.data.templateType\n            this.addParamMsg.templateName = res.data.templateName\n            this.addParamMsg.cityId = parseInt(res.data.cityId)\n            this.cityChange(res.data.cityId)\n            this.addParamMsg.enable = res.data.enable\n            this.addParamMsg.storeNo = res.data.storeNo\n            let multimediaAudioVoListTemp = res.data.multimediaAudioVoList && res.data.multimediaAudioVoList.length ? res.data.multimediaAudioVoList : []\n            multimediaAudioVoListTemp.forEach(mediaItem => {\n              mediaItem.timeRange = [mediaItem.startTime, mediaItem.endTime]\n            })\n            this.multimediaAudioVoList = multimediaAudioVoListTemp\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          utils.clearLoading()\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      getCityList() {\n        this.$http.get(reqUrl.userAreaStoreGroupList).then(res => {\n          if (res.code === 0) {\n            let cityList = res.data && res.data.length ? res.data : []\n            this.cityOptions = cityList.map(item => {\n              let newItem = {\n                label: `${item.cityId}_${item.cityName}`,\n                value: item.cityId\n              }\n              return newItem\n            })\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          console.log(\"提示【获取区域列表】：\", e.message)\n        })\n      },\n      cityChange(e) {\n        let _params = {\n          DIFFCITY: true,\n          pageNum: 1,\n          pageSize: -1,\n          cityId: e\n        }\n        this.addParamMsg.storeNo = null\n        this.$http.post(reqUrl.userStoreList, {\n          ..._params\n        }).then(res => {\n          if (res.code === 0) {\n            let storeList = res.data && res.data.result && res.data.result.length ? res.data.result : []\n            this.storeOptions = storeList.map(item => {\n              let newItem = {\n                label: `${item.storeNo}_${item.storeName}`,\n                value: item.storeNo\n              }\n              return newItem\n            })\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      emitUpload(e) {\n        this.uploadLoading = true\n        this.getToken('mp3').then((res) => {\n          // 开始上传图片\n          let uploader = qiniu.upload(e.file, res.fileName, res.token)\n          uploader.subscribe({\n            error: () => {\n              this.uploadLoading = false\n            },\n            complete: (res) => {\n              this.uploadLoading = false\n              let mediaItem = {\n                audioUrl: `http://retailimg01.benlailife.com/${res.key}`,\n                startTime: '',\n                endTime: '',\n                timeRange: ['', ''],\n                playType: 0\n              }\n              this.multimediaAudioVoList.push(mediaItem);\n            },\n            next: res => {}\n          })\n        })\n      },\n      beforeUploadReg(file) {\n        // let rightType = new Array(\"avi\",\"wmv\",\"mpg\",\"mpeg\",\"mov\",\"rm\",\"ram\",\"swf\",\"flv\",\"mp4\",\"mp3\",\"wma\",\"avi\",\"rm\",\"rmvb\",\"flv\",\"mpg\",\"mkv\");\n        // const type = file.type.indexOf('image/') !== -1\n        return true;\n      },\n      /**\n       * [getToken 通过后台封装的接口获取七牛的token]\n       * @return {[type]}            [description]\n       */\n      getToken(fileType) {\n        return this.$http.post(fileUrlList.getQiNiuToken, {fileExtension: fileType || null}).then(res => {\n          if (res.code == 0) {\n            let token = res.data.token\n            let fileName = res.data.key\n            return {\n              fileName,\n              token\n            }\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.uploadLoading = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      /**\n       * [removeFileLeft 删除]\n       */\n      deleteUpFile(index) {\n        this.multimediaAudioVoList.splice(index, 1)\n      },\n      doSaveHandel() {\n        if (!this.addParamMsg.cityId) {\n          this.$message(\"[区域]: 请选择区域\")\n          return\n        }\n        let params = {\n          DIFFCITY: true,\n          id: this.id,\n          templateType: this.addParamMsg.templateType, // 模板类型 1：区域模板 2：门店模板\n          multimediaType: this.addParamMsg.multimediaType,\n          templateName: this.addParamMsg.templateName,\n          cityId: this.addParamMsg.cityId,\n          enable: this.addParamMsg.enable\n        }\n        if (this.addParamMsg.templateType === 2) {\n          // 门店模板必须有门店编码\n          if (!this.addParamMsg.storeNo) {\n            this.$message(\"[门店]: 请选择门店\")\n            return\n          }else {\n            params.storeNo = this.addParamMsg.storeNo\n          }\n        }\n        if (!this.addParamMsg.templateName) {\n          this.$message(\"[模板名称]: 请输入模板名称\")\n          return\n        } else {\n          if (this.addParamMsg.templateName.length > 20) {\n            this.$message(\"[模板名称]: 模板名称,限制20个汉字\")\n            return\n          }\n        }\n        if(!this.multimediaAudioVoList || this.multimediaAudioVoList.length === 0) {\n          this.$message(\"[页面模板设置]: 请上传音频内容\")\n          return\n        }else {\n          let startTimeArr = []\n          let endTimeArr = []\n          for(let item of this.multimediaAudioVoList) {\n            item.startTime = item.timeRange && item.timeRange.length ? item.timeRange[0] : ''\n            item.endTime = item.timeRange && item.timeRange.length ? item.timeRange[1] : ''\n            if(!item.startTime || !item.endTime) {\n              this.$message(\"[页面模板设置]: 请选择音频的播放时间段\")\n              return\n            }else {\n              startTimeArr.push(item.startTime)\n              endTimeArr.push(item.endTime)\n            }\n          }\n          if(!utils.compareDate(startTimeArr, endTimeArr)) {\n            this.$message(\"音频的播放时间段不可互相包含，请重新设置\")\n            return\n          }else {\n            params.multimediaAudioVoList = this.multimediaAudioVoList\n          }\n        }\n        let tipTxt = ''\n        if (params.enable === 0) {\n          tipTxt = \"一个门店或区域有且仅有一个可生效模板，开启后原模板将被禁用，保存时确定要直接启用吗?\"\n        } else if (params.enable === 1) {\n          tipTxt = \"保存时确定要直接禁用吗?\"\n        }\n        this.$confirm(tipTxt, '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.isDisabled = true\n          this.$http.post(reqUrl.update, {\n            ...params\n          }).then(res => {\n            setTimeout(() => {\n              this.isDisabled = false\n            }, 500);\n            if (res.code === 0) {\n              this.$message.success(\"保存成功\")\n              this.$router.push('/media')\n              return\n            }\n            throw new Error(res.msg)\n          }).catch(e => {\n            setTimeout(() => {\n              this.isDisabled = false\n            }, 500);\n            this.$notify.error({\n              title: '提示',\n              message: e.message\n            })\n          })\n        })\n      },\n      /**\n       * [doCancelHandel 取消操作]\n       * @return {[type]} [description]\n       */\n      doCancelHandel() {\n        this.$confirm('确定取消吗?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push('/media')\n        }).catch(() => {})\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/StoreMgt/ScreenSet/Media/Edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMsg,\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":\"模板类型\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择模板类型\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.templateType),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"templateType\", $$v)},expression:\"addParamMsg.templateType\"}},_vm._l((_vm.templateTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"区域\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择区域\",\"size\":\"small\",\"filterable\":\"\"},on:{\"change\":_vm.cityChange},model:{value:(_vm.addParamMsg.cityId),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"cityId\", $$v)},expression:\"addParamMsg.cityId\"}},_vm._l((_vm.cityOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),(_vm.addParamMsg.templateType === 2)?_c('el-form-item',{attrs:{\"label\":\"门店\",\"required\":\"\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"请选择门店\",\"size\":\"small\",\"filterable\":\"\"},model:{value:(_vm.addParamMsg.storeNo),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"storeNo\", $$v)},expression:\"addParamMsg.storeNo\"}},_vm._l((_vm.storeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_vm._v(\" \"),_c('span',[_vm._v(\"请先选择区域再选择门店\")])],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"模板名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"模板名称\"},model:{value:(_vm.addParamMsg.templateName),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"templateName\", $$v)},expression:\"addParamMsg.templateName\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"模板名称,限制20个汉字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"页面模板设置\",\"required\":\"\"}},[_c('el-upload',{attrs:{\"action\":\"\",\"disabled\":_vm.uploadLoading,\"show-file-list\":false,\"before-upload\":_vm.beforeUploadReg,\"http-request\":_vm.emitUpload}},[_c('el-button',{attrs:{\"disabled\":_vm.uploadLoading,\"size\":\"mini\",\"icon\":_vm.uploadLoading ? 'el-icon-loading' : 'el-icon-upload2',\"type\":\"primary\"}},[_vm._v(\"上传音频\")])],1),_vm._v(\" \"),_vm._l((_vm.multimediaAudioVoList),function(item,index){return _c('div',{key:index,staticClass:\"media-file-item mt10\"},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\",\"circle\":\"\"},on:{\"click\":function($event){return _vm.deleteUpFile(index)}}}),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"audio-url-wrap ml10\"},[_c('a',{attrs:{\"href\":item.audioUrl,\"target\":\"_blank\"}},[_vm._v(_vm._s(item.audioUrl))])]),_vm._v(\" \"),_c('div',[_c('el-time-picker',{staticClass:\"search-date-picker ml10\",attrs:{\"is-range\":\"\",\"editable\":false,\"size\":\"small\",\"format\":\"HH:mm\",\"value-format\":\"HH:mm\",\"range-separator\":\"-\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"placeholder\":\"选择时间范围\"},model:{value:(item.timeRange),callback:function ($$v) {_vm.$set(item, \"timeRange\", $$v)},expression:\"item.timeRange\"}}),_vm._v(\" \"),_c('el-select',{staticClass:\"add-input-inline ml10\",attrs:{\"placeholder\":\"请选择区域\",\"size\":\"small\",\"filterable\":\"\"},model:{value:(item.playType),callback:function ($$v) {_vm.$set(item, \"playType\", $$v)},expression:\"item.playType\"}},_vm._l((_vm.playTypeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)])],1)})],2),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"启用状态\",\"required\":\"\"}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},model:{value:(_vm.addParamMsg.enable),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"enable\", $$v)},expression:\"addParamMsg.enable\"}},_vm._l((_vm.enableOptions),function(item,idx){return _c('el-radio-button',{key:idx,attrs:{\"label\":item.value}},[_vm._v(_vm._s(item.label)+\"\\n        \")])}),1),_vm._v(\" \"),_c('span',[_vm._v(\"开启后线上将直接启用\")])],1),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3d106344\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/StoreMgt/ScreenSet/Media/Edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d106344\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Edit.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d106344\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/StoreMgt/ScreenSet/Media/Edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}