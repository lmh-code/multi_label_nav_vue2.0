webpackJsonp([50],{Jg32:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("BO1k"),s=a.n(r),i=(a("ssT3"),a("oAV5")),o="/plateform/a/mall/saleActivity/detail",l={data:function(){return{activityId:"",isDisabled:!1,addParamMesg:{platformId:5,cityId:"",cityName:"",activityName:"",startDate:"",endDate:"",pickUpStartDate:"",pickUpEndDate:"",goodsReqList:[]},pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},cityOptions:[],checkedList:[],activityStoresCheckedList:[]}},created:function(){this.activityId=this.$route.params.id,this.getDetailMesg()},methods:{getDetailMesg:function(){var t=this;i.r(),this.$http.post(o,{activityId:this.activityId}).then(function(e){if(i.c(),0!==e.code)throw new Error(e.msg);if(e.data)if(t.addParamMesg.activityName=e.data.activityName,t.addParamMesg.cityName=e.data.cityName,t.addParamMesg.startDate=e.data.startDate,t.addParamMesg.endDate=e.data.endDate,t.addParamMesg.pickUpStartDate=e.data.pickUpStartDate,t.addParamMesg.pickUpEndDate=e.data.pickUpEndDate,e.data.storeNoList&&e.data.storeNoList.length&&(t.activityStoresCheckedList=e.data.storeNoList),e.data.goodsVoList&&e.data.goodsVoList.length>0){var a=!0,r=!1,o=void 0;try{for(var l,d=s()(e.data.goodsVoList);!(a=(l=d.next()).done);a=!0){var n=l.value;n.copyUrl="pages/product/detail?id="+n.platformCityId+"&type=3"}}catch(t){r=!0,o=t}finally{try{!a&&d.return&&d.return()}finally{if(r)throw o}}t.checkedList=e.data.goodsVoList}else t.checkedList=[]}).catch(function(e){i.c(),t.$notify.error({title:"提示",message:e.message})})},doCancelHandel:function(){this.$router.push("/long_pgm")},onCopySuc:function(){this.$message.success("链接已复制至剪切板，仅限微信公众号中使用")},onCopyError:function(){this.$message.error("复制链接失败,请手动复制")},platformCurStockHeader:function(){var t=this.$createElement;return t("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[t("div",[t("p",["区域限售库存，即所有门店共享的总预售库存；"]),t("p",["门店限售即每个门店的预售库存，可在门店预售商品中调整门店库存；"]),t("p",["每个商品至少要设置一种限售库存方式，最大可设置9999；"]),t("p",["如果既设了区域限售，又设了门店限售，则先校验区域库存，再校验门店库存；"])]),t("span",{slot:"reference"},["区域限售库存",t("i",{class:"el-icon-question"})])])}},beforeRouteLeave:function(t,e,a){t.meta.keepAlive=!0,a()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-form-wraper"},[a("el-form",{ref:"form",attrs:{model:t.addParamMesg,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"选择城市",required:""}},[a("div",[t._v(t._s(t.addParamMesg.cityName))])]),t._v(" "),a("el-form-item",{attrs:{label:"预售周期名称",required:""}},[a("div",[t._v(t._s(t.addParamMesg.activityName))])]),t._v(" "),a("el-form-item",{attrs:{label:"起止时间",required:""}},[a("div",[t._v("\n        "+t._s(t.addParamMesg.startDate)+" - "+t._s(t.addParamMesg.endDate)+"\n      ")])]),t._v(" "),a("el-form-item",{attrs:{label:"提货日期",required:""}},[a("div",[t._v("\n        "+t._s(t.addParamMesg.pickUpStartDate)+" - "+t._s(t.addParamMesg.pickUpEndDate)+"\n      ")])]),t._v(" "),a("el-form-item",{attrs:{label:"参与门店",required:""}},[t.activityStoresCheckedList.length>0?a("div",{staticClass:"store-check-wraper"},t._l(t.activityStoresCheckedList,function(e,r){return a("div",{key:r,staticClass:"check-store-item"},[t._v("\n          "+t._s(e.erpStoreNo)+"_"+t._s(e.erpStoreName)+"("+t._s(e.saleTypeName)+")\n        ")])}),0):t._e()]),t._v(" "),a("el-form-item",{attrs:{label:"设置预售商品",required:""}},[a("div",[t._v("进行中不可添加/修改商品")]),t._v(" "),a("el-table",{staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:t.checkedList,"empty-text":"暂无选中任何商品",size:"small"}},[a("el-table-column",{attrs:{width:"226px",label:"商品信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ll-p-m-w"},[a("div",{staticClass:"ll-img-w"},[e.row.imgUrl&&""!=e.row.imgUrl?a("img",{attrs:{src:e.row.imgUrl,alt:"",onerror:"onerror=null;src='/shop/static/img_error.png'"}}):a("img",{attrs:{src:"/shop/static/img_error.png",alt:""}})]),t._v(" "),a("div",{staticClass:"ll-p-m-c-r"},[a("div",[t._v("\n                  "+t._s(e.row.goodsName)+"\n                ")]),t._v(" "),a("div",{staticClass:"ll-erp-p-no"},[t._v("SKU编码："+t._s(e.row.goodsNo||"--"))]),t._v(" "),e.row.platformCityId?a("div",{staticClass:"ll-erp-p-no"},[t._v("商品ID："+t._s(e.row.platformCityId||"--"))]):t._e()])])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"120px",prop:"spec",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"原价(必填)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n              "+t._s(e.row.price)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"预售价(必填)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n              "+t._s(e.row.presalePrice)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px","render-header":t.platformCurStockHeader},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n              "+t._s(e.row.platformCurStock)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"130px",label:"门店限售库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n              "+t._s(e.row.stock)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"160px",prop:"marketPrice",label:"每人限购(为空时不限)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n              "+t._s(e.row.memberLimitNum)+"\n            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.row.copyUrl,expression:"scope.row.copyUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuc,expression:"onCopySuc",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],staticClass:"shareline"},[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-document"}},[t._v("复制链接")])],1)]}}])})],1)],1),t._v(" "),a("hr",{staticClass:"s-slip-tb"}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:t.doCancelHandel}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,d,!1,function(t){a("lhmm")},null,null);e.default=n.exports},lhmm:function(t,e){}});
//# sourceMappingURL=50.eb7eccaadf2e83c5ae31.js.map