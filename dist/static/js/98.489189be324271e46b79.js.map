{"version":3,"sources":["webpack:///src/components/Activity/StoreAct/GroupBuy/EditGBPage.vue","webpack:///./src/components/Activity/StoreAct/GroupBuy/EditGBPage.vue?55d2","webpack:///./src/components/Activity/StoreAct/GroupBuy/EditGBPage.vue"],"names":["reqUrl","EditGBPage","data","optType","status","pickerOptions","disabledDate","time","getTime","Date","now","isDisabled","addParamMesg","DIFFCITY","platformId","regionCode","regionName","id","activityId","activityType","activityTypeName","activityName","activityStartDate","activityEndDate","activityCode","activityStoreList","platCityGoodsInfos","deliveryType","pickSelf","activityStoresCheckedList","activityGoodsCheckedList","checkedList","discount","canDelivery","deliveryTypeTemp","canPickSelf","beforeRouteEnter","to","from","next","params","type","meta","breadcrumbList","name","path","created","this","$route","query","parseInt","getDetail","components","choose-store","ChooseStore","choose-goods","ChooseGoodsFromLib","methods","_this","utils","$http","post","then","res","code","Error","msg","createGoodsMesg","storeVos","length","platCityGoodsVos","forEach","item","disabled","catch","e","$notify","error","title","message","chooseStoreOpen","_params","$refs","chooseStore","setDefault","chooseGoodsOpen","searchSupplierGoods","chooseGoods","handleSelect","val","row","hash","checkedListTemp","platformCityGoodsId","push","checkedListTempArr","concat","toConsumableArray_default","reduceRight","handleSelectAll","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","value","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_item","checkedListArr","confirmChooseStore","_value","confirmChooseGoods","deleteStoreItem","_row","erpStoreNo","filter","deleteGoodsItem","setDiscountBatch","test","activityGoodsCheckedListTemp","JSON","parse","stringify_default","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","i","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","j","groupPrice","parseFloat","price","toFixed","$message","doSaveHandel","_this2","numReg","salePriceReg","activityStartDateNum","activityEndDateNum","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_item2","activityGoodsName","goodsName","groupCount","limitGoodsCount","curStock","activityTimes","sortNum","requestUrl","extends_default","setTimeout","success","$router","doCancelHandel","_this3","$confirm","confirmButtonText","cancelButtonText","beforeRouteLeave","keepAlive","GroupBuy_EditGBPage","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label","required","staticStyle","color","font-size","font-weight","_v","_s","size","callback","$$v","$set","expression","_e","placeholder","clearable","format","value-format","picker-options","margin-left","icon","on","click","max-height","min-width","scopedSlots","_u","key","fn","scope","erpStoreName","prop","align","width","$event","slot","empty-text","select","select-all","imgUrl","src","alt","onerror","goodsNo","fixed","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/98.489189be324271e46b79.js","sourcesContent":["<style>\r\n  .store-check-wraper {\r\n    border: 1px solid #ececec;\r\n    border-radius: 8px;\r\n    padding: 8px;\r\n    width: 530px;\r\n    box-sizing: border-box;\r\n  }\r\n  .ll-p-m-w {\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n  }\r\n  .ll-img-w {\r\n    width: 60px;\r\n    height: 60px;\r\n  }\r\n  .ll-img-w>img {\r\n    width: 60px;\r\n  }\r\n  .ll-p-m-c-r {\r\n    padding: 0 10px;\r\n  }\r\n  .ll-erp-p-no {\r\n    color: #666;\r\n    font-size: 12px;\r\n  }\r\n  .del-store-icon-w {\r\n    position: absolute;\r\n    top: -8px;\r\n    right: 2px;\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n<template>\r\n  <div>\r\n    <div class=\"add-form-wraper\">\r\n      <el-form ref=\"form\" :model=\"addParamMesg\" label-width=\"140px\">\r\n        <el-form-item label=\"活动类型\" required>\r\n          <p style=\"color: #222;font-size: 16px; font-weight: bold;\">{{addParamMesg.activityTypeName}}</p>\r\n        </el-form-item>\r\n        <el-form-item label=\"选择区域\" required>\r\n          <el-input v-model=\"addParamMesg.regionName\" size=\"small\" class=\"add-input\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动编码\" required v-if=\"optType !== 'copy'\">\r\n          <el-input v-model=\"addParamMesg.activityCode\" size=\"small\" class=\"add-input\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动名称\" required>\r\n          <el-input v-model=\"addParamMesg.activityName\" size=\"small\" class=\"add-input\" placeholder=\"请输入活动名称\" clearable :disabled=\"status === 3 || status === 2\"></el-input>\r\n          <span>活动名称,限制30个汉字</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"开始时间\" required>\r\n          <el-date-picker\r\n            :disabled=\"status === 3 || status === 2\"\r\n            class=\"add-input\"\r\n            v-model=\"addParamMesg.activityStartDate\"\r\n            type=\"datetime\"\r\n            placeholder=\"请选择活动开始时间\"\r\n            format=\"yyyy-MM-dd HH:mm:ss\"\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n            size=\"small\"\r\n            :picker-options=\"pickerOptions\">\r\n          </el-date-picker>\r\n          <span>活动开始时间</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"结束时间\" required>\r\n          <el-date-picker\r\n            :disabled=\"status === 3 || status === 2\"\r\n            class=\"add-input\"\r\n            v-model=\"addParamMesg.activityEndDate\"\r\n            type=\"datetime\"\r\n            placeholder=\"请选择活动结束时间\"\r\n            format=\"yyyy-MM-dd HH:mm:ss\"\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n            size=\"small\"\r\n            :picker-options=\"pickerOptions\">\r\n          </el-date-picker>\r\n          <span>活动结束时间</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"配送方式\" required>\r\n          <div>\r\n            <el-checkbox v-model=\"canDelivery\" :disabled=\"status === 3 || status === 2\">支持配送</el-checkbox>\r\n            <el-radio-group :disabled=\"status === 3 || status === 2\" v-model=\"deliveryTypeTemp\" v-if=\"canDelivery\" style=\"margin-left: 30px;\">\r\n              <el-radio :label=\"1\">支持外卖配送</el-radio>\r\n              <el-radio :label=\"2\">支持快递配送</el-radio>\r\n            </el-radio-group>\r\n          </div>\r\n          <div>\r\n            <el-checkbox :disabled=\"status === 3 || status === 2\" v-model=\"canPickSelf\">支持自提</el-checkbox>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"参与门店\" required>\r\n          <el-button size=\"small\" @click=\"chooseStoreOpen\" icon=\"el-icon-plus\" :disabled=\"status === 3 || status === 2\">选择门店</el-button>\r\n          <div v-if=\"activityStoresCheckedList.length > 0\" class=\"store-check-wraper\">\r\n            <el-table\r\n              class=\"fixed-height\"\r\n              :data=\"activityStoresCheckedList\"\r\n              max-height=\"300\"\r\n              size=\"small\">\r\n              <el-table-column min-width=\"220px\" label=\"门店编码/名称\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    {{scope.row.erpStoreNo}}_{{scope.row.erpStoreName}}\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"80\" prop=\"cityName\" label=\"城市\"></el-table-column>\r\n              <el-table-column min-width=\"80\" prop=\"saleTypeName\" label=\"门店类型\"></el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"100\">\r\n                <template slot-scope=\"scope\" size=\"small\">\r\n                  <el-button @click=\"deleteStoreItem(scope.row)\" type=\"text\" size=\"mini\" icon=\"el-icon-delete\" :disabled=\"status === 3 || status === 2\">删除</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"参与商品\" required>\r\n          <el-button size=\"small\" @click=\"chooseGoodsOpen\" icon=\"el-icon-plus\">选择商品</el-button>\r\n          <div v-if=\"activityGoodsCheckedList.length > 0\">\r\n            <el-input placeholder=\"拼团价折扣(0-100整数)\" class=\"add-input\" size=\"small\" v-model=\"discount\" :disabled=\"status === 3 || status === 2\">\r\n              <el-button slot=\"append\" @click=\"setDiscountBatch\" :disabled=\"status === 3 || status === 2\">确定</el-button>\r\n            </el-input>\r\n\r\n            <el-table\r\n              class=\"fixed-height\"\r\n              :data=\"activityGoodsCheckedList\"\r\n              empty-text=\"暂无选中任何商品\"\r\n              style=\"width:100%;\"\r\n              max-height=\"400\"\r\n              @select=\"handleSelect\"\r\n              @select-all=\"handleSelectAll\"\r\n              size=\"small\">\r\n              <el-table-column\r\n                align=\"center\"\r\n                type=\"selection\">\r\n              </el-table-column>\r\n              <el-table-column min-width=\"220px\" label=\"商品信息\">\r\n                <template slot-scope=\"scope\">\r\n                  <div class=\"ll-p-m-w\">\r\n                    <div class=\"ll-img-w\">\r\n                      <img v-if=\"scope.row.imgUrl && scope.row.imgUrl != ''\" :src=\"scope.row.imgUrl\" alt=\"\" onerror=\"onerror=null;src='/shop/static/img_error.png'\">\r\n                      <img v-else src=\"/shop/static/img_error.png\" alt=\"\">\r\n                    </div>\r\n                    <div class=\"ll-p-m-c-r\">\r\n                      <div>\r\n                        {{scope.row.goodsName || '-'}}\r\n                      </div>\r\n                      <div class=\"ll-erp-p-no\">SKU编码：{{scope.row.goodsNo || '--'}}</div>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"100px\" prop=\"spec\" label=\"规格\"></el-table-column>\r\n              <el-table-column min-width=\"130px\" label=\"活动商品名称\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-input v-model=\"scope.row.activityGoodsName\" size=\"small\" placeholder=\"输入名称\" :disabled = \"scope.row.disabled\"></el-input>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"110px\" label=\"拼团限制\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-radio-group v-model=\"scope.row.limitGroupType\" :disabled = \"scope.row.disabled\">\r\n                      <p><el-radio :label=\"0\">全部</el-radio></p>\r\n                      <p><el-radio :label=\"2\">老用户</el-radio></p>\r\n                      <p><el-radio :label=\"1\">新用户</el-radio></p>\r\n                    </el-radio-group>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"90px\" prop=\"price\" label=\"零售价\"></el-table-column>\r\n              <el-table-column min-width=\"110px\" label=\"拼团价\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-input v-model=\"scope.row.groupPrice\" size=\"small\" placeholder=\"输入价格\" :disabled = \"scope.row.disabled\"></el-input>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"110px\" label=\"成团人数\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-input v-model=\"scope.row.groupCount\" size=\"small\" placeholder=\"输入人数\" :disabled = \"scope.row.disabled\"></el-input>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"150px\" label=\"限购数量(为空不限)\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-input v-model=\"scope.row.limitGoodsCount\" size=\"small\" placeholder=\"输入限购数量\" :disabled = \"scope.row.disabled\"></el-input>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"110px\" label=\"拼团库存\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-input v-model=\"scope.row.curStock\" size=\"small\" placeholder=\"输入库存\" :disabled = \"scope.row.disabled\"></el-input>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"120px\" label=\"成团时长(分钟)\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-input v-model=\"scope.row.activityTimes\" size=\"small\" placeholder=\"输入时长\" :disabled = \"scope.row.disabled\"></el-input>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column min-width=\"110px\" label=\"排序权重\">\r\n                <template slot-scope=\"scope\">\r\n                  <div>\r\n                    <el-input v-model=\"scope.row.sortNum\" size=\"small\" placeholder=\"输入权重\" :disabled = \"scope.row.disabled\"></el-input>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                fixed=\"right\"\r\n                width=\"80\">\r\n                <template slot-scope=\"scope\" size=\"small\">\r\n                  <el-button @click=\"deleteGoodsItem(scope.row)\" type=\"text\" size=\"mini\" icon=\"el-icon-delete\" :disabled = \"scope.row.disabled\">删除</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n            <div>\r\n              <span style=\"color: red;\">*</span>注意：权重排序，先创建的活动商品在前；剩余的按前端规则走。\r\n            </div>\r\n          </div>\r\n        </el-form-item>\r\n\r\n        <hr class=\"s-slip-tb\">\r\n        <el-form-item>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\">保存</el-button>\r\n          <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 选择门店 -->\r\n    <choose-store ref=\"chooseStore\" @confirmChooseStore=\"confirmChooseStore\"></choose-store>\r\n    <!-- 选择商品 -->\r\n    <choose-goods ref=\"chooseGoods\" @confirmChooseGoods=\"confirmChooseGoods\"></choose-goods>\r\n  </div>\r\n</template>\r\n<script>\r\n  import * as utils from '@/utils/utils'\r\n  import ChooseStore from \"@/components/Activity/Common/ChooseStore\"\r\n  import ChooseGoods from \"@/components/Activity/Common/ChooseGoodsFromLib\"\r\n  const reqUrl = {\r\n    // 活动规则编辑跳转\r\n    edit: \"/plateform/a/activityRule/edit\",\r\n    // 修改活动规则\r\n    update: \"/plateform/a/activityRule/update\",\r\n    // 新增活动规则\r\n    add: \"/plateform/a/activityRule/add\"\r\n  }\r\n  export default {\r\n    data() {\r\n      return {\r\n        optType: '', // 此页面操作类型  edit  编辑   copy  复制\r\n        status: 0,\r\n        pickerOptions: {\r\n          disabledDate(time) {\r\n            return time.getTime() < Date.now() - 8.64e7; // 如果没有后面的-8.64e7就是不可以选择今天的\r\n          }\r\n        }, \r\n        isDisabled: false,\r\n        addParamMesg: {\r\n          DIFFCITY: true,\r\n          platformId: 5,\r\n          regionCode: '',\r\n          regionName: '',\r\n          id: '',\r\n          activityId: '', // 活动id\r\n          activityType: '', // 活动类型\r\n          activityTypeName: '', // 活动类型名称\r\n          activityName: '', // 活动名称\r\n          activityStartDate: '', // 活动开始时间\r\n          activityEndDate: '', // 活动结束时间\r\n          activityCode: '', // 活动编码\r\n          // 参与门店\r\n          activityStoreList: [],\r\n          // 活动商品集合\r\n          platCityGoodsInfos: [],\r\n          deliveryType: 0, // 0 不支持配送 1  支持外卖配送   2  支持快递配送\r\n          pickSelf: 0 // 0 不支持自提  1 支持自提\r\n        },\r\n        // 参与门店选中的\r\n        activityStoresCheckedList: [],\r\n        // 参与的选中的商品\r\n        activityGoodsCheckedList: [],\r\n        // 当前选中的商品用于批量设置价格\r\n        checkedList: [],\r\n        // 批量修改折扣\r\n        discount: '',\r\n        // 支持配送\r\n        canDelivery: false,\r\n        deliveryTypeTemp: 0, // 1 支持外卖配送   2 支持自提配送\r\n        // 支持自提\r\n        canPickSelf: false\r\n\r\n      }\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n      if(to.params.type === 'edit') {\r\n        to.meta.breadcrumbList = [\r\n          {name: '营销活动', path: ''},\r\n          {name: '店铺活动', path: '/store_act'},\r\n          {name: '编辑活动', path: ''}\r\n        ]\r\n      }else if(to.params.type === 'copy') {\r\n        to.meta.breadcrumbList = [\r\n          {name: '营销活动', path: ''},\r\n          {name: '店铺活动', path: '/store_act'},\r\n          {name: '复制活动', path: ''}\r\n        ]\r\n      }\r\n      next()\r\n    },\r\n    created() {\r\n      this.addParamMesg.activityId = this.$route.params.activityId\r\n      this.optType = this.$route.params.type\r\n      this.status = this.$route.query.status ? parseInt(this.$route.query.status) : 0\r\n      this.getDetail()\r\n    },\r\n    components: {\r\n      \"choose-store\": ChooseStore,\r\n      \"choose-goods\": ChooseGoods\r\n    },\r\n    methods: {\r\n      /**\r\n       * [getDetail 获取拼团活动详情]\r\n       * @return {[type]} [description]\r\n       */\r\n      getDetail() {\r\n        let activityId = this.addParamMesg.activityId || ''\r\n        utils.showLoading()\r\n        this.$http.post(reqUrl.edit, {activityId: activityId, DIFFCITY: true}).then(res => {\r\n          utils.clearLoading()\r\n          if(res.code === 0) {\r\n            if(res.data) {\r\n              let createGoodsMesg = res.data\r\n              this.addParamMesg.id = createGoodsMesg.id\r\n              this.addParamMesg.activityId = createGoodsMesg.id\r\n              this.addParamMesg.regionCode = createGoodsMesg.regionCode || ''\r\n              this.addParamMesg.regionName = createGoodsMesg.regionName || ''\r\n              this.addParamMesg.activityType = createGoodsMesg.activityType || ''\r\n              this.addParamMesg.activityTypeName = createGoodsMesg.activityTypeName || ''\r\n              this.addParamMesg.activityName = createGoodsMesg.activityName || ''\r\n              this.addParamMesg.activityStartDate = createGoodsMesg.activityStartDate || ''\r\n              this.addParamMesg.activityEndDate = createGoodsMesg.activityEndDate || ''\r\n              this.addParamMesg.activityCode = createGoodsMesg.activityCode || ''\r\n              if(createGoodsMesg.storeVos && createGoodsMesg.storeVos.length) {\r\n                this.activityStoresCheckedList = createGoodsMesg.storeVos\r\n              }\r\n              if(createGoodsMesg.pickSelf === 1) {\r\n                this.canPickSelf = true\r\n              }else {\r\n                this.canPickSelf = false\r\n              }\r\n              if(createGoodsMesg.deliveryType === 0) {\r\n                this.canDelivery = false\r\n                this.deliveryTypeTemp = 1\r\n              }else if(createGoodsMesg.deliveryType === 1) {\r\n                this.canDelivery = true\r\n                this.deliveryTypeTemp = 1\r\n              }else if(createGoodsMesg.deliveryType === 2) {\r\n                this.canDelivery = true\r\n                this.deliveryTypeTemp = 2\r\n              }\r\n              if(createGoodsMesg.platCityGoodsVos && createGoodsMesg.platCityGoodsVos.length) {\r\n                createGoodsMesg.platCityGoodsVos.forEach(item => {\r\n                  item.disabled = this.status === 3 || this.status === 2 ? true : false\r\n                })\r\n                this.activityGoodsCheckedList = createGoodsMesg.platCityGoodsVos\r\n              }\r\n\r\n            }\r\n            return\r\n          }\r\n          throw new Error(res.msg)\r\n        }).catch(e => {\r\n          utils.clearLoading()\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: e.message\r\n          })\r\n        })\r\n      },\r\n      /**\r\n       * [chooseStoreOpen 选择门店]\r\n       * @return {[type]} [description]\r\n       */\r\n      chooseStoreOpen() {\r\n        let _params = {\r\n          title: '选择门店',\r\n          platformId: this.addParamMesg.platformId,\r\n          regionCode: this.addParamMesg.regionCode,\r\n          checkedList: this.activityStoresCheckedList\r\n        }\r\n        this.$refs.chooseStore.setDefault(_params)\r\n      },\r\n      /**\r\n       * [chooseGoodsOpen 选择商品]\r\n       * @return {[type]} [description]\r\n       */\r\n      chooseGoodsOpen() {\r\n        let _params = {\r\n          title: '选择商品',\r\n          regionCode: this.addParamMesg.regionCode,\r\n          checkedList: this.activityGoodsCheckedList,\r\n          searchSupplierGoods: 0\r\n        }\r\n        this.$refs.chooseGoods.setDefault(_params)\r\n      },\r\n      /**\r\n       * [handleSelect 选择某一个]\r\n       * @return {[type]} [description]\r\n       */\r\n      handleSelect(val, row) {\r\n        let hash = {}\r\n        let checkedListTemp = []\r\n\r\n        if(utils.isKeyInArrayBykey(row.platformCityGoodsId, 'platformCityGoodsId', this.checkedList)) {\r\n          this.checkedList = utils.removeItemByKeyVal('platformCityGoodsId', row.platformCityGoodsId, this.checkedList)\r\n          return\r\n        }else {\r\n          checkedListTemp.push(row)\r\n        }\r\n\r\n        let checkedListTempArr = [...checkedListTemp, ...this.checkedList]\r\n        this.checkedList = checkedListTempArr.reduceRight((item, next) => {\r\n          hash[next.platformCityGoodsId] ? '' : hash[next.platformCityGoodsId] = true && item.push(next)\r\n          return item\r\n        }, [])\r\n      },\r\n      /**\r\n       * [handleSelectAll 选择多个]\r\n       * @return {[type]} [description]\r\n       */\r\n      handleSelectAll(val) {\r\n        let hash = {}\r\n        if(val.length > 0) {\r\n          // 全选\r\n          for(let item of val) {\r\n            this.checkedList.push(item)\r\n          }\r\n          // 去重\r\n          this.checkedList = this.checkedList.reduceRight((item, next) => {\r\n            hash[next.platformCityGoodsId] ? '' : hash[next.platformCityGoodsId] = true && item.push(next)\r\n            return item\r\n          }, [])\r\n        }else {\r\n          // 全不选 此时val.length<=0\r\n          // 1.获取当前table中每一条的id\r\n          let checkedListTemp = []\r\n          for(let item of this.activityGoodsCheckedList) {\r\n            checkedListTemp.push(item)\r\n          }\r\n          // 2.从要传递的参数中去掉这些重复的\r\n          let checkedListArr = utils.getSubtract(this.checkedList, checkedListTemp, 'platformCityGoodsId')\r\n          this.checkedList = checkedListArr && checkedListArr.length > 0 ? checkedListArr : []\r\n        }\r\n      },\r\n      /**\r\n       * [confirmChooseStore 选中的门店]\r\n       * @param  {[type]} _value [description]\r\n       * @return {[type]}        [description]\r\n       */\r\n      confirmChooseStore(_value) {\r\n        let activityStoresCheckedList = []\r\n        if(_value.checkedList && _value.checkedList.length) {\r\n          activityStoresCheckedList = _value.checkedList\r\n        }else {\r\n          activityStoresCheckedList = []\r\n        }\r\n        this.activityStoresCheckedList = activityStoresCheckedList\r\n      },\r\n      /**\r\n       * [confirmChooseStore 选中的商品]\r\n       * @param  {[type]} _value [description]\r\n       * @return {[type]}        [description]\r\n       */\r\n      confirmChooseGoods(_value) {\r\n        let activityGoodsCheckedList = []\r\n        if(_value.checkedList && _value.checkedList.length) {\r\n          activityGoodsCheckedList = _value.checkedList\r\n        }else {\r\n          activityGoodsCheckedList = []\r\n        }\r\n        this.activityGoodsCheckedList = activityGoodsCheckedList\r\n      },\r\n      /**\r\n       * [deleteItem 删除选中的门店]\r\n       * @param  {[type]} _row [description]\r\n       * @return {[type]}      [description]\r\n       */\r\n      deleteStoreItem(_row) {\r\n        let erpStoreNo = _row.erpStoreNo\r\n        this.activityStoresCheckedList = this.activityStoresCheckedList.filter(item => {\r\n          return item.erpStoreNo !== erpStoreNo\r\n        })\r\n      },\r\n      /**\r\n       * [deleteItem 删除选中的商品]\r\n       * @param  {[type]} _row [description]\r\n       * @return {[type]}      [description]\r\n       */\r\n      deleteGoodsItem(_row) {\r\n        let platformCityGoodsId = _row.platformCityGoodsId\r\n        this.activityGoodsCheckedList = this.activityGoodsCheckedList.filter(item => {\r\n          return item.platformCityGoodsId !== platformCityGoodsId\r\n        })\r\n      },\r\n      /**\r\n       * [setDiscountBatch 批量设置折扣]\r\n       * @return {[type]} [description]\r\n       */\r\n      setDiscountBatch() {\r\n        let numReg = /^[1-9]*[1-9][0-9]*$/\r\n        if(!this.discount) {\r\n          this.$message(\"请输入拼团价折扣\")\r\n          return\r\n        }else {\r\n          if(!numReg.test(this.discount)) {\r\n            this.$message(\"拼团价折扣为(0-100整数)\")\r\n            return\r\n          }\r\n        }\r\n        if(this.checkedList.length === 0) {\r\n          this.$message(\"请选择商品\")\r\n          return\r\n        }\r\n        let activityGoodsCheckedListTemp = JSON.parse(JSON.stringify(this.activityGoodsCheckedList))\r\n        for(let i of activityGoodsCheckedListTemp) {\r\n          for(let j of this.checkedList) {\r\n            if(i.platformCityGoodsId === j.platformCityGoodsId) {\r\n              i.groupPrice = ((parseFloat(this.discount) * parseFloat(i.price)) / 100).toFixed(2)\r\n            }\r\n          }\r\n        }\r\n        this.activityGoodsCheckedList = activityGoodsCheckedListTemp\r\n        this.checkedList = []\r\n      },\r\n      /**\r\n       * [doSaveHandel 保存]\r\n       * @return {[type]} [description]\r\n       */\r\n      doSaveHandel() {\r\n        let numReg = /^[1-9]*[1-9][0-9]*$/\r\n        let salePriceReg = /((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$/\r\n        let salePriceOnePointReg = /((^[1-9]\\d*))(\\.\\d{0,1}){0,1}$/\r\n\r\n        if(!this.addParamMesg.activityName) {\r\n          this.$message(\"请输入活动名称\")\r\n          return\r\n        }else if(this.addParamMesg.activityName.length > 30) {\r\n          this.$message(\"活动名称限制30个汉字\")\r\n          return\r\n        }\r\n        if(!this.addParamMesg.activityStartDate) {\r\n          this.$message(\"请输入活动开始时间\")\r\n          return\r\n        }\r\n        if(!this.addParamMesg.activityEndDate) {\r\n          this.$message(\"请输入活动结束时间\")\r\n          return\r\n        }\r\n        let activityStartDateNum = Date.parse(new Date(this.addParamMesg.activityStartDate))\r\n        let activityEndDateNum = Date.parse(new Date(this.addParamMesg.activityEndDate))\r\n        let currentDateNum = new Date().getTime()\r\n        if(activityStartDateNum < currentDateNum && this.status !== 3) {\r\n          this.$message(\"活动开始时间不能早于当前时间\")\r\n          return\r\n        }\r\n        if(activityStartDateNum > activityEndDateNum && this.status !== 3) {\r\n          this.$message(\"活动结束时间不能早于开始时间\")\r\n          return\r\n        }\r\n        if(this.canDelivery) {\r\n          this.addParamMesg.deliveryType = parseInt(this.deliveryTypeTemp)\r\n        }else {\r\n          this.addParamMesg.deliveryType = 0\r\n        }\r\n        if(this.canPickSelf) {\r\n          this.addParamMesg.pickSelf = 1\r\n        }else {\r\n          this.addParamMesg.pickSelf = 0\r\n        }\r\n        if(!this.canPickSelf && !this.canDelivery) {\r\n          this.$message(\"请选择配送方式\")\r\n          return\r\n        }\r\n        this.addParamMesg.activityStoreList = []\r\n        if(this.activityStoresCheckedList && this.activityStoresCheckedList.length) {\r\n          for(let item of this.activityStoresCheckedList) {\r\n            this.addParamMesg.activityStoreList.push(item.erpStoreNo)\r\n          }\r\n        }\r\n        if(this.addParamMesg.activityStoreList.length === 0) {\r\n          this.$message(\"请选择参与门店\")\r\n          return\r\n        }\r\n        if(this.activityGoodsCheckedList && this.activityGoodsCheckedList.length) {\r\n          for(let item of this.activityGoodsCheckedList) {\r\n            if(!item.activityGoodsName) {\r\n              this.$message(`请输入(${item.goodsName})的活动商品名称`)\r\n              return\r\n            }else if (item.activityGoodsName.length > 30) {\r\n              this.$message(`请输入(${item.goodsName})的活动商品名称限制30个汉字`)\r\n              return\r\n            }\r\n            if(!item.groupPrice) {\r\n              this.$message(`请输入(${item.goodsName})的拼团价`)\r\n              return\r\n            }else if(!salePriceReg.test(item.groupPrice)) {\r\n              this.$message(`(${item.goodsName})的拼团价是大于0，小数保留小数点后2位`)\r\n              return\r\n            }else {\r\n              if(parseFloat(item.groupPrice) == '0.00') {\r\n                this.$message(`(${item.goodsName})的拼团价是大于0，小数保留小数点后2位`)\r\n                return\r\n              }\r\n            }\r\n            if(parseFloat(item.groupPrice) > item.price) {\r\n              this.$message(`(${item.goodsName})的拼团价必须小于或等于零售价`)\r\n              return\r\n            }\r\n            if(!item.groupCount) {\r\n              this.$message(`请输入(${item.goodsName})的成团人数`)\r\n              return\r\n            }else if(!numReg.test(item.groupCount)) {\r\n              this.$message(`(${item.goodsName})的成团人数为大于零的正整数`)\r\n              return\r\n            }\r\n            if(item.limitGoodsCount) {\r\n              if(!numReg.test(item.limitGoodsCount)) {\r\n                this.$message(`(${item.goodsName})的限购数量为大于零的正整数`)\r\n                return\r\n              }\r\n            }\r\n            if(!item.curStock) {\r\n              this.$message(`请输入(${item.goodsName})的拼团库存`)\r\n              return\r\n            }else if(!numReg.test(item.curStock)) {\r\n              this.$message(`(${item.goodsName})的拼团库存为大于零的正整数`)\r\n              return\r\n            }\r\n            if(!item.activityTimes) {\r\n              this.$message(`请输入(${item.goodsName})的成团时长`)\r\n              return\r\n            }else if(!numReg.test(item.activityTimes)) {\r\n              this.$message(`(${item.goodsName})的成团时长为大于零的正整数`)\r\n              return\r\n            }\r\n            if(!item.sortNum) {\r\n              this.$message(`请输入(${item.goodsName})的排序权重`)\r\n              return\r\n            }else {\r\n              if(!numReg.test(item.sortNum)) {\r\n                this.$message(`(${item.goodsName})的排序权重为1—100正整数`)\r\n                return\r\n              }else {\r\n                if(item.sortNum < 1 || item.sortNum > 100) {\r\n                  this.$message(`(${item.goodsName})的排序权重为1—100正整数`)\r\n                  return\r\n                }\r\n              }\r\n            }\r\n            item.activityStartDate = this.addParamMesg.activityStartDate\r\n            item.activityEndDate = this.addParamMesg.activityEndDate\r\n            item.activityId = this.addParamMesg.activityId\r\n          }\r\n          this.addParamMesg.platCityGoodsInfos = this.activityGoodsCheckedList\r\n        }\r\n        if(this.addParamMesg.platCityGoodsInfos.length === 0) {\r\n          this.$message(\"请选择参与商品\")\r\n          return\r\n        }\r\n        let requestUrl = ''\r\n        if(this.optType === 'edit') {\r\n          requestUrl = reqUrl.update\r\n        }else if(this.optType === 'copy') {\r\n          requestUrl = reqUrl.add\r\n          delete this.addParamMesg.activityId\r\n          delete this.addParamMesg.id\r\n        }else {\r\n          this.$message(\"操作类型不匹配\")\r\n          return\r\n        }\r\n        this.isDisabled = true\r\n        this.$http.post(requestUrl, {...this.addParamMesg}).then(res => {\r\n          // 保存按钮可再次点击\r\n          setTimeout(() => {\r\n            this.isDisabled = false\r\n          }, 800)\r\n          if(res.code === 0) {\r\n            this.$message.success(\"保存成功\")\r\n            this.$router.push('/store_act')\r\n            return\r\n          }\r\n          throw new Error(res.msg)\r\n        }).catch(e => {\r\n          this.isDisabled = false\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: e.message\r\n          })\r\n        })\r\n      },\r\n      doCancelHandel() {\r\n        this.$confirm('确定取消吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.push('/store_act')\r\n        }).catch(() => {})\r\n      }\r\n    },\r\n    /**\r\n     * [beforeRouteLeave 页面离开]\r\n     * @param  {[type]}   to   [description]\r\n     * @param  {[type]}   from [description]\r\n     * @param  {Function} next [description]\r\n     * @return {[type]}        [description]\r\n     */\r\n    beforeRouteLeave (to, from, next){\r\n      to.meta.keepAlive = true;\r\n      next();\r\n    }\r\n  }\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Activity/StoreAct/GroupBuy/EditGBPage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMesg,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"活动类型\",\"required\":\"\"}},[_c('p',{staticStyle:{\"color\":\"#222\",\"font-size\":\"16px\",\"font-weight\":\"bold\"}},[_vm._v(_vm._s(_vm.addParamMesg.activityTypeName))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"选择区域\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.addParamMesg.regionName),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"regionName\", $$v)},expression:\"addParamMesg.regionName\"}})],1),_vm._v(\" \"),(_vm.optType !== 'copy')?_c('el-form-item',{attrs:{\"label\":\"活动编码\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.addParamMesg.activityCode),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityCode\", $$v)},expression:\"addParamMesg.activityCode\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入活动名称\",\"clearable\":\"\",\"disabled\":_vm.status === 3 || _vm.status === 2},model:{value:(_vm.addParamMesg.activityName),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityName\", $$v)},expression:\"addParamMesg.activityName\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动名称,限制30个汉字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"开始时间\",\"required\":\"\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2,\"type\":\"datetime\",\"placeholder\":\"请选择活动开始时间\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"size\":\"small\",\"picker-options\":_vm.pickerOptions},model:{value:(_vm.addParamMesg.activityStartDate),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityStartDate\", $$v)},expression:\"addParamMesg.activityStartDate\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动开始时间\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"结束时间\",\"required\":\"\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2,\"type\":\"datetime\",\"placeholder\":\"请选择活动结束时间\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"size\":\"small\",\"picker-options\":_vm.pickerOptions},model:{value:(_vm.addParamMesg.activityEndDate),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"activityEndDate\", $$v)},expression:\"addParamMesg.activityEndDate\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动结束时间\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"配送方式\",\"required\":\"\"}},[_c('div',[_c('el-checkbox',{attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2},model:{value:(_vm.canDelivery),callback:function ($$v) {_vm.canDelivery=$$v},expression:\"canDelivery\"}},[_vm._v(\"支持配送\")]),_vm._v(\" \"),(_vm.canDelivery)?_c('el-radio-group',{staticStyle:{\"margin-left\":\"30px\"},attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2},model:{value:(_vm.deliveryTypeTemp),callback:function ($$v) {_vm.deliveryTypeTemp=$$v},expression:\"deliveryTypeTemp\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"支持外卖配送\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"支持快递配送\")])],1):_vm._e()],1),_vm._v(\" \"),_c('div',[_c('el-checkbox',{attrs:{\"disabled\":_vm.status === 3 || _vm.status === 2},model:{value:(_vm.canPickSelf),callback:function ($$v) {_vm.canPickSelf=$$v},expression:\"canPickSelf\"}},[_vm._v(\"支持自提\")])],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"参与门店\",\"required\":\"\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-plus\",\"disabled\":_vm.status === 3 || _vm.status === 2},on:{\"click\":_vm.chooseStoreOpen}},[_vm._v(\"选择门店\")]),_vm._v(\" \"),(_vm.activityStoresCheckedList.length > 0)?_c('div',{staticClass:\"store-check-wraper\"},[_c('el-table',{staticClass:\"fixed-height\",attrs:{\"data\":_vm.activityStoresCheckedList,\"max-height\":\"300\",\"size\":\"small\"}},[_c('el-table-column',{attrs:{\"min-width\":\"220px\",\"label\":\"门店编码/名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_vm._v(\"\\n                  \"+_vm._s(scope.row.erpStoreNo)+\"_\"+_vm._s(scope.row.erpStoreName)+\"\\n                \")])]}}],null,false,3945522565)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"80\",\"prop\":\"cityName\",\"label\":\"城市\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"80\",\"prop\":\"saleTypeName\",\"label\":\"门店类型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"disabled\":_vm.status === 3 || _vm.status === 2},on:{\"click\":function($event){return _vm.deleteStoreItem(scope.row)}}},[_vm._v(\"删除\")])]}}],null,false,1442995799)})],1)],1):_vm._e()],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"参与商品\",\"required\":\"\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.chooseGoodsOpen}},[_vm._v(\"选择商品\")]),_vm._v(\" \"),(_vm.activityGoodsCheckedList.length > 0)?_c('div',[_c('el-input',{staticClass:\"add-input\",attrs:{\"placeholder\":\"拼团价折扣(0-100整数)\",\"size\":\"small\",\"disabled\":_vm.status === 3 || _vm.status === 2},model:{value:(_vm.discount),callback:function ($$v) {_vm.discount=$$v},expression:\"discount\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"disabled\":_vm.status === 3 || _vm.status === 2},on:{\"click\":_vm.setDiscountBatch},slot:\"append\"},[_vm._v(\"确定\")])],1),_vm._v(\" \"),_c('el-table',{staticClass:\"fixed-height\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.activityGoodsCheckedList,\"empty-text\":\"暂无选中任何商品\",\"max-height\":\"400\",\"size\":\"small\"},on:{\"select\":_vm.handleSelect,\"select-all\":_vm.handleSelectAll}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"selection\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"220px\",\"label\":\"商品信息\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"ll-p-m-w\"},[_c('div',{staticClass:\"ll-img-w\"},[(scope.row.imgUrl && scope.row.imgUrl != '')?_c('img',{attrs:{\"src\":scope.row.imgUrl,\"alt\":\"\",\"onerror\":\"onerror=null;src='/shop/static/img_error.png'\"}}):_c('img',{attrs:{\"src\":\"/shop/static/img_error.png\",\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"ll-p-m-c-r\"},[_c('div',[_vm._v(\"\\n                      \"+_vm._s(scope.row.goodsName || '-')+\"\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"ll-erp-p-no\"},[_vm._v(\"SKU编码：\"+_vm._s(scope.row.goodsNo || '--'))])])])]}}],null,false,2385194324)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"100px\",\"prop\":\"spec\",\"label\":\"规格\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"130px\",\"label\":\"活动商品名称\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入名称\",\"disabled\":scope.row.disabled},model:{value:(scope.row.activityGoodsName),callback:function ($$v) {_vm.$set(scope.row, \"activityGoodsName\", $$v)},expression:\"scope.row.activityGoodsName\"}})],1)]}}],null,false,4261760090)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"拼团限制\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-radio-group',{attrs:{\"disabled\":scope.row.disabled},model:{value:(scope.row.limitGroupType),callback:function ($$v) {_vm.$set(scope.row, \"limitGroupType\", $$v)},expression:\"scope.row.limitGroupType\"}},[_c('p',[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"全部\")])],1),_vm._v(\" \"),_c('p',[_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"老用户\")])],1),_vm._v(\" \"),_c('p',[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"新用户\")])],1)])],1)]}}],null,false,3627927367)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"90px\",\"prop\":\"price\",\"label\":\"零售价\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"拼团价\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入价格\",\"disabled\":scope.row.disabled},model:{value:(scope.row.groupPrice),callback:function ($$v) {_vm.$set(scope.row, \"groupPrice\", $$v)},expression:\"scope.row.groupPrice\"}})],1)]}}],null,false,825561476)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"成团人数\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入人数\",\"disabled\":scope.row.disabled},model:{value:(scope.row.groupCount),callback:function ($$v) {_vm.$set(scope.row, \"groupCount\", $$v)},expression:\"scope.row.groupCount\"}})],1)]}}],null,false,3791031499)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"150px\",\"label\":\"限购数量(为空不限)\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入限购数量\",\"disabled\":scope.row.disabled},model:{value:(scope.row.limitGoodsCount),callback:function ($$v) {_vm.$set(scope.row, \"limitGoodsCount\", $$v)},expression:\"scope.row.limitGoodsCount\"}})],1)]}}],null,false,1122807865)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"拼团库存\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入库存\",\"disabled\":scope.row.disabled},model:{value:(scope.row.curStock),callback:function ($$v) {_vm.$set(scope.row, \"curStock\", $$v)},expression:\"scope.row.curStock\"}})],1)]}}],null,false,837094322)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"120px\",\"label\":\"成团时长(分钟)\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入时长\",\"disabled\":scope.row.disabled},model:{value:(scope.row.activityTimes),callback:function ($$v) {_vm.$set(scope.row, \"activityTimes\", $$v)},expression:\"scope.row.activityTimes\"}})],1)]}}],null,false,419341151)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"min-width\":\"110px\",\"label\":\"排序权重\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[_c('el-input',{attrs:{\"size\":\"small\",\"placeholder\":\"输入权重\",\"disabled\":scope.row.disabled},model:{value:(scope.row.sortNum),callback:function ($$v) {_vm.$set(scope.row, \"sortNum\", $$v)},expression:\"scope.row.sortNum\"}})],1)]}}],null,false,807054399)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"80\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"disabled\":scope.row.disabled},on:{\"click\":function($event){return _vm.deleteGoodsItem(scope.row)}}},[_vm._v(\"删除\")])]}}],null,false,4281067209)})],1),_vm._v(\" \"),_c('div',[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"注意：权重排序，先创建的活动商品在前；剩余的按前端规则走。\\n          \")])],1):_vm._e()],1),_vm._v(\" \"),_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1),_vm._v(\" \"),_c('choose-store',{ref:\"chooseStore\",on:{\"confirmChooseStore\":_vm.confirmChooseStore}}),_vm._v(\" \"),_c('choose-goods',{ref:\"chooseGoods\",on:{\"confirmChooseGoods\":_vm.confirmChooseGoods}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4d5673b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Activity/StoreAct/GroupBuy/EditGBPage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4d5673b6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditGBPage.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditGBPage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditGBPage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4d5673b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditGBPage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Activity/StoreAct/GroupBuy/EditGBPage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}