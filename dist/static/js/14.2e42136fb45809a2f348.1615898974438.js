webpackJsonp([14],{"/bab":function(t,e,i){"use strict";var a=i("Dd8w"),s=i.n(a),o=i("Gu7T"),r=i.n(o),n=i("RjAO");e.a={data:function(){return{storeNo:"",paperNo:"",editType:"",isDispute:"",orderDetail:{},pageNum:1,pageSize:-1,loading:!1,tableData:[],total:0,searchContent:{goodsNo:"",barcode:"",vendorGoodsNo:""},columnsTemp:[{title:"商品编码",dataIndex:"goodsNo",ellipsis:!0,minWidth:90},{title:"条码",dataIndex:"barcode",ellipsis:!0,minWidth:100},{title:"货号",dataIndex:"vendorGoodsNo",ellipsis:!0,minWidth:100},{title:"商品名称",dataIndex:"goodsName",ellipsis:!0,minWidth:130},{title:"单位",dataIndex:"unit",minWidth:80},{title:"规格",dataIndex:"spec",minWidth:80},{title:"收货数量",dataIndex:"qty",minWidth:80},{title:"收货单价",dataIndex:"price",minWidth:80},{title:"不含税收货金额",dataIndex:"netAmount",minWidth:120},{title:"收货总金额",dataIndex:"amount",minWidth:100}],columns:[]}},created:function(){var t=this;this.storeNo=this.$route.params.storeNo,this.paperNo=this.$route.params.paperNo,this.editType=this.$route.params.type,this.isDispute=this.$route.params.isDispute;var e=[{title:"争议单价",dataIndex:"disputePrice",minWidth:110,placeholder:"争议单价",input:function(){return"edit"===t.editType}},{title:"争议收货数量",dataIndex:"disputeQty",minWidth:120,placeholder:"争议收货数量",input:function(){return"edit"===t.editType}},{title:"备注",dataIndex:"remarks",minWidth:140,placeholder:"备注",ellipsis:!0,input:function(){return"edit"===t.editType}}];"edit"===this.editType?this.columns=[].concat(r()(this.columnsTemp),e):"110"===this.isDispute?this.columns=[].concat(r()(this.columnsTemp),e):this.columns=[].concat(r()(this.columnsTemp))},mounted:function(){this.getGoodsDetail(),this.getGoodsList()},methods:{getGoodsDetail:function(){var t=this,e=n.a.detail+"/"+this.storeNo+"/"+this.paperNo;this.$loading.show(),this.$http.post(e).then(function(e){if(t.$loading.hide(),0!==e.code)throw new Error(e.msg);e.data&&(t.orderDetail=s()({},e.data))}).catch(function(e){t.$loading.hide(),t.$tip.notify(e.message||"","error","系统提示")})},getGoodsList:function(){var t=this;this.loading=!0,this.$http.post(n.a.goodsDetail,s()({},this.searchContent,{paperNo:this.paperNo,storeNo:this.storeNo,pageNum:this.pageNum,pageSize:this.pageSize})).then(function(e){if(t.loading=!1,0===e.code)return t.tableData=e.data&&e.data.result&&e.data.result.length?e.data.result:[],void(t.total=e.data&&e.data.total?e.data.total:0);throw new Error(e.msg)}).catch(function(e){t.loading=!1,t.$tip.notify(e.message||"","error","系统提示")})}}}},PXaw:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),o=i("BO1k"),r=i.n(o),n=i("RCQo"),l=i("/bab"),d=i("8e4C"),c=i("RjAO"),p={mixins:[n.a,l.a],data:function(){return{isDisabled:!1}},methods:{doEditHandel:function(){var t=this,e=this.paperNo,i=this.storeNo,a=this.tableData.filter(function(t){return t.disputePrice||"0"===t.disputePrice||t.disputeQty||"0"===t.disputeQty||t.remarks});if(0!==a.length){var o=!0,n=!1,l=void 0;try{for(var p,u=r()(a);!(o=(p=u.next()).done);o=!0){var h=p.value;if(h.disputePrice&&!d.a.salePriceReg.test(h.disputePrice))return void this.$tip.message("争议单价只允许为大于等于0的数字 (保留两位小数)!","warning");if(h.disputeQty&&!d.a.salePriceReg.test(h.disputeQty))return void this.$tip.message("争议单价只允许为大于等于0的数字 (保留两位小数)!","warning");if(h.remarks&&h.remarks.length>50)return void this.$tip.message("备注：最多允许填写50个字!","warning")}}catch(t){n=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(n)throw l}}var m={paperNo:e,storeNo:i,goodsReqList:a.map(function(t){return{goodsNo:t.goodsNo,disputePrice:t.disputePrice,disputeQty:t.disputeQty,remarks:t.remarks}})};this.isDisabled=!0,this.$http.post(c.a.updateDispute,s()({},m)).then(function(e){if(t.isDisabled=!1,0===e.code)return t.$tip.message("发起争议成功!","success"),t.editSuccessHandel("/reconciliation"),void t.closePage("/reconciliation/detail/detail/"+t.storeNo+"/"+t.paperNo+"/110");throw new Error(e.msg)}).catch(function(e){t.isDisabled=!1,t.$tip.notify(e.message||"","error","系统提示")})}else this.$tip.message("请填写争议内容!","warning")},doCancelHandel:function(){this.closePage("/reconciliation")}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-wrapper"},[i("div",{staticClass:"handel-wraper"},[i("el-row",{attrs:{type:"flex",align:"bottom",gutter:20}},[i("el-col",{attrs:{span:10}},[t._v("收退货单号："+t._s(t.orderDetail.paperNo))]),t._v(" "),i("el-col",{attrs:{span:10}},[t._v("门店/仓库："+t._s(t.orderDetail.storeName))])],1),t._v(" "),i("el-row",{staticClass:"mt6",attrs:{type:"flex",align:"bottom",gutter:20}},[i("el-col",{attrs:{span:10}},[t._v("收货金额："+t._s(t.orderDetail.totalAmount))]),t._v(" "),i("el-col",{attrs:{span:10}},[t._v("对帐金额："+t._s(t.orderDetail.reconciliationAmount))])],1),t._v(" "),i("el-row",{staticClass:"mt6",attrs:{type:"flex",align:"bottom",gutter:20}},[i("el-col",{attrs:{span:10}},[t._v("供应商对帐人："+t._s(t.orderDetail.vReconciliationUserName))]),t._v(" "),i("el-col",{attrs:{span:10}},[t._v("供应商对帐时间："+t._s(t.orderDetail.vReconciliationTime))])],1),t._v(" "),i("el-row",{staticClass:"mt6",attrs:{type:"flex",align:"bottom",gutter:20}},[i("el-col",{attrs:{span:10}},[t._v("本来鲜对帐人："+t._s(t.orderDetail.reconciliationUserName))]),t._v(" "),i("el-col",{attrs:{span:10}},[t._v("本来鲜对帐时间："+t._s(t.orderDetail.reconciliationDate))])],1),t._v(" "),i("el-row",{staticClass:"mt6",attrs:{type:"flex",align:"bottom",gutter:20}},["110"===t.isDispute?i("el-col",{attrs:{span:24}},[t._v("\n        争议内容："),i("span",{staticStyle:{color:"'red'"}},[t._v(t._s(t.orderDetail.disputeText))])]):t._e()],1)],1),t._v(" "),i("div",{staticClass:"search-form-wraper"},[i("el-form",{attrs:{model:t.searchContent,"label-position":"top"}},[i("el-form-item",{attrs:{label:"商品编码"}},[i("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入商品编码",clearable:""},model:{value:t.searchContent.goodsNo,callback:function(e){t.$set(t.searchContent,"goodsNo","string"==typeof e?e.trim():e)},expression:"searchContent.goodsNo"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"条码"}},[i("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入条码",clearable:""},model:{value:t.searchContent.barcode,callback:function(e){t.$set(t.searchContent,"barcode","string"==typeof e?e.trim():e)},expression:"searchContent.barcode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"货号"}},[i("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入货号",clearable:""},model:{value:t.searchContent.vendorGoodsNo,callback:function(e){t.$set(t.searchContent,"vendorGoodsNo","string"==typeof e?e.trim():e)},expression:"searchContent.vendorGoodsNo"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getGoodsList}},[t._v("搜索")])],1)],1),t._v(" "),i("bl-table",{attrs:{loading:t.loading,border:!1,dataSource:t.tableData,columns:t.columns}}),t._v(" "),i("hr",{staticClass:"s-slip-tb"}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small",disabled:t.isDisabled,loading:t.isDisabled},on:{click:t.doEditHandel}},[t._v("提交")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.doCancelHandel}},[t._v("关闭")])],1)])},staticRenderFns:[]};var h=i("VU/8")(p,u,!1,function(t){i("riqZ")},"data-v-3050651c",null);e.default=h.exports},riqZ:function(t,e){}});
//# sourceMappingURL=14.2e42136fb45809a2f348.1615898974438.js.map