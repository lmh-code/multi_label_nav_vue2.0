webpackJsonp([92],{"Q3j+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("bOdI"),s=a.n(r),i=a("oAV5"),d="/plateform/a/preSale/activity/detail",o={data:function(){return{activityId:"",isDisabled:!1,addParamMsg:{regionName:"",regionCode:"",activityName:"",startDatetime:"",endDatetime:"",presaleType:2,cycleType:1,shortCycleType:0,longCycleType:3,cutoffTime:"",shortPickUpType:0,longPickUpType:5,pickUpStartDate:"",pickUpEndDate:"",goodsReqList:[],cutoffTypeName:"",pickUpDate:""},checkedList:[],activityStoresCheckedList:[]}},mounted:function(){this.activityId=this.$route.params.id,this.getDetailMsg()},methods:s()({getDetailMsg:function(){var e=this;i.r(),this.$http.post(d,{activityId:this.activityId,DIFFCITY:!0}).then(function(t){if(i.c(),0!==t.code)throw new Error(t.msg);t.data&&(e.addParamMsg.regionCode=t.data.regionCode,e.addParamMsg.regionName=t.data.regionName,e.addParamMsg.activityName=t.data.activityName,t.data.presaleType&&(e.addParamMsg.presaleType=t.data.presaleType),t.data.cycleType&&(e.addParamMsg.cycleType=t.data.cycleType),e.addParamMsg.cutoffTypeName=t.data.cutoffTypeName||"",t.data.activityStartDate?e.addParamMsg.startDatetime=t.data.activityStartDate:e.addParamMsg.startDatetime="",t.data.activityEndDate?e.addParamMsg.endDatetime=t.data.activityEndDate:e.addParamMsg.endDatetime="",1===parseInt(t.data.presaleType)?e.addParamMsg.pickUpStartDate=t.data.pickUpDate:2===parseInt(t.data.presaleType)&&(1===parseInt(t.data.cycleType)?(e.addParamMsg.shortCycleType=t.data.cutoffDays?parseInt(t.data.cutoffDays):1,e.addParamMsg.shortPickUpType=0):2===parseInt(t.data.cycleType)&&(e.addParamMsg.longCycleType=t.data.cutoffType,e.addParamMsg.longPickUpType=t.data.pickUpType)),e.addParamMsg.pickUpDate=t.data.pickUpDate,e.addParamMsg.cutoffTime=t.data.cutoffTime,t.data.storeNoList&&t.data.storeNoList.length&&(e.activityStoresCheckedList=t.data.storeNoList),e.checkedList=t.data.goodsVoList&&t.data.goodsVoList.length>0?t.data.goodsVoList:[])}).catch(function(t){i.c(),e.$notify.error({title:"提示",message:t.message})})},platformCurStockHeader:function(){var e=this.$createElement;return e("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[e("div",[e("p",["区域限售库存，即所有门店共享的总预售库存；"]),e("p",["门店限售即每个门店的预售库存，可在门店预售商品中调整门店库存；"]),e("p",["每个商品至少要设置一种限售库存方式，最大可设置9999；"]),e("p",["如果既设了区域限售，又设了门店限售，则先校验区域库存，再校验门店库存；"])]),e("span",{slot:"reference"},["区域限售库存",e("i",{class:"el-icon-question"})])])},limitCountHeader:function(){var e=this.$createElement;return e("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover",content:"短周期为每人每天限购数量；长周期为每人每周限购数量；单期预售为每人活动期间限购数量；为空时不限；"}},[e("span",{slot:"reference"},["每人每期限购",e("i",{class:"el-icon-question"})])])},sortNumHeader:function(){var e=this.$createElement;return e("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:"0-299 越大越靠前"}},[e("span",{slot:"reference"},["排序权重",e("i",{class:"el-icon-question"})])])},onCopySuc:function(){this.$message.success("链接已复制至剪切板，仅限微信公众号中使用")},sfInStockHeader:function(){var e=this.$createElement;return e("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[e("div",[e("p",["1、顺丰标品设为顺丰仓现货时，下单会校验仓库库存；"]),e("p",["2、本来鲜生鲜品无需设置；"])]),e("span",{slot:"reference"},["是否为顺丰仓现货",e("i",{class:"el-icon-question"})])])},onCopyError:function(){this.$message.error("复制链接失败,请手动复制")},doCancelHandel:function(){this.$router.push("/pre_act")}},"platformCurStockHeader",function(){var e=this.$createElement;return e("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[e("div",[e("p",["区域限售库存，即所有门店共享的总预售库存；"]),e("p",["门店限售即每个门店的预售库存，可在门店预售商品中调整门店库存；"]),e("p",["每个商品至少要设置一种限售库存方式，最大可设置9999；"]),e("p",["如果既设了区域限售，又设了门店限售，则先校验区域库存，再校验门店库存；"])]),e("span",{slot:"reference"},["区域限售库存",e("i",{class:"el-icon-question"})])])}),beforeRouteLeave:function(e,t,a){e.meta.keepAlive=!0,a()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-form-wraper"},[a("el-form",{ref:"form",attrs:{model:e.addParamMsg,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"选择区域",required:""}},[a("div",[e._v(e._s(e.addParamMsg.regionName))])]),e._v(" "),a("el-form-item",{attrs:{label:"预售活动名称",required:""}},[a("div",[e._v(e._s(e.addParamMsg.activityName))])]),e._v(" "),a("el-form-item",{attrs:{label:"预售类型",required:""}},[2===e.addParamMsg.presaleType?a("div",[e._v("周期预售（起止时间周期性提货，适用于今订明取，或每周固定周几提）")]):1===e.addParamMsg.presaleType?a("div",[e._v("单期预售（结束后，一次性提货，适用于未上市商品，提前预售）")]):e._e()]),e._v(" "),2===e.addParamMsg.presaleType?a("el-form-item",{attrs:{label:"周期类型",required:""}},[1===e.addParamMsg.cycleType?a("div",[e._v("\n        短周期（隔1-2日提）\n      ")]):e._e(),e._v(" "),2===e.addParamMsg.cycleType?a("div",[e._v("\n        长周期（固定每周提）\n      ")]):e._e()]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",required:""}},[a("div",[e._v("\n        "+e._s(e.addParamMsg.startDatetime)+"\n      ")])]),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",required:""}},[a("div",[e._v("\n        "+e._s(e.addParamMsg.endDatetime)+"\n      ")])]),e._v(" "),2==e.addParamMsg.presaleType&&1==e.addParamMsg.cycleType?a("div",[a("el-form-item",{attrs:{label:"截单时间",required:""}},[a("div",[a("span",[e._v(e._s(e.addParamMsg.cutoffTypeName))]),e._v("    "),a("span",[e._v(e._s(e.addParamMsg.cutoffTime))])])]),e._v(" "),a("el-form-item",{attrs:{label:"提货日期",required:""}},[a("div",[e._v("截单后第2天")])])],1):e._e(),e._v(" "),2==e.addParamMsg.presaleType&&2==e.addParamMsg.cycleType?a("div",[a("el-form-item",{attrs:{label:"截单时间",required:""}},[a("div",[a("span",[e._v(e._s(e.addParamMsg.cutoffTypeName))]),e._v("    "),a("span",[e._v(e._s(e.addParamMsg.cutoffTime))])])]),e._v(" "),a("el-form-item",{attrs:{label:"提货日期",required:""}},[a("div",[e._v(e._s(e.addParamMsg.pickUpDate))])])],1):e._e(),e._v(" "),1==e.addParamMsg.presaleType?a("el-form-item",{attrs:{label:"提货日期",required:""}},[a("div",[e._v(e._s(e.addParamMsg.pickUpDate))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"参与门店",required:""}},[e.activityStoresCheckedList.length>0?a("div",{staticClass:"choose-store-table-wrap"},[a("el-table",{staticClass:"fixed-height",attrs:{data:e.activityStoresCheckedList,"empty-text":"暂无选中任何门店","max-height":"300",size:"small"}},[a("el-table-column",{attrs:{"min-width":"230px",label:"门店编码/名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n                "+e._s(t.row.erpStoreNo)+"_"+e._s(t.row.erpStoreName)+"\n              ")])]}}],null,!1,974369925)}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"saleTypeName",label:"门店类型"}})],1)],1):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"设置预售商品",required:""}},[a("el-table",{staticClass:"fixed-height choose-goods-wrap",staticStyle:{width:"100%"},attrs:{data:e.checkedList,"empty-text":"暂无选中任何商品","max-height":"560",size:"small"}},[a("el-table-column",{attrs:{"min-width":"300px",label:"商品信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"ll-p-m-w"},[a("div",{staticClass:"sf-pre-goods-img-w"},[t.row.preSaleImageUrl&&""!=t.row.preSaleImageUrl?a("img",{attrs:{src:t.row.preSaleImageUrl,alt:"",onerror:"onerror=null;src='/shop/static/img_error.png'"}}):a("img",{attrs:{src:"/shop/static/img_error.png",alt:""}})]),e._v(" "),a("div",{staticClass:"ll-p-m-c-r"},[a("div",[e._v("\n                  "+e._s(t.row.goodsName)+"\n                ")]),e._v(" "),a("div",{staticClass:"ll-erp-p-no"},[e._v("SKU编码："+e._s(t.row.goodsNo||"--"))]),e._v(" "),t.row.platformCityGoodsId?a("div",{staticClass:"ll-erp-p-no"},[e._v("商品ID："+e._s(t.row.platformCityGoodsId||"--"))]):e._e()])])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"spec",label:"规格"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"130px",prop:"price",label:"原价(必填)"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"130px",prop:"preSalePrice",label:"预售价(必填)"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"130px","render-header":e.platformCurStockHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.row.platformCurStock)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"130px",label:"门店限售库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.row.stock)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"140px","render-header":e.limitCountHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.row.limitCount)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"140px","render-header":e.sortNumHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.row.sortNum)+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"190px","render-header":e.sfInStockHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("\n              "+e._s(t.row.sfInStock?"是":"否")+"\n            ")])]}}])})],1),e._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("预售活动未发布时可以编辑商品，发布后只可添加新商品，不可再编辑已有商品；")]),e._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("活动进行中时新上门店，请在预售商品中发布至门店；")])],1),e._v(" "),a("hr",{staticClass:"s-slip-tb"}),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:e.doCancelHandel}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(o,l,!1,function(e){a("ZE3e")},"data-v-5b925757",null);t.default=n.exports},ZE3e:function(e,t){}});
//# sourceMappingURL=92.5c16da199437bded88ce.js.map