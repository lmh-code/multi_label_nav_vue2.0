webpackJsonp([127],{Gc5d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=a("bOdI"),s=a.n(i),r=a("BO1k"),d=a.n(r),n=a("pFYg"),c=a.n(n),l=a("Dd8w"),u=a.n(l),m=a("Gu7T"),p=a.n(m),f=a("mvHQ"),v=a.n(f),h=a("ssT3"),g=a("hR2Z"),y=a("VZ4h"),k=a("enjp"),S=a("8uth"),b=a("oAV5"),C=a("cpGA"),_="/foundation/qiniu/auth/file",w="/newretail-shop/a/preSale/goods/checkPreGoodsInsert",N="/plateform/a/activityRule/add",M="/plateform/a/activityRule/edit",x="/plateform/a/activityRule/update",I=/^[1-9]*[1-9][0-9]*$/,L=/((^[1-9]\d*)|^0)(\.\d{0,2}){0,1}$/,D={data:function(){return{status:0,optType:"",pickerOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},isDisabled:!1,addParamMesg:{DIFFCITY:!0,platformId:5,regionCode:h.a.get("regionCode")||"",id:"",activityType:61,activityTypeName:"每日爆款",activityName:"",activityStartDate:"",activityEndDate:"",activityCode:"",activityStoreList:[],activityStoreGroupList:[]},checkedList:[],imageUploadLoading:!1,currentUpFileIdx:-1,activityStoreGroupList:[{performanceDate:"",activityStoresCheckedList:[]}],activityStoresCheckedList:[],tempConfig:{platformCityGoodsId:"区域商品id(必填)",goodsNo:"SKU编码(选填)",skuNo:"ERP商品编码(选填)",activityGoodsName:"活动商品名称(可修改，必填)",price:"原价(必填）",preSalePrice:"活动价(必填)",platformCurStock:"活动库存（选填，为空时不限）",limitCount:"每人每期限购(选填，为空时不限)",sortNum:"排序(必填)",sfInStockStr:"顺丰仓现货（选填，填是/否，空时为是）"},showTipErrorMsg:!1,hasErrorMsgData:[],saveErrorMsgList:[],saveErrTempConfig:{skuNo:"ERP商品编码",goodsName:"商品名称",storeNo:"门店编码",storeName:"门店名称"}}},beforeRouteEnter:function(t,e,a){"edit"===t.params.type?t.meta.breadcrumbList=[{name:"营销活动",path:""},{name:"店铺活动",path:"/store_act"},{name:"编辑活动",path:""}]:"copy"===t.params.type&&(t.meta.breadcrumbList=[{name:"营销活动",path:""},{name:"店铺活动",path:"/store_act"},{name:"复制活动",path:""}]),a()},created:function(){this.addParamMesg.activityId=this.$route.params.activityId,this.optType=this.$route.params.type,this.status=this.$route.query.status?parseInt(this.$route.query.status):0,this.getDetail()},components:{"excel-add":k.a,"choose-store":g.a,"choose-goods":y.a},methods:(o={getDetail:function(){var t=this,e=this.addParamMesg.activityId||"";b.r(),this.$http.post(M,{activityId:e,DIFFCITY:!0}).then(function(e){if(b.c(),0!==e.code)throw new Error(e.msg);if(e.data){var a=e.data;t.addParamMesg.id=a.id,t.addParamMesg.activityId=a.id,t.addParamMesg.regionCode=a.regionCode||"",t.addParamMesg.regionName=a.regionName||"",t.addParamMesg.activityType=a.activityType||"",t.addParamMesg.activityTypeName=a.activityTypeName||"",t.addParamMesg.activityName=a.activityName||"",t.addParamMesg.activityStartDate=a.activityStartDate||"",t.addParamMesg.activityEndDate=a.activityEndDate||"",t.addParamMesg.activityCode=a.activityCode||"",t.activityStoresCheckedList=a.storeGroupVos&&a.storeGroupVos.length?a.storeGroupVos:[],t.activityStoreGroupList=a.storeGroupVos.map(function(t){return{performanceDate:t.performanceDatetime?t.performanceDatetime.substr(0,10):"",activityStoresCheckedList:t.storeVos}}),a.platCityGoodsVos&&a.platCityGoodsVos.length&&(a.platCityGoodsVos.forEach(function(e){e.disabled=3===t.status||2===t.status,e.sfInStock=e.sfInStock}),t.checkedList=a.platCityGoodsVos)}}).catch(function(e){b.c(),t.$notify.error({title:"提示",message:e.message})})},chooseStoreOpen:function(t){var e={title:"选择门店",platformId:this.addParamMesg.platformId,regionCode:this.addParamMesg.regionCode,groupIndex:t,checkedList:this.activityStoreGroupList[t].activityStoresCheckedList,otherCheckedList:this.getCheckedStores(t)};this.$refs.chooseStore.setDefault(e)},showExcelBatchInsertDialog:function(){if(this.$refs.excelAdd){var t={title:"Excel 批量导入",tempConfig:this.tempConfig};this.$refs.excelAdd.setDefaultMsg(t)}},goAddGoodsDialog:function(){if(this.$refs.chooseGoods){var t={title:"选择商品",regionCode:this.addParamMesg.regionCode,checkedList:this.checkedList};this.$refs.chooseGoods.setDefault(t)}},confirmChooseStore:function(t){var e=t.checkedList||[],a=t.groupIndex||0;this.activityStoreGroupList[a].activityStoresCheckedList=e},confirmChooseGoods:function(t){this.checkedList=t.checkedList&&t.checkedList.length?t.checkedList:[]},deleteItem:function(t){var e=t.platformCityGoodsId,a=this.checkedList.filter(function(t){return t.platformCityGoodsId!=e});this.checkedList=JSON.parse(v()(a))},deleteStoreItem:function(t,e){var a=e.erpStoreNo,o=this.activityStoreGroupList[t].activityStoresCheckedList;this.activityStoreGroupList[t].activityStoresCheckedList=o.filter(function(t){return t.erpStoreNo!==a})},setItemIdx:function(t){this.imageUploadLoading||(this.currentUpFileIdx=t)},emitUpload:function(t){var e=this;this.imageUploadLoading=!0,this.getToken().then(function(a){C.upload(t.file,a.fileName,a.token).subscribe({error:function(){e.imageUploadLoading=!1},complete:function(t){var a="http://retailimg01.benlailife.com/"+t.key;e.imageUploadLoading=!1;var o=[].concat(p()(e.checkedList));o.forEach(function(t){t.goodsNo===e.currentUpFileIdx&&(t.preSaleImageUrl=a)}),e.checkedList=o},next:function(t){}})})},imageUploadReg:function(t){var e=-1!==t.type.indexOf("image/"),a="image/jpeg"===t.type||"image/png",o=t.size<=307200;return e&&a&&o||this.$message.error("商品图片建议上传大小不超过300K的710*420像素的jpg或png图片"),e&&a&&o},getToken:function(){var t=this;return this.$http.post(_,{}).then(function(t){if(0==t.code){var e=t.data.token;return{fileName:t.data.key,token:e}}throw new Error(t.msg)}).catch(function(e){t.imageUploadLoading=!1,t.$notify.error({title:"获取七牛token提示",message:e.message})})},doSaveHandel:function(){var t=this;if(this.addParamMesg.activityName)if(this.addParamMesg.activityName.length>30)this.$message("活动名称限制30个汉字");else if(this.addParamMesg.activityStartDate)if(this.addParamMesg.activityEndDate){var e=Date.parse(new Date(this.addParamMesg.activityStartDate.replace(/\-/g,"/"))),a=Date.parse(new Date(this.addParamMesg.activityEndDate.replace(/\-/g,"/")));if(e<(new Date).getTime()&&3!==this.status)this.$message("活动开始时间不能早于当前时间");else if(e>a&&3!==this.status)this.$message("活动结束时间不能早于开始时间");else{this.addParamMesg.activityStoreGroupList=this.activityStoreGroupList.map(function(t,e){return{index:e,performanceDate:t.performanceDate,storeNoList:t.activityStoresCheckedList.map(function(t){return t.erpStoreNo})}});var o=!0,i=!1,s=void 0;try{for(var r,n=d()(this.addParamMesg.activityStoreGroupList);!(o=(r=n.next()).done);o=!0){var l=r.value;if(!l.storeNoList||!l.storeNoList.length)return void this.$message("请选择参与门店/履约时间组中【第"+(l.index+1)+"组】的参与门店");if(!l.performanceDate)return void this.$message("请选择参与门店/履约时间组中【第"+(l.index+1)+"组】的履约时间");if(a>Date.parse(new Date((l.performanceDate+" 23:59:59").replace(/\-/g,"/"))))return void this.$message("参与门店/履约时间组中【第"+(l.index+1)+"组】的履约时间不能早于活动结束时间");l.performanceDatetime=l.performanceDate+" 23:59:59"}}catch(t){i=!0,s=t}finally{try{!o&&n.return&&n.return()}finally{if(i)throw s}}this.addParamMesg.activityStoreList=this.getCheckedStores().map(function(t){return t.erpStoreNo});var m=[],p=!0,f=!1,v=void 0;try{for(var h,g=d()(this.checkedList);!(p=(h=g.next()).done);p=!0){var y=h.value;if(!y.preSaleImageUrl)return void this.$message("请上传("+y.goodsName+")的商品图片");if(!y.activityGoodsName)return void this.$message("请输入("+y.goodsName+")的活动商品名称");if(!y.price&&0!=parseFloat(y.price))return void this.$message("请输入("+y.goodsName+")的原价");if(!L.test(y.price)||0==y.price)return void this.$message("原价是大于0，小数保留小数点后2位");if(!y.groupPrice&&0!=parseFloat(y.groupPrice))return void this.$message("请输入("+y.goodsName+")的活动价");if(!L.test(y.groupPrice)||0==y.groupPrice)return void this.$message("活动价是大于0，小数保留小数点后2位");if(parseFloat(y.groupPrice)>=parseFloat(y.price))return void this.$message("("+y.goodsName+")的原价必须大于活动价");if(0!=y.curStock&&y.curStock&&!I.test(y.curStock))return void this.$message("("+y.goodsName+")的活动库存为大于零的正整数");if(0!=y.limitGoodsCount&&y.limitGoodsCount){if(!I.test(y.limitGoodsCount))return void this.$message("("+y.goodsName+")的限购数量格式不正确");if(y.limitGoodsCount<0)return void this.$message("("+y.goodsName+")的限购数量不能小于0")}if(0!=y.sortNum&&y.sortNum){if(!I.test(y.sortNum))return void this.$message("("+y.goodsName+")的排序权重为0 — 299的整数，越大越靠前");if(y.sortNum<0||y.sortNum>299)return void this.$message("("+y.goodsName+")的排序权重为0 — 299的整数，越大越靠前")}var k={preSaleImageUrl:y.preSaleImageUrl,goodsId:y.goodsId,goodsNo:y.goodsNo,skuNo:y.skuNo,goodsName:y.goodsName,activityGoodsName:y.activityGoodsName,price:y.price,groupPrice:y.groupPrice,curStock:y.curStock,limitGoodsCount:y.limitGoodsCount,sortNum:y.sortNum,spec:y.spec,platformCityGoodsId:y.platformCityGoodsId,sfInStock:y.sfInStock};m.push(k)}}catch(t){f=!0,v=t}finally{try{!p&&g.return&&g.return()}finally{if(f)throw v}}if(0!==m.length){this.addParamMesg.platCityGoodsInfos=m;var S="";if("edit"===this.optType)S=x;else{if("copy"!==this.optType)return void this.$message("操作类型不匹配");S=N,delete this.addParamMesg.activityId,delete this.addParamMesg.id}this.isDisabled=!0,this.$http.post(S,u()({},this.addParamMesg)).then(function(e){if(setTimeout(function(){t.isDisabled=!1},800),0!==e.code)throw new Error(e.msg);e.data&&"object"===c()(e.data)&&e.data.length>0?t.$alert("<div><p>活动保存成功</p><p style='color: red;'>有商品在门店线上不可售</p></div>","温馨提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,cancelButtonText:"下载明细",showConfirmButton:!0,confirmButtonText:"关闭"}).then(function(){}).catch(function(){t.saveErrorMsgList=e.data,t.downLoadSaveErrorMsg()}):(t.$message.success("保存成功"),t.$router.push("/store_act"))}).catch(function(e){t.isDisabled=!1,t.$notify.error({title:"提示",message:e.message})})}else this.$message("请先添加活动商品")}}else this.$message("请输入活动结束时间");else this.$message("请输入活动开始时间");else this.$message("请输入活动名称")},doCancelHandel:function(){var t=this;this.$confirm("确定取消吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.push("/store_act")}).catch(function(){})},doAddStoreGroupHandel:function(){this.activityStoreGroupList.push({performanceDate:"",activityStoresCheckedList:[]})},doMinusStoreGroupHandel:function(t){this.activityStoreGroupList.splice(t,1)},sfInStockHeader:function(){var t=this.$createElement;return t("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[t("div",[t("p",["1、顺丰标品设为顺丰仓现货时，下单会校验仓库库存；"]),t("p",["2、本来鲜生鲜品无需设置；"])]),t("span",{slot:"reference"},["是否为顺丰仓现货",t("i",{class:"el-icon-question"})])])},doConfirmHandel:function(t){var e=this,a=t.dataList||[];a.forEach(function(t){t.activityType=61}),this.$http.post(w,[].concat(p()(a))).then(function(t){if(e.$refs.excelAdd.closeDisabled(),e.$refs.excelAdd.closeDialog(),0!==t.code)throw new Error(t.msg);if(e.hasErrorMsgData=t.data&&t.data.length?t.data:[],e.hasErrorMsgData.forEach(function(t){t.groupPrice=t.preSalePrice,t.curStock=t.platformCurStock,t.limitGoodsCount=t.limitCount}),e.hasErrorMsgData.some(function(t){return 1===t.msgType}))e.showTipErrorMsg=!0;else{var a=[].concat(p()(e.checkedList));a.forEach(function(t){e.hasErrorMsgData.forEach(function(e){t.goodsId===e.goodsId&&t.goodsNo===e.goodsNo&&t.platformCityGoodsId===e.platformCityGoodsId&&t.skuNo===e.skuNo&&(t.activityGoodsName=e.activityGoodsName,t.preSaleImageUrl=e.preSaleImageUrl,t.price=e.price,t.groupPrice=e.groupPrice,t.curStock=e.curStock,t.limitGoodsCount=e.limitGoodsCount,t.sortNum=e.sortNum,t.sfInStock=e.sfInStock)})});var o={};e.checkedList=[].concat(p()(a),p()(e.hasErrorMsgData)).reduceRight(function(t,e){return!o[e.platformCityGoodsId]&&(o[e.platformCityGoodsId]=t.push(e)),t},[])}}).catch(function(t){e.$refs.excelAdd.closeDisabled(),e.$refs.excelAdd.closeDialog(),e.$notify.error({title:"提示",message:t.message})})}},s()(o,"showExcelBatchInsertDialog",function(){if(this.$refs.excelAdd){var t={title:"Excel 批量导入",tempConfig:this.tempConfig};this.$refs.excelAdd.setDefaultMsg(t)}}),s()(o,"downLoadErrorMsg",function(){var t=this,e=u()({},this.tempConfig);e.msgTypeStr="验证结果",e.msg="失败原因",this.hasErrorMsgData.forEach(function(t){t.msgTypeStr=1===t.msgType?"验证失败":"验证成功",t.sfInStockStr=t.sfInStock?"是":"否"});var a=b.o(e,!1),o=b.o(e,!0);S.a.ExportJsonToExcel({header:a,filterVal:o,data:this.hasErrorMsgData,filename:"Excel批量导入模板"}),setTimeout(function(){t.$notify.success({title:"温馨提示",message:"Excel批量导入模板下载成功"}),t.isDisabled=!1},500)}),s()(o,"getCheckedStores",function(t){var e=[];return t||0===t?this.activityStoreGroupList.forEach(function(a,o){o!=t&&(e=[].concat(p()(e),p()(a.activityStoresCheckedList)))}):this.activityStoreGroupList.forEach(function(t){e=[].concat(p()(e),p()(t.activityStoresCheckedList))}),e}),s()(o,"downLoadSaveErrorMsg",function(){var t=this,e=u()({},this.saveErrTempConfig),a=b.o(e,!1),o=b.o(e,!0);S.a.ExportJsonToExcel({header:a,filterVal:o,data:this.saveErrorMsgList,filename:"活动保存失败商品明细"}),setTimeout(function(){t.$notify.success({title:"温馨提示",message:"活动保存失败商品明细下载成功"})},500)}),o),beforeRouteLeave:function(t,e,a){t.meta.keepAlive=!0,a()}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"add-form-wraper"},[a("el-form",{ref:"form",attrs:{model:t.addParamMesg,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动类型",required:""}},[a("p",{staticStyle:{color:"#222","font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.addParamMesg.activityTypeName))])]),t._v(" "),a("el-form-item",{attrs:{label:"选择区域",required:""}},[a("el-input",{staticClass:"add-input",attrs:{size:"small",disabled:""},model:{value:t.addParamMesg.regionName,callback:function(e){t.$set(t.addParamMesg,"regionName",e)},expression:"addParamMesg.regionName"}})],1),t._v(" "),"copy"!==t.optType?a("el-form-item",{attrs:{label:"活动编码",required:""}},[a("el-input",{staticClass:"add-input",attrs:{size:"small",disabled:""},model:{value:t.addParamMesg.activityCode,callback:function(e){t.$set(t.addParamMesg,"activityCode",e)},expression:"addParamMesg.activityCode"}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"活动名称",required:""}},[a("el-input",{staticClass:"add-input",attrs:{size:"small",placeholder:"请输入活动名称",clearable:"",disabled:3===t.status||2===t.status},model:{value:t.addParamMesg.activityName,callback:function(e){t.$set(t.addParamMesg,"activityName",e)},expression:"addParamMesg.activityName"}}),t._v(" "),a("span",[t._v("活动名称,限制30个汉字")])],1),t._v(" "),a("el-form-item",{attrs:{label:"开始时间",required:""}},[a("el-date-picker",{staticClass:"add-input",attrs:{type:"datetime",placeholder:"请选择活动开始时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",size:"small","picker-options":t.pickerOptions,disabled:3===t.status||2===t.status},model:{value:t.addParamMesg.activityStartDate,callback:function(e){t.$set(t.addParamMesg,"activityStartDate",e)},expression:"addParamMesg.activityStartDate"}}),t._v(" "),a("span",[t._v("活动开始时间")])],1),t._v(" "),a("el-form-item",{attrs:{label:"结束时间",required:""}},[a("el-date-picker",{staticClass:"add-input",attrs:{type:"datetime",placeholder:"请选择活动结束时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",size:"small","picker-options":t.pickerOptions,disabled:3===t.status||2===t.status},model:{value:t.addParamMesg.activityEndDate,callback:function(e){t.$set(t.addParamMesg,"activityEndDate",e)},expression:"addParamMesg.activityEndDate"}}),t._v(" "),a("span",[t._v("活动结束时间")])],1),t._v(" "),a("el-form-item",{attrs:{label:"门店/履约时间",required:""}},t._l(t.activityStoreGroupList,function(e,o){return a("div",{key:o,staticClass:"store-pre-time-item-wrap",class:o>0?"mt10":null},[a("div",{staticClass:"item-right"},[a("div",[a("span",[t._v("参与门店")]),t._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-plus",disabled:3===t.status||2===t.status},on:{click:function(e){return t.chooseStoreOpen(o)}}},[t._v("选择门店")]),t._v(" "),e.activityStoresCheckedList.length>0?a("div",[a("el-table",{staticClass:"fixed-height",attrs:{data:e.activityStoresCheckedList,"empty-text":"暂无选中任何门店","max-height":"250",size:"small"}},[a("el-table-column",{attrs:{"min-width":"220px",label:"门店编码/名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.erpStoreNo)+"_"+t._s(e.row.erpStoreName))])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{"min-width":"80",prop:"cityName",label:"城市"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"80",prop:"saleTypeName",label:"门店类型"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete",disabled:3===t.status||2===t.status},on:{click:function(a){return t.deleteStoreItem(o,e.row)}}},[t._v("删除")])]}}],null,!0)})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"mt10"},[a("span",[t._v("履约时间")]),t._v(" "),a("el-date-picker",{staticClass:"search-input",attrs:{type:"date",placeholder:"请选择履约时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small","picker-options":t.pickerOptions,disabled:3===t.status||2===t.status},model:{value:e.performanceDate,callback:function(a){t.$set(e,"performanceDate",a)},expression:"item.performanceDate"}}),t._v(" "),a("span",[t._v("门店仅支持自提则为自提时间")])],1)]),t._v(" "),a("div",{staticClass:"item-left"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus",circle:"",disabled:3===t.status||2===t.status},on:{click:t.doAddStoreGroupHandel}}),t._v(" \n            "),t.activityStoreGroupList.length>1?a("el-button",{attrs:{size:"mini",icon:"el-icon-minus",circle:"",disabled:3===t.status||2===t.status},on:{click:function(e){return t.doMinusStoreGroupHandel(o)}}}):t._e()],1)])}),0),t._v(" "),a("el-form-item",{attrs:{label:"活动商品",required:""}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:t.goAddGoodsDialog}},[t._v("添加商品")]),t._v(" "),3!==t.status&&2!==t.status?a("el-button",{attrs:{size:"mini",icon:"el-icon-plus"},on:{click:t.showExcelBatchInsertDialog}},[t._v("Excel批量导入")]):t._e(),t._v("    \n        "),a("span",{staticStyle:{color:"red"}},[t._v("*注意：")]),t._v(" "),a("span",[t._v("商品图片建议上传大小不超过300K的710*420像素的jpg或png图片")]),t._v(" "),a("el-table",{staticClass:"fixed-height choose-goods-wrap",staticStyle:{width:"100%"},attrs:{data:t.checkedList,"empty-text":"暂无选中任何商品","max-height":"560",size:"small"}},[a("el-table-column",{attrs:{"min-width":"300px",label:"商品信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ll-p-m-w"},[a("div",{staticClass:"mh-up-w",on:{click:function(a){return t.setItemIdx(e.row.goodsNo)}}},[a("el-upload",{staticClass:"avatar-uploader-sf-goods-img",attrs:{action:"","show-file-list":!1,"before-upload":t.imageUploadReg,"http-request":t.emitUpload,disabled:e.row.disabled}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.imageUploadLoading&&t.currentUpFileIdx==e.row.goodsNo,expression:"imageUploadLoading && currentUpFileIdx == scope.row.goodsNo"}]},[e.row.preSaleImageUrl?a("span",[a("img",{staticClass:"avatar-sf-goods",attrs:{src:e.row.preSaleImageUrl}})]):a("i",{staticClass:"el-icon-plus avatar-uploader-sf-icon"})])])],1),t._v(" "),a("div",{staticClass:"ll-p-m-c-r"},[a("div",[t._v("\n                    "+t._s(e.row.goodsName||"--")+"\n                  ")]),t._v(" "),a("div",{staticClass:"ll-erp-p-no"},[t._v("SKU编码："+t._s(e.row.goodsNo||"--"))]),t._v(" "),a("div",{staticClass:"ll-erp-p-no"},[t._v("商品ID："+t._s(e.row.platformCityGoodsId||"--"))]),t._v(" "),a("div",{staticClass:"ll-erp-p-no"},[t._v("商品编码："+t._s(e.row.goodsId||"--"))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"spec",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",label:"活动商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{disabled:e.row.disabled,size:"small",placeholder:"输入名称"},model:{value:e.row.activityGoodsName,callback:function(a){t.$set(e.row,"activityGoodsName",a)},expression:"scope.row.activityGoodsName"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",label:"原价(必填)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{size:"small",placeholder:"输入原价",disabled:e.row.disabled},model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",label:"活动价(必填)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{size:"small",placeholder:"输入活动价",disabled:e.row.disabled},model:{value:e.row.groupPrice,callback:function(a){t.$set(e.row,"groupPrice",a)},expression:"scope.row.groupPrice"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",label:"活动库存(选填)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{size:"small",placeholder:"门店限售库存",disabled:e.row.disabled},model:{value:e.row.curStock,callback:function(a){t.$set(e.row,"curStock",a)},expression:"scope.row.curStock"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"140px",label:"每人限购"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{size:"small",placeholder:"每人限购",disabled:e.row.disabled},model:{value:e.row.limitGoodsCount,callback:function(a){t.$set(e.row,"limitGoodsCount",a)},expression:"scope.row.limitGoodsCount"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"140px",label:"排序权重"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{attrs:{size:"small",placeholder:"排序（0-299越大越靠前）",disabled:e.row.disabled},model:{value:e.row.sortNum,callback:function(a){t.$set(e.row,"sortNum",a)},expression:"scope.row.sortNum"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"190px","render-header":t.sfInStockHeader},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-radio",{attrs:{disabled:e.row.disabled,label:!0},model:{value:e.row.sfInStock,callback:function(a){t.$set(e.row,"sfInStock",a)},expression:"scope.row.sfInStock"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{disabled:e.row.disabled,label:!1},model:{value:e.row.sfInStock,callback:function(a){t.$set(e.row,"sfInStock",a)},expression:"scope.row.sfInStock"}},[t._v("否")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete",disabled:e.row.disabled},on:{click:function(a){return t.deleteItem(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动未发布时可以编辑商品，发布后只可添加新商品，不可再编辑已有商品；\n        ")]),t._v(" "),a("p",[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动进行中时新上门店，请在活动商品中发布至门店；\n        ")])],1),t._v(" "),a("hr",{staticClass:"s-slip-tb"}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",disabled:t.isDisabled,icon:t.isDisabled?"el-icon-loading":null},on:{click:t.doSaveHandel}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.doCancelHandel}},[t._v("取消")])],1)],1)],1),t._v(" "),a("choose-store",{ref:"chooseStore",on:{confirmChooseStore:t.confirmChooseStore}}),t._v(" "),a("excel-add",{ref:"excelAdd",on:{doConfirmHandel:t.doConfirmHandel}}),t._v(" "),a("choose-goods",{ref:"chooseGoods",on:{confirmChooseGoods:t.confirmChooseGoods}}),t._v(" "),a("el-dialog",{attrs:{title:"批量导入失败",visible:t.showTipErrorMsg,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"450px"},on:{"update:visible":function(e){t.showTipErrorMsg=e}}},[a("div",[t._v("\n      部分商品不符合要求，请按要求修改后再重新导入。"),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:t.downLoadErrorMsg}},[t._v("下载查看失败原因")])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showTipErrorMsg=!1}}},[t._v("关 闭")])],1)])],1)},staticRenderFns:[]};var $=a("VU/8")(D,G,!1,function(t){a("HtLW")},null,null);e.default=$.exports},HtLW:function(t,e){}});
//# sourceMappingURL=127.fd9931fbea35443c7a92.js.map