{"version":3,"sources":["webpack:///src/module/views/Reconciliation/Settlement/invoiceLine.vue","webpack:///./src/module/views/Reconciliation/Settlement/invoiceLine.vue?5d4c","webpack:///./src/module/views/Reconciliation/Settlement/invoiceLine.vue","webpack:///src/module/views/Reconciliation/Settlement/InvoiceDialog.vue","webpack:///./src/module/views/Reconciliation/Settlement/InvoiceDialog.vue?05c3","webpack:///./src/module/views/Reconciliation/Settlement/InvoiceDialog.vue","webpack:///src/module/views/Reconciliation/Settlement/index.vue","webpack:///./src/module/views/Reconciliation/Settlement/index.vue?0876","webpack:///./src/module/views/Reconciliation/Settlement/index.vue"],"names":["invoiceLine","model","prop","event","props","cantEdit","type","Boolean","default","loading","info","Object","lineId","invoiceTypeCode","invoiceDate","invoiceCode","invoiceNo","netAmount","taxCode","taxAmount","invoiceTypeCodeOptions","Array","taxCodeOptions","data","computed","amount","this","length","utils","methods","deleteLine","_this","$confirm","confirmButtonText","cancelButtonText","then","$emit","handleChange","e","extends_default","Settlement_invoiceLine","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","gutter","label-width","size","label-position","span","icon","circle","on","click","_v","label","disabled","placeholder","change","callback","$$v","$set","_l","item","key","staticStyle","width","format","value-format","clearable","multiple","collapse-tags","_s","staticRenderFns","Reconciliation_Settlement_invoiceLine","__webpack_require__","normalizeComponent","ssrContext","salePriceReg","InvoiceDialog","components","file-upload","FileUpload","invoice-line","dialogVisible","settlementNo","startDate","endDate","statusNameForVendor","invoiceAmount","invoicedAmount","id","filePaths","invoiceBatchNumber","previewFileList","invoiceDetailList","totalAmount","uploadStyleObj","maxHeight","overflow","addLine","$tip","message","push","Date","now","deleteInvoiceLine","some","i","splice","index","findIndex","t","calTotalAmount","reduce","prev","curr","setDefaultMsg","header","getCommonCodes","invoiceId","settlement","_this2","$http","post","common","listByCommonCodes","res","code","InvoiceType","map","TAX","Error","msg","catch","console","log","handleCancel","_this3","checkLine","line","test","Math","abs","parseFloat","handleSubmit","_this4","invoiceNumber","inTaxs","join","invoiceMoney","taxMoney","noTaxMoney","reqUrl","_params","filePathUrls","editInvoice","concat","toConsumableArray_default","accountName","accountSet","settlementNumbers","supplierName","batchNumber","supplierNumber","addInvoice","notify","resetHandle","getInvoiceMsg","_invoiceId","_this5","invoiceDetails","invoiceFiles","inoviceType","invoiceTimeDate","inTax","split","setFileList","_ref","filesList","path","Settlement_InvoiceDialog","title","visible","close-on-click-modal","destroy-on-close","show-close","update:visible","$event","_e","ref","fileAspectType","maxFilesNum","styleObj","tipText","files-change","slot","InvoiceDialog_Component","InvoiceDialog_normalizeComponent","__webpack_exports__","Settlement","mixins","getVendors","research","invoice-dialog","searchContent","settlementStartDate","parse","settlementEndDate","searchSupplierNumberList","status","settlementNumber","cooperationMode","inNumber","outNumber","statusOptionsArr","typeIdOptions","totalSettlementAmount","settledAmount","settledQty","unsettledQty","exportLoading","tableData","total","pageNum","pageSize","checkedList","exportConfigForDetail","vendorName","cooperationModeName","accountPeriod","goodsName","goodsNo","vendorGoodsNo","barcode","spec","taxPct","averageUnitPrice","qty","columns","dataIndex","minWidth","ellipsis","fixed","operation","clickFunc","goDetailPage","isDisabled","row","invoiceHandel","mounted","getStatus","initMounted","vendors","doSearchHandle","setTimeout","VendorSettleStatus1","unshift","TRADEM4","getListTotal","vendorNo","listTotal","selectionChangeHandel","selection","doSearchHandleRequest","firstPage","_searchContent","replace","settlementList","tableDataList","totalSettlementCount","params","changeSize","changeCurrent","doExportDataDetailHandel","settlementNoList","export","createTime","result","forEach","toFixed","tHeader","filterVal","exportExcel","ExportJsonToExcel","filename","$router","statusName","shoudInvoiceMoney","havedInvoiceMoney","$refs","invoiceDialog","Reconciliation_Settlement","filterable","border","dataSource","showSummary","selection-change","showPagination","size-change","current-change","parentsHandel","Component"],"mappings":"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","file":"static/js/8.4364535755d2c37627c8.1615898974438.js","sourcesContent":["<template>\n  <el-row class=\"invoice-form\" v-loading =\"loading\" :gutter=\"6\">\n      <el-form label-width=\"40px\" size=\"small\" label-position=\"top\">\n        <el-col :span=\"1\">\n          <el-button size=\"mini\" icon=\"el-icon-delete\" class=\"fs28 mt28\" circle @click=\"deleteLine\"></el-button>\n            <!-- <i class=\"el-icon-delete fs28 mt28\" @click=\"deleteLine\"></i> -->\n        </el-col>\n        <el-col :span=\"3\">\n          <el-form-item label=\"发票种类:\" >\n            <el-select v-model=\"info.invoiceTypeCode\" :disabled=\"cantEdit\" placeholder=\"请选择\" @change=\"handleChange\">\n              <el-option\n                v-for=\"item in invoiceTypeCodeOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-form-item label=\"发票日期:\">\n            <el-date-picker \n              :disabled=\"cantEdit\"\n              v-model=\"info.invoiceDate\" \n              type=\"date\"\n              style=\"width: 100%\"\n              placeholder=\"发票日期\"\n              format=\"yyyy-MM-dd\" \n              value-format=\"yyyy-MM-dd\"\n              @change=\"handleChange\" >\n            </el-date-picker>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-form-item label=\"发票代码:\">\n            <el-input v-model=\"info.invoiceCode\" :disabled=\"cantEdit\" placeholder=\"发票代码\" clearable @change=\"handleChange\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-form-item label=\"发票号:\">\n            <el-input v-model=\"info.invoiceNo\" :disabled=\"cantEdit\" placeholder=\"发票号\" clearable @change=\"handleChange\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-form-item label=\"发票金额:\">\n            <el-input v-model=\"info.netAmount\" :disabled=\"cantEdit\" type=\"number\" clearable placeholder=\"不含税金额\" @change=\"handleChange\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-form-item label=\"税率:\">\n            <el-select v-model=\"info.taxCode\" :disabled=\"cantEdit\" multiple collapse-tags placeholder=\"请选择\" @change=\"handleChange\">\n              <el-option\n                v-for=\"item in taxCodeOptions\"\n                :key=\"item.value\"\n                :label=\"item.value\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-form-item label=\"税额:\">\n            <el-input v-model=\"info.taxAmount\" :disabled=\"cantEdit\" type=\"number\" clearable placeholder=\"税额\" @change=\"handleChange\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"2\">\n          <el-form-item label=\"价税合计:\">\n            {{amount}}\n          </el-form-item>\n        </el-col>\n      </el-form>\n    </el-row>\n</template>\n\n<script>\nimport { fixedNum } from '@/utils/utils'\nexport default {\n  model: {\n    prop: \"info\",\n    event: \"change\"\n  },\n  props: {\n    cantEdit: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    info: {\n      type: Object,\n      default: {\n        lineId: '',\n        invoiceTypeCode: '',\n        invoiceDate: '',\n        invoiceCode: '',\n        invoiceNo: '',\n        netAmount: '',\n        taxCode: '',\n        taxAmount: ''\n      }\n    },\n    invoiceTypeCodeOptions: {\n      type: Array,\n      default: []\n    },\n    taxCodeOptions: {\n      type: Array,\n      default: []\n    }\n  },\n  data() {\n    return {\n      invoiceTypeCode: 1,\n      taxCode: ['0'], //税率\n      invoiceDate: '',\n      invoiceCode: '',\n      invoiceNo: '',\n      netAmount: '', //发票金额\n      taxAmount: '', //税额\n    }\n  },\n  computed: {\n    amount() {\n      if(this.info.taxCode.length == 1 && this.info.netAmount) {\n        if(this.info.taxCode[0] == '0') {\n          this.info.taxAmount = 0\n          return fixedNum(this.info.netAmount)\n        } else {\n          this.info.taxAmount = fixedNum((this.info.netAmount * +this.info.taxCode[0])/100)\n          return fixedNum((+this.info.netAmount * 10000 + this.info.taxAmount * 10000)/10000)\n        }\n      } else if(this.info.taxCode.length > 1 && this.info.netAmount) {\n        // this.taxAmount = ''\n        return fixedNum((+this.info.taxAmount * 10000 + +this.info.netAmount * 10000)/10000)\n      } else if(!this.info.netAmount) {\n        this.info.taxAmount = ''\n      }\n      return '--'\n    }\n  },\n  methods: {\n    deleteLine() {\n      this.$confirm('确定要删除该发票吗', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$emit('deleteInvoiceLine', this.info.lineId)\n      })\n     \n    },\n    handleChange(e) {\n      this.$emit('change', {...this.info, ...{amount: this.amount === '--' ? 0 : this.amount}})\n    }\n  }\n}\n</script>\n<style scoped>\n.fs28 {\n  font-size: 28px;\n}\n.mt28 {\n  margin-top: 28px;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/module/views/Reconciliation/Settlement/invoiceLine.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"invoice-form\",attrs:{\"gutter\":6}},[_c('el-form',{attrs:{\"label-width\":\"40px\",\"size\":\"small\",\"label-position\":\"top\"}},[_c('el-col',{attrs:{\"span\":1}},[_c('el-button',{staticClass:\"fs28 mt28\",attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":_vm.deleteLine}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"发票种类:\"}},[_c('el-select',{attrs:{\"disabled\":_vm.cantEdit,\"placeholder\":\"请选择\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.info.invoiceTypeCode),callback:function ($$v) {_vm.$set(_vm.info, \"invoiceTypeCode\", $$v)},expression:\"info.invoiceTypeCode\"}},_vm._l((_vm.invoiceTypeCodeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"发票日期:\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":_vm.cantEdit,\"type\":\"date\",\"placeholder\":\"发票日期\",\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.info.invoiceDate),callback:function ($$v) {_vm.$set(_vm.info, \"invoiceDate\", $$v)},expression:\"info.invoiceDate\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"发票代码:\"}},[_c('el-input',{attrs:{\"disabled\":_vm.cantEdit,\"placeholder\":\"发票代码\",\"clearable\":\"\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.info.invoiceCode),callback:function ($$v) {_vm.$set(_vm.info, \"invoiceCode\", $$v)},expression:\"info.invoiceCode\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"发票号:\"}},[_c('el-input',{attrs:{\"disabled\":_vm.cantEdit,\"placeholder\":\"发票号\",\"clearable\":\"\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.info.invoiceNo),callback:function ($$v) {_vm.$set(_vm.info, \"invoiceNo\", $$v)},expression:\"info.invoiceNo\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"发票金额:\"}},[_c('el-input',{attrs:{\"disabled\":_vm.cantEdit,\"type\":\"number\",\"clearable\":\"\",\"placeholder\":\"不含税金额\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.info.netAmount),callback:function ($$v) {_vm.$set(_vm.info, \"netAmount\", $$v)},expression:\"info.netAmount\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"税率:\"}},[_c('el-select',{attrs:{\"disabled\":_vm.cantEdit,\"multiple\":\"\",\"collapse-tags\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.info.taxCode),callback:function ($$v) {_vm.$set(_vm.info, \"taxCode\", $$v)},expression:\"info.taxCode\"}},_vm._l((_vm.taxCodeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.value,\"value\":item.value}})}),1)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":3}},[_c('el-form-item',{attrs:{\"label\":\"税额:\"}},[_c('el-input',{attrs:{\"disabled\":_vm.cantEdit,\"type\":\"number\",\"clearable\":\"\",\"placeholder\":\"税额\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.info.taxAmount),callback:function ($$v) {_vm.$set(_vm.info, \"taxAmount\", $$v)},expression:\"info.taxAmount\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-form-item',{attrs:{\"label\":\"价税合计:\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.amount)+\"\\n        \")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-eb74c71a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/Reconciliation/Settlement/invoiceLine.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eb74c71a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./invoiceLine.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./invoiceLine.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./invoiceLine.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-eb74c71a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./invoiceLine.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-eb74c71a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/Reconciliation/Settlement/invoiceLine.vue\n// module id = null\n// module chunks = ","<template>\n  <el-dialog\n    title=\"发票\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1080px\"\n    :close-on-click-modal=\"false\"\n    :destroy-on-close=\"true\"\n    :show-close=\"false\">\n    <el-row class=\"title-box\" v-loading =\"loading\">\n      <el-col :span=\"8\">结算单号：{{settlementNo}}</el-col>\n      <el-col :span=\"8\">账期：{{startDate}}至{{endDate}}</el-col>\n      <el-col :span=\"8\">状态：{{statusNameForVendor}}</el-col>\n      <el-col :span=\"8\">应开票金额：￥{{invoiceAmount}}</el-col>\n      <el-col :span=\"8\">已开票金额：￥{{invoicedAmount}}</el-col>\n      <el-col :span=\"8\">待开票：￥{{invoiceAmount - invoicedAmount}}</el-col>\n    </el-row>\n    <el-row class=\"operation-box\">\n      <el-button type=\"primary\" @click=\"addLine\">添加发票</el-button>\n    </el-row>\n    <div class=\"el-dialog-div\">\n    <template v-if=\"invoiceDetailList.length\">\n      <invoice-line\n        v-for=\"(item, index) in invoiceDetailList\"\n        :key=\"index\"\n        :cantEdit=\"cantEdit\"\n        :loading=\"loading\"\n        :info=\"item\"\n        :invoiceTypeCodeOptions=\"invoiceTypeCodeOptions\"\n        :taxCodeOptions=\"taxCodeOptions\"\n        @deleteInvoiceLine=\"deleteInvoiceLine\"\n        @change=\"handleChange\">\n      </invoice-line>\n    </template>\n     </div>\n    <el-row class=\"invoice-total\" v-loading =\"loading\">\n      <el-form>\n        <el-col :span=\"24\">\n          <el-form-item label=\"总金额:\">\n            ￥{{totalAmount}}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form-item label=\"附件:\">\n            <file-upload\n              ref=\"fileUpload\" \n              @files-change=\"setFileList\"\n              :previewFileList=\"previewFileList\"\n              :fileAspectType=\"['jpg', 'doc', 'png', 'docx', 'pdf', 'jpeg']\"\n              :maxFilesNum=\"5\"\n              :styleObj=\"uploadStyleObj\"\n              tipText=\"限上传5张图片或PDF，单张不可超20MB\"/>\n          </el-form-item>\n        </el-col>\n        <!-- <el-col :span=\"12\">\n          <el-form-item label=\"备注:\">\n            <el-input\n              :disabled=\"cantEdit\"\n              type=\"textarea\"\n              :autosize=\"{ minRows: 2, maxRows: 4}\"\n              placeholder=\"请输入备注信息\"\n              v-model=\"remark\">\n            </el-input>\n          </el-form-item>\n        </el-col> -->\n      </el-form>\n    </el-row>\n    <span slot=\"footer\" class=\"dialog-footer\" v-loading =\"loading\">\n      <el-button @click=\"handleCancel\" size=\"mini\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"handleSubmit\" size=\"mini\" :disabled=\"cantEdit\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n<script>\nimport commonUrl from '@/module/api/common'\nimport settlementUrl from '@/module/api/settlement'\nconst salePriceReg = /((^[1-9]\\d*)|^0)(\\.\\d{0,2}){0,1}$/\nimport { fixedNum } from '@/utils/utils'\nimport FileUpload from '@/components/Common/File/FileUpload'\nimport InvoiceLine from './invoiceLine'\nexport default {\n  components: {\n    'file-upload': FileUpload,\n    'invoice-line': InvoiceLine\n  },\n  data() {\n    return {\n      type: '',\n      dialogVisible: false,\n      settlementNo:'',\n      startDate: '',\n      endDate: '',\n      statusNameForVendor: '',\n      invoiceAmount: '',\n      invoicedAmount: '',\n      invoiceTypeCodeOptions: [],\n      taxCodeOptions: [],\n      loading: false,\n      cantEdit: false,\n      id: '',\n      // 表单数据\n      invoiceTypeCode: 1,\n      taxCode: ['0'], //税率\n      invoiceDate: '',\n      invoiceCode: '',\n      invoiceNo: '',\n      netAmount: '', //发票金额\n      taxAmount: '', //税额\n      // remark: '',\n      filePaths: [],\n      invoiceBatchNumber: '',\n      previewFileList: [],\n      invoiceDetailList: [],\n      totalAmount: '',\n      uploadStyleObj: {maxHeight: '120px', overflow: 'auto'}\n    }\n  },\n  methods: {\n    addLine() {\n      let invoiceDetailList = this.invoiceDetailList\n      if(invoiceDetailList && invoiceDetailList.length >= 20) {\n        this.$tip.message('最多可开20张发票', 'warning')\n        return\n      }\n      invoiceDetailList.push({\n        lineId: Date.now(), \n        invoiceTypeCode: '',\n        invoiceDate: '',\n        invoiceCode: '',\n        invoiceNo: '',\n        netAmount: '',\n        taxCode: '',\n        taxAmount: ''\n      })\n    },\n    deleteInvoiceLine(id) {\n      this.invoiceDetailList.some((item, i) => {\n        if(id === item.lineId) {\n          this.invoiceDetailList.splice(i, 1)\n          return true\n        }\n      })\n    },\n    handleChange(e) {\n      let index = this.invoiceDetailList.findIndex(t => t.lineId === e.lineId)\n      this.invoiceDetailList.splice(index, 1, e)\n      this.calTotalAmount()\n    },\n    calTotalAmount() {\n      let totalAmount = (this.invoiceDetailList || []).reduce((prev, curr) => {\n        let result = (prev.amount || 0) + (curr.amount || 0)\n        return {amount:result}\n      }, {amount:0}).amount\n      this.totalAmount = fixedNum(totalAmount)\n    },\n    setDefaultMsg(header) {\n      this.getCommonCodes()\n      this.dialogVisible = true;\n      this.settlementNo = header.settlementNo;\n      this.startDate = header.startDate;\n      this.endDate = header.endDate;\n      this.statusNameForVendor = header.statusNameForVendor;\n      this.invoiceAmount = header.invoiceAmount;\n      this.invoicedAmount = header.invoicedAmount\n      this.cantEdit = header.cantEdit || false\n      this.id = header.invoiceId\n      this.invoiceBatchNumber = header.invoiceBatchNumber || ''\n      this.invoiceDetailList = header.invoiceDetailList || []\n      this.filePaths = header.filePaths\n      this.previewFileList = header.filePaths\n      // this.remark = header.remark\n      this.settlement = header.settlement\n      this.type = header.type\n      this.calTotalAmount()\n    },\n    getCommonCodes() {\n      this.$http.post(commonUrl.listByCommonCodes, ['TAX', 'InvoiceType']).then(res => {\n        if(res.code === 0) {\n          this.invoiceTypeCodeOptions = res.data && res.data.InvoiceType && res.data.InvoiceType.length ? res.data.InvoiceType.map((item) => {\n            let newItem = {\n              id: item.id,\n              value: +item.code,\n              label: item.value\n            }\n            return newItem\n          }) : []\n\n          this.taxCodeOptions = res.data && res.data.TAX && res.data.TAX.length ? res.data.TAX.map((item) => {\n            let newItem = {\n              id: item.id,\n              value: item.value,\n              label: item.value\n            }\n            return newItem\n          }) : []\n          return\n        }\n        throw new Error(res.msg);\n      }).catch(e => {\n        console.log(\"【发票种类和税率】:\", e.message)\n      })\n    },\n    handleCancel() {\n      this.$confirm('取消操作不保存页面任何数据，是否确定取消？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.dialogVisible = false\n      })\n    },\n    checkLine(line) {\n      if(!line.invoiceDate) {\n        this.$tip.message('请选择发票日期', 'warning')\n        return\n      }\n      if(!line.invoiceCode) {\n        this.$tip.message('请输入发票代码', 'warning')\n        return\n      }\n      if(!line.invoiceNo) {\n        this.$tip.message('请输入发票号', 'warning')\n        return\n      }\n      if(!line.netAmount && line.netAmount !== 0) {\n        this.$tip.message('请输入发票（不含税）金额', 'warning')\n        return\n      }else if(!salePriceReg.test(Math.abs(line.netAmount))) {\n        this.$tip.message('发票（不含税）金额是小数保留小数点后2位', 'warning')\n        return\n      }\n      if(!line.taxAmount && line.taxAmount !== 0) {\n        this.$tip.message('请输入税额', 'warning')\n        return\n      }else if(!salePriceReg.test(Math.abs(line.taxAmount))) {\n        this.$tip.message('税额是小数保留小数点后2位', 'warning')\n        return\n      }\n      if(fixedNum(parseFloat(line.totalAmount)) + parseFloat(fixedNum(line.invoicedAmount)) > fixedNum(parseFloat(line.invoiceAmount))) {\n        this.$tip.message('开票金额不可超过应开票金额', 'warning')\n        return\n      }\n      return true\n    },\n    handleSubmit() {\n      let invoiceDetailList = this.invoiceDetailList\n      if(!invoiceDetailList || !invoiceDetailList.length) {\n        this.$tip.message('发票信息不可为空', 'warning')\n        return\n      }\n      for(let i = 0; i < invoiceDetailList.length; i++) {\n        if(!this.checkLine(invoiceDetailList[i])) return\n      }\n      if(this.totalAmount > this.invoiceAmount - this.invoicedAmount) {\n        this.$tip.message('发票金额不可大于待开金额', 'warning')\n        return\n      }\n      invoiceDetailList = invoiceDetailList.map(item => {\n        return {\n          invoiceCode: item.invoiceCode,\n          invoiceDate: item.invoiceDate,\n          invoiceNumber: item.invoiceNo,\n          invoiceTypeCode: item.invoiceTypeCode,\n          inTaxs: item.taxCode.join(','),\n          invoiceMoney: item.amount,\n          taxMoney: item.taxAmount,\n          noTaxMoney: item.netAmount\n        }\n      })\n      this.loading = true;\n      let reqUrl = ''\n      let _params = {}\n      let filePathUrls = this.filePaths && this.filePaths.length ? this.filePaths : [];\n      if(this.type === 'edit') {\n        // 编辑\n        reqUrl = settlementUrl.editInvoice\n        _params = {\n          filePaths: [...filePathUrls],\n          invoiceDetailList,\n          accountName: this.settlement.accountName,\n          accountSet: this.settlement.accountSet,\n          settlementNumbers: this.settlementNo,\n          supplierName: this.settlement.supplierName,\n          batchNumber: this.invoiceBatchNumber,\n          supplierNumber: this.settlement.supplierNumber\n        }\n      } else {\n        // 直接添加\n        _params = {\n          filePaths: [...filePathUrls],\n          settlementNumbers: this.settlementNo,\n          batchNumber: this.invoiceBatchNumber,\n          // remark: this.remark,\n          invoiceDetailList\n        }\n        reqUrl = settlementUrl.addInvoice\n      }\n      this.$http.post(reqUrl, {..._params}).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          this.$tip.message('提交成功，等待本来鲜财务人员审核！', 'success')\n          this.dialogVisible = false\n          this.$emit('parentsHandel')\n          return \n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    },\n    resetHandle() {\n      this.invoiceTypeCode = 1,\n      this.taxCode = ['0'], //税率\n      this.invoiceDate = '',\n      this.invoiceCode = '',\n      this.invoiceNo = '',\n      this.netAmount = '', //发票金额\n      this.taxAmount = '', //税额\n      // this.remark = '',\n      this.filePaths = []\n    },\n    getInvoiceMsg(_invoiceId) {\n      this.loading = true\n      this.$http.post(settlementUrl.invoiceDetails + '/' + _invoiceId).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          if(res.data) {\n            let sumAmount = res.data.invoiceMoney ? res.data.invoiceMoney : '--'\n            this.previewFileList = res.data.invoiceFiles && res.data.invoiceFiles.length ? res.data.invoiceFiles : []\n            this.invoiceTypeCode = res.data.inoviceType || ''\n            this.invoiceDate = res.data.invoiceTimeDate || ''\n            this.invoiceCode = res.data.invoiceCode || ''\n            this.invoiceNo = res.data.invoiceNumber || ''\n            // this.remark = res.data.remark\n            this.taxCode = res.data.inTax && res.data.inTax.split(',')\n            this.netAmount = res.data.noTaxMoney\n            this.taxAmount = res.data.taxMoney\n          }\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    },\n    setFileList({filesList, path}) {\n      this.filePaths = filesList\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.title-box {\n  padding: 10px 0px;\n  border-top: 1px solid #f5f5f5;\n  border-bottom: 1px solid #f5f5f5;\n  margin-bottom: 10px;\n}\n.invoice-form /deep/ .el-form-item--small.el-form-item {\n  margin-bottom: 5px; \n}\n.invoice-total /deep/ .el-form-item {\n  margin-bottom: 2px;\n}\n.el-dialog-div {\n  max-height: 250px;\n  overflow: auto;\n}\n.filt-item-wrap {\n  max-height: 160px;\n}\n.dialog-footer {\n  text-align: right;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/module/views/Reconciliation/Settlement/InvoiceDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"发票\",\"visible\":_vm.dialogVisible,\"width\":\"1080px\",\"close-on-click-modal\":false,\"destroy-on-close\":true,\"show-close\":false},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"title-box\"},[_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"结算单号：\"+_vm._s(_vm.settlementNo))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"账期：\"+_vm._s(_vm.startDate)+\"至\"+_vm._s(_vm.endDate))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"状态：\"+_vm._s(_vm.statusNameForVendor))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"应开票金额：￥\"+_vm._s(_vm.invoiceAmount))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"已开票金额：￥\"+_vm._s(_vm.invoicedAmount))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_vm._v(\"待开票：￥\"+_vm._s(_vm.invoiceAmount - _vm.invoicedAmount))])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"operation-box\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addLine}},[_vm._v(\"添加发票\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"el-dialog-div\"},[(_vm.invoiceDetailList.length)?_vm._l((_vm.invoiceDetailList),function(item,index){return _c('invoice-line',{key:index,attrs:{\"cantEdit\":_vm.cantEdit,\"loading\":_vm.loading,\"info\":item,\"invoiceTypeCodeOptions\":_vm.invoiceTypeCodeOptions,\"taxCodeOptions\":_vm.taxCodeOptions},on:{\"deleteInvoiceLine\":_vm.deleteInvoiceLine,\"change\":_vm.handleChange}})}):_vm._e()],2),_vm._v(\" \"),_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"invoice-total\"},[_c('el-form',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"总金额:\"}},[_vm._v(\"\\n          ￥\"+_vm._s(_vm.totalAmount)+\"\\n        \")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"附件:\"}},[_c('file-upload',{ref:\"fileUpload\",attrs:{\"previewFileList\":_vm.previewFileList,\"fileAspectType\":['jpg', 'doc', 'png', 'docx', 'pdf', 'jpeg'],\"maxFilesNum\":5,\"styleObj\":_vm.uploadStyleObj,\"tipText\":\"限上传5张图片或PDF，单张不可超20MB\"},on:{\"files-change\":_vm.setFileList}})],1)],1)],1)],1),_vm._v(\" \"),_c('span',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.handleCancel}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"disabled\":_vm.cantEdit},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-045027ff\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/Reconciliation/Settlement/InvoiceDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-045027ff\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!style-resources-loader?{\\\"patterns\\\":\\\"/Users/zhanyizhu/Desktop/projects/blx-code/supplier_web/src/assets/style/base.less\\\"}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./InvoiceDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./InvoiceDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./InvoiceDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-045027ff\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./InvoiceDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-045027ff\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/Reconciliation/Settlement/InvoiceDialog.vue\n// module id = null\n// module chunks = ","<style scoped>\n  .detail-box {\n    padding: 10px;\n    background-color: #fff;\n    margin-top: 5px\n  }\n</style>\n<template>\n  <div>\n    <div class=\"search-form-wraper\">\n      <el-form :model=\"searchContent\" label-position=\"top\">        \n        <el-form-item label=\"结算起始时间\">\n          <el-date-picker \n            class=\"search-input\" \n            v-model=\"searchContent.settlementStartDate\" \n            type=\"date\" \n            placeholder=\"结算起始时间\"\n            format=\"yyyy-MM-dd\" \n            value-format=\"yyyy-MM-dd\" \n            size=\"small\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"结算结束时间\">\n          <el-date-picker \n            class=\"search-input\" \n            v-model=\"searchContent.settlementEndDate\" \n            type=\"date\" \n            placeholder=\"结算结束时间\"\n            format=\"yyyy-MM-dd\" \n            value-format=\"yyyy-MM-dd\" \n            size=\"small\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"供应商\">\n          <el-select\n            v-model=\"searchContent.searchSupplierNumberList\"\n            multiple\n            collapse-tags\n            filterable\n            class=\"search-input\"\n            size=\"small\"\n            placeholder=\"请选择供应商\">\n            <el-option\n              v-for=\"item in vendors\"\n              :key=\"item.vendorNo\"\n              :label=\"item.vendorName\"\n              :value=\"item.vendorNo\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"状态\">\n          <el-select\n            v-model=\"searchContent.status\"\n            class=\"search-input\"\n            size=\"small\"\n            placeholder=\"请选择状态\">\n            <el-option\n              v-for=\"item in statusOptionsArr\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"结算单号\">\n          <el-input v-model=\"searchContent.settlementNumber\" class=\"search-input\" size=\"small\" placeholder=\"结算单号\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"进货单号\">\n          <el-input v-model=\"searchContent.inNumber\" class=\"search-input\" size=\"small\" placeholder=\"进货单号\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"退货单号\">\n          <el-input v-model=\"searchContent.outNumber\" class=\"search-input\" size=\"small\" placeholder=\"退货单号\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"结算方式\">\n          <el-select\n            v-model=\"searchContent.cooperationMode\"\n            class=\"search-input\"\n            size=\"small\"\n            placeholder=\"结算方式\">\n            <el-option\n              v-for=\"item in typeIdOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"doSearchHandle(true)\" size=\"mini\">搜索</el-button>\n          <el-button size=\"mini\" :disabled=\"checkedList.length === 0\" :loading=\"exportLoading\" @click=\"doExportDataDetailHandel\">批量导出</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <el-row class=\"detail-box\">\n      <el-col :span=\"6\">总金额：￥{{totalSettlementAmount}}</el-col>\n      <el-col :span=\"6\">已结算金额：￥{{settledAmount}}</el-col>\n      <el-col :span=\"6\">已结算单：{{settledQty}}</el-col>\n      <el-col :span=\"6\">未结算单：{{unsettledQty}}</el-col>\n    </el-row>\n    <div class=\"table-wraper\">\n      <bl-table\n        :loading=\"loading\"\n        :border=\"false\"\n        :dataSource=\"tableData\"\n        :columns=\"columns\"\n        :selection=\"true\"\n        :showSummary=\"false\"\n        @selection-change=\"selectionChangeHandel\"/>\n      <bl-pagination\n        :showPagination=\"tableData.length > 0\"\n        :pageNum=\"pageNum\"\n        :total=\"total\"\n        @size-change=\"changeSize\"\n        @current-change=\"changeCurrent\"/>\n    </div>\n    <invoice-dialog ref=\"invoiceDialog\" @parentsHandel=\"doSearchHandleRequest\"></invoice-dialog>\n  </div>\n</template>\n<script>\n  import vendorsMixin from '@/module/mixin/getVendors'\n  import researchMixin from '@/module/mixin/research'\n  import commonUrl from '@/module/api/common'\n  import settlementUrl from '@/module/api/settlement'\n  import { dateFormat, objectToArray } from '@/utils/utils'\n  import exportExcel from '@/utils/exportExcel'\n  import InvoiceDialog from '@/module/views/Reconciliation/Settlement/InvoiceDialog'\n  export default {\n    mixins: [vendorsMixin, researchMixin],\n    components: {\n      \"invoice-dialog\": InvoiceDialog\n    },\n    data() {\n      return {\n        searchContent: {\n          settlementStartDate: dateFormat('yyyy-MM-dd', Date.parse(new Date()) - 6 * 86400000),\n          settlementEndDate: dateFormat('yyyy-MM-dd', Date.parse(new Date())),\n          searchSupplierNumberList: [],\n          status: '',\n          settlementNumber: '',\n          cooperationMode: '',\n          inNumber: '',\n          outNumber: ''\n        },\n        statusOptionsArr: [],\n        typeIdOptions: [],\n        totalSettlementAmount: '',\n        settledAmount: '',\n        settledQty: '',\n        unsettledQty: '',\n        loading: false,\n        exportLoading: false,\n        tableData: [],\n        total: 0,\n        pageNum: 1, \n        pageSize: 10,\n        checkedList: [],\n        exportConfigForDetail: {\n          index: '序号',\n          settlementNo: '结算单号',\n          vendorName: '供应商',\n          cooperationModeName: '结算方式',\n          accountPeriod: '账期',\n          endDate: '应结算日',\n          goodsName: '商品名称',\n          goodsNo: '商品编码',\n          vendorGoodsNo: '货号',\n          barcode: '商品条码',\n          spec: '规格',\n          taxPct: '税率',\n          averageUnitPrice: '平均单价',\n          qty: '数量',\n          amount: '参考结算金额',\n        },\n        columns: [\n          {\n            title: '序号',\n            dataIndex: 'index',\n            minWidth: 50\n          },\n          {\n            title: '结算单号',\n            dataIndex: 'settlementNumber',\n            ellipsis: true,\n            minWidth: 160\n          },\n          {\n            title: '供应商',\n            dataIndex: 'supplierName',\n            ellipsis: true,\n            minWidth: 100\n          },\n          {\n            title: '结算方式',\n            dataIndex: 'cooperationModeName',\n            ellipsis: true,\n            minWidth: 100\n          },\n          {\n            title: '账期',\n            minWidth: 200,\n            ellipsis: true,\n            dataIndex: 'accountPeriod'\n          },\n          {\n            title: '应结算日',\n            dataIndex: 'settlementEndDate',\n            ellipsis: true,\n            minWidth: 100\n          },\n          {\n            title: '应结金额',\n            dataIndex: 'shouldPay',\n            ellipsis: true,\n            minWidth: 100\n          },\n          {\n            title: '应开票金额',\n            dataIndex: 'shoudInvoiceMoney',\n            ellipsis: true,\n            minWidth: 120\n          },\n          {\n            title: '已开票金额',\n            dataIndex: 'havedInvoiceMoney',\n            ellipsis: true,\n            minWidth: 120\n          },\n          {\n            title: '状态',\n            dataIndex: 'statusName',\n            ellipsis: true,\n            minWidth: 100\n          },\n          {\n            title: '状态更新日期',\n            dataIndex: 'lastUpdateTime',\n            ellipsis: true,\n            minWidth: 140\n          },\n          {\n            title: '结算主体',\n            dataIndex: 'accountName',\n            ellipsis: true,\n            minWidth: 100\n          },\n          {\n            title: '创建时间',\n            minWidth: 100,\n            ellipsis: true,\n            dataIndex: 'addTime'\n          },\n          {\n            title: '操作',\n            fixed: 'right',\n            minWidth: 170,\n            operation: [{\n              label: '详情',\n              icon: 'el-icon-view',\n              clickFunc: this.goDetailPage\n            },{\n              label: '开发票',\n              icon: 'el-icon-tickets',\n              isDisabled: (row)=> {\n                return row.status !== 2\n              },\n              clickFunc: this.invoiceHandel\n            }]\n          }\n        ]\n      }\n    },\n    mounted() {\n      this.getStatus()\n      this.initMounted()\n    },\n    methods: {\n      /**\n       * @description: 确保调用查询接口的时候，已经拿到用户有权限的供应商\n       */\n      initMounted() {\n        if(this.vendors && this.vendors.length > 0) {\n          this.doSearchHandle(true)\n        }else {\n          setTimeout(() => {\n            this.initMounted()\n          }, 500);\n        }\n      },\n      getStatus (){\n        this.$http.post(commonUrl.listByCommonCodes, ['VendorSettleStatus1','TRADEM4']).then(res => {\n          if(res.code === 0) {\n            this.statusOptionsArr = res.data && res.data.VendorSettleStatus1 && res.data.VendorSettleStatus1.length ? res.data.VendorSettleStatus1.map((item) => {\n              let newItem = {\n                id: item.id,\n                value: item.code,\n                label: item.value\n              }\n              return newItem\n            }) : []\n            this.statusOptionsArr.unshift({\n              id: -1,\n              value: '',\n              label: '全部'\n            })\n            this.typeIdOptions = res.data && res.data.TRADEM4 && res.data.TRADEM4.length ? res.data.TRADEM4.map((item) => {\n              let newItem = {\n                id: item.id,\n                value: +item.code,\n                label: item.value\n              }\n              return newItem\n            }) : []\n            this.typeIdOptions.unshift({\n              value: '',\n              label: '全部'\n            })\n            return\n          }\n          throw new Error(res.msg);\n        }).catch(e => {\n          console.log(\"【对账管理状态】:\", e.message)\n        })\n      },\n      getListTotal() {\n        let _params = {...this.searchContent}\n        // 后台需要，如果用户一个供应商也没有选择，默认传全部供应商编码\n        if(!_params.searchSupplierNumberList || _params.searchSupplierNumberList.length <= 0) {\n          _params.searchSupplierNumberList = this.vendors.map(item => {\n            return item.vendorNo\n          })\n        }\n        this.$http.post(settlementUrl.listTotal, {..._params}).then(res => {\n          if(res.code === 0) {\n            if(res.data) {\n                this.settledAmount = res.data.settledAmount,\n                this.settledQty = res.data.settledQty,\n                this.totalSettlementAmount = res.data.totalSettlementAmount,\n                this.unsettledQty = res.data.unsettledQty\n            }else {\n                this.settledAmount = '--',\n                this.settledQty = '--',\n                this.totalSettlementAmount = '--',\n                this.unsettledQty = '--'\n            }\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {console.log(\"【列表统计提示】:\", e.message || '')})\n      },\n      selectionChangeHandel({selection}) {\n        this.checkedList = [...selection]\n      },\n      doSearchHandleRequest(firstPage) {\n        const { settlementStartDate, settlementEndDate} = this.searchContent\n        if( !settlementStartDate || !settlementEndDate ) {\n          this.$tip.message('请选择时间！', 'warning')\n          return\n        }\n        let startPayDateTemp = Date.parse(new Date(settlementStartDate.replace(/-/g, '/')))\n        let endPayDateTemp = Date.parse(new Date(settlementEndDate.replace(/-/g, '/')))\n        if(startPayDateTemp > endPayDateTemp) {\n          this.$tip.message('结算结束时间不能早于开始时间！', 'warning')\n          return \n        }\n        this.loading = true;\n        if (firstPage) {\n          this.pageNum = 1\n        }\n        let _params = {\n          ...this.searchContent,\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n        // 后台需要，如果用户一个供应商也没有选择，默认传全部供应商编码\n        if(!_params.searchSupplierNumberList || _params.searchSupplierNumberList.length <= 0) {\n          _params.searchSupplierNumberList = this.vendors.map(item => {\n            return item.vendorNo\n          })\n        }\n        this.$http.post(settlementUrl.settlementList, {..._params}).then(res => {\n          this.loading = false\n          if(res.code === 0) {\n            let tableDataListTemp = res.data && res.data.settlementList && res.data.settlementList.length ? res.data.settlementList : []\n            let tableDataList = tableDataListTemp.map((item, index) => {\n              item.index = index + 1;\n              if(item.settlementStartDate && item.settlementEndDate) {\n                item.accountPeriod = `${item.settlementStartDate}至${item.settlementEndDate}`\n              }else if(item.settlementStartDate) {\n                item.accountPeriod = `${item.settlementStartDate}至--`\n              }else if(item.settlementEndDate) {\n                item.accountPeriod = `--至${item.settlementEndDate}`\n              }\n              item.invoiceAmount = !item.invoiceAmount && item.invoiceAmount !== 0 ? '' : item.invoiceAmount\n              item.invoicedAmount = !item.invoicedAmount && item.invoicedAmount !== 0 ? '' : item.invoicedAmount\n              return item;\n            })\n            this.total = res.data && res.data.totalSettlementCount ? res.data.totalSettlementCount : 0\n            this.tableData = tableDataList;\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.loading = false\n          this.$tip.notify(e.message || '', 'error', '系统提示')\n        })\n      },\n      doSearchHandle(params) {\n        this.doSearchHandleRequest(params)\n        this.getListTotal()\n      },\n      changeSize(value) {\n        this.pageSize = value\n        this.doSearchHandleRequest()\n      },\n      changeCurrent(value) {\n        this.pageNum = value\n        this.doSearchHandleRequest()\n      },\n      doExportDataDetailHandel() {\n        let settlementNoList = this.checkedList.map(item => {\n          return item.settlementNumber\n        })\n        this.exportLoading = true\n        this.$http.post(settlementUrl.export, {settlementNoList}).then(res => {\n          this.exportLoading = false\n          let createTime = dateFormat('yyyy-MM-dd', Date.parse(new Date()))\n          if(res.code === 0) {\n            if(res.data && res.data && res.data.result.length) {\n              res.data.result.forEach((item, index) => {\n                item.index = index + 1\n                if(item.startDate && item.endDate) {\n                  item.accountPeriod = `${dateFormat('yyyy-MM-dd',item.startDate)}至${dateFormat('yyyy-MM-dd',item.endDate)}`\n                }else if(item.startDate) {\n                  item.accountPeriod = `${dateFormat('yyyy-MM-dd',item.startDate)}至--`\n                }else if(item.endDate) {\n                  item.accountPeriod = `--至${dateFormat('yyyy-MM-dd',item.endDate)}`\n                }\n                item.endDate = dateFormat('yyyy-MM-dd',item.endDate);\n                if(item.amount && item.qty) {\n                  item.averageUnitPrice = (item.amount / item.qty).toFixed(2)\n                }else {\n                  item.averageUnitPrice = \"\"\n                }\n              })\n              const tHeader = objectToArray(this.exportConfigForDetail, false)\n              const filterVal = objectToArray(this.exportConfigForDetail, true)\n              exportExcel.ExportJsonToExcel({\n                header: tHeader,\n                filterVal,\n                data: res.data.result,\n                filename: `本来鲜结算数据详细信息_${createTime}.xlsx`\n              })\n              setTimeout(() => {\n                this.$tip.notify('导出成功', 'success', '温馨提示')\n              }, 500)\n            }else {\n              this.$tip.notify('没有查询到可导出数据', 'warning', '系统提示')\n            }\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.exportLoading = false;\n          this.$tip.notify(e.message || '', 'error', '系统提示')\n        })\n      },\n      goDetailPage(row) {\n        this.$router.push(`/settlement/${row.settlementNumber}`)\n      },\n      invoiceHandel(data) {\n        const row = {\n          cantEdit: data.status === 3 || false,\n          settlementNo: data.settlementNumber,\n          startDate: data.settlementStartDate,\n          endDate: data.settlementEndDate,\n          statusNameForVendor: data.statusName,\n          invoiceAmount: data.shoudInvoiceMoney,\n          invoicedAmount: data.havedInvoiceMoney,\n          invoiceBatchNumber: data.invoiceBatchNumber || '',\n        }\n        this.$refs.invoiceDialog.setDefaultMsg(row)\n      }\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/Reconciliation/Settlement/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"search-form-wraper\"},[_c('el-form',{attrs:{\"model\":_vm.searchContent,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"结算起始时间\"}},[_c('el-date-picker',{staticClass:\"search-input\",attrs:{\"type\":\"date\",\"placeholder\":\"结算起始时间\",\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"size\":\"small\"},model:{value:(_vm.searchContent.settlementStartDate),callback:function ($$v) {_vm.$set(_vm.searchContent, \"settlementStartDate\", $$v)},expression:\"searchContent.settlementStartDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"结算结束时间\"}},[_c('el-date-picker',{staticClass:\"search-input\",attrs:{\"type\":\"date\",\"placeholder\":\"结算结束时间\",\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"size\":\"small\"},model:{value:(_vm.searchContent.settlementEndDate),callback:function ($$v) {_vm.$set(_vm.searchContent, \"settlementEndDate\", $$v)},expression:\"searchContent.settlementEndDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"供应商\"}},[_c('el-select',{staticClass:\"search-input\",attrs:{\"multiple\":\"\",\"collapse-tags\":\"\",\"filterable\":\"\",\"size\":\"small\",\"placeholder\":\"请选择供应商\"},model:{value:(_vm.searchContent.searchSupplierNumberList),callback:function ($$v) {_vm.$set(_vm.searchContent, \"searchSupplierNumberList\", $$v)},expression:\"searchContent.searchSupplierNumberList\"}},_vm._l((_vm.vendors),function(item){return _c('el-option',{key:item.vendorNo,attrs:{\"label\":item.vendorName,\"value\":item.vendorNo}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-select',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请选择状态\"},model:{value:(_vm.searchContent.status),callback:function ($$v) {_vm.$set(_vm.searchContent, \"status\", $$v)},expression:\"searchContent.status\"}},_vm._l((_vm.statusOptionsArr),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"结算单号\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"结算单号\",\"clearable\":\"\"},model:{value:(_vm.searchContent.settlementNumber),callback:function ($$v) {_vm.$set(_vm.searchContent, \"settlementNumber\", $$v)},expression:\"searchContent.settlementNumber\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"进货单号\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"进货单号\",\"clearable\":\"\"},model:{value:(_vm.searchContent.inNumber),callback:function ($$v) {_vm.$set(_vm.searchContent, \"inNumber\", $$v)},expression:\"searchContent.inNumber\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"退货单号\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"退货单号\",\"clearable\":\"\"},model:{value:(_vm.searchContent.outNumber),callback:function ($$v) {_vm.$set(_vm.searchContent, \"outNumber\", $$v)},expression:\"searchContent.outNumber\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"结算方式\"}},[_c('el-select',{staticClass:\"search-input\",attrs:{\"size\":\"small\",\"placeholder\":\"结算方式\"},model:{value:(_vm.searchContent.cooperationMode),callback:function ($$v) {_vm.$set(_vm.searchContent, \"cooperationMode\", $$v)},expression:\"searchContent.cooperationMode\"}},_vm._l((_vm.typeIdOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.doSearchHandle(true)}}},[_vm._v(\"搜索\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"disabled\":_vm.checkedList.length === 0,\"loading\":_vm.exportLoading},on:{\"click\":_vm.doExportDataDetailHandel}},[_vm._v(\"批量导出\")])],1)],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"detail-box\"},[_c('el-col',{attrs:{\"span\":6}},[_vm._v(\"总金额：￥\"+_vm._s(_vm.totalSettlementAmount))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_vm._v(\"已结算金额：￥\"+_vm._s(_vm.settledAmount))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_vm._v(\"已结算单：\"+_vm._s(_vm.settledQty))]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_vm._v(\"未结算单：\"+_vm._s(_vm.unsettledQty))])],1),_vm._v(\" \"),_c('div',{staticClass:\"table-wraper\"},[_c('bl-table',{attrs:{\"loading\":_vm.loading,\"border\":false,\"dataSource\":_vm.tableData,\"columns\":_vm.columns,\"selection\":true,\"showSummary\":false},on:{\"selection-change\":_vm.selectionChangeHandel}}),_vm._v(\" \"),_c('bl-pagination',{attrs:{\"showPagination\":_vm.tableData.length > 0,\"pageNum\":_vm.pageNum,\"total\":_vm.total},on:{\"size-change\":_vm.changeSize,\"current-change\":_vm.changeCurrent}})],1),_vm._v(\" \"),_c('invoice-dialog',{ref:\"invoiceDialog\",on:{\"parentsHandel\":_vm.doSearchHandleRequest}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3e9c2f9f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/Reconciliation/Settlement/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e9c2f9f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3e9c2f9f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3e9c2f9f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/Reconciliation/Settlement/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}