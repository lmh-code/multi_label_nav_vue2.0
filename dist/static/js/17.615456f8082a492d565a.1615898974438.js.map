{"version":3,"sources":["webpack:///src/module/views/AgentCamp/SaleMgt/Add.vue","webpack:///./src/module/views/AgentCamp/SaleMgt/Add.vue?bfde","webpack:///./src/module/views/AgentCamp/SaleMgt/Add.vue","webpack:///src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue","webpack:///./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue?d00d","webpack:///./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue","webpack:///./src/module/mixin/getRegions.js"],"names":["Add","mixins","getVendors","getRegions","options","components","ChooseGoods","data","_this","this","timeValidator","rule","value","callback","addParamMsg","startTime","endTime","Object","utils","Error","isDisabled","vendorNo","vendorName","Date","getTime","goods","regionNos","regions","status","rules","required","validator","trigger","length","checkedGoodsList","columns","title","dataIndex","ellipsis","minWidth","input","placeholder","width","fixed","operation","label","icon","clickFunc","deleteHandel","methods","showAddGoodsDialog","_this2","$nextTick","$refs","chooseGoods","setDefaultMsg","defaultChecked","$tip","message","confirmHandel","result","concat","toConsumableArray_default","row","filter","item","goodsNo","doSaveHandel","_this3","ruleForm","validate","valid","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","showPrice","parseFloat","name","constant","salePriceReg","test","salePrice","qty","parseInt","numReg","err","return","filterVendorMsg","vendors","regionsList","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","i","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","j","storeGroupNo","push","map","regionCode","regionName","storeGroupName","extends_default","erpGoodsNo","goodsName","unit","saleUnitName","$http","post","saleMgtUrl","addOrUpdateQuote","then","res","code","saveSuccessHandel","msg","catch","e","notify","vendorNoChange","doCancelHandel","closePage","SaleMgt_Add","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-position","label-width","prop","size","on","change","$$v","$set","expression","_l","key","_v","clearable","type","format","value-format","multiple","click","border","dataSource","maxHeight","disabled","loading","$event","confirm","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","visible","pageNum","pageSize","total","searchContent","tradeModeId","tableData","checkedList","watch","searchContent.vendorNo","newVal","oldVal","doSearchHandle","params","changeSize","changeCurrent","firstPage","common","queryContractGoods","openNotification","selectHandel","_ref","selection","includes","index","findIndex","splice","selectAllHandel","_ref2","forEach","$emit","SaleMgt_ChooseGoods","close-on-click-modal","close-on-press-escape","show-close","update:visible","nativeOn","submit","preventDefault","keyup","indexOf","_k","keyCode","trim","uniqueStr","select","select-all","showPagination","size-change","current-change","slot","created","$store","dispatch","computed","mapGetters"],"mappings":"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","file":"static/js/17.615456f8082a492d565a.1615898974438.js","sourcesContent":["<template>\n  <div class=\"add-form-wraper\">\n    <el-form \n      :model=\"addParamMsg\" \n      label-position=\"right\" \n      label-width=\"160px\"\n      ref=\"ruleForm\"\n      :rules=\"rules\"\n      >\n      <el-form-item label=\"供应商\" prop=\"vendorNo\">\n        <el-select \n          class=\"add-input\" \n          v-model=\"addParamMsg.vendorNo\" \n          placeholder=\"选择供应商\" \n          size=\"small\"\n          @change=\"vendorNoChange\">\n          <el-option \n            v-for=\"item in vendors\" \n            :key=\"item.vendorNo\" \n            :label=\"item.vendorName\" \n            :value=\"item.vendorNo\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"价格有效起始时间\" prop=\"startTime\">\n        <el-date-picker \n          :clearable=\"false\"\n          class=\"add-input\" \n          v-model=\"addParamMsg.startTime\" \n          type=\"datetime\" \n          placeholder=\"价格有效起始时间\"\n          format=\"yyyy-MM-dd HH:mm:ss\" \n          value-format=\"yyyy-MM-dd HH:mm:ss\" \n          size=\"small\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"价格有效终止时间\" prop=\"endTime\">\n        <el-date-picker \n          :clearable=\"false\"\n          class=\"add-input\" \n          v-model=\"addParamMsg.endTime\" \n          type=\"datetime\" \n          placeholder=\"价格有效终止时间\"\n          format=\"yyyy-MM-dd HH:mm:ss\" \n          value-format=\"yyyy-MM-dd HH:mm:ss\" \n          size=\"small\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"区域\" prop=\"regionNos\">\n        <el-select \n          class=\"add-input\" \n          v-model=\"addParamMsg.regionNos\" \n          placeholder=\"选择区域\" \n          multiple\n          size=\"small\">\n          <el-option \n            v-for=\"item in regionsList\" \n            :key=\"item.storeGroupNo\" \n            :label=\"item.storeGroupName\" \n            :value=\"item.storeGroupNo\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"选择商品\" required>\n        <el-button type=\"primary\" @click=\"showAddGoodsDialog\" size=\"mini\" icon=\"el-icon-plus\">添加商品</el-button>\n        <bl-table\n          :border=\"false\"\n          :dataSource=\"checkedGoodsList\"\n          :columns=\"columns\"\n          :maxHeight=\"400\"/>\n      </el-form-item>\n      <el-form-item>\n        <hr class=\"s-slip-tb\">\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel(0)\" :disabled=\"isDisabled\" :loading=\"isDisabled && addParamMsg.status === 0\">保存</el-button>\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel(1)\" :disabled=\"isDisabled\" :loading=\"isDisabled && addParamMsg.status === 1\">保存并发布</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">关闭</el-button>\n      </el-form-item>\n    </el-form>\n    <choose-goods ref=\"chooseGoods\" @confirm=\"confirmHandel\"/>\n  </div>\n</template>\n<script>\nimport vendorsMixin from '@/module/mixin/getVendors'\nimport regionsMixin from '@/module/mixin/getRegions'\nimport optionsMixin from '@/module/mixin/options'\nimport requestUrl from '@/module/api/saleMgtUrl'\nimport ChooseGoods from './ChooseGoods'\nimport {dateFormat, changeDateToTimestamp} from '@/utils/utils'\nimport constantUtil from '@/utils/constant'\nimport constants from './constants'\nexport default {\n  mixins: [vendorsMixin, regionsMixin, optionsMixin],\n  components: {\n    ChooseGoods\n  },\n  data() {\n    const vendorNoValidator = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请选择供应商'))\n      }else {\n        callback()\n      }\n    }\n    const timeValidator = (rule, value, callback) => {\n      if (!this.addParamMsg.startTime) {\n        return callback(new Error('请选择价格有效起始时间'))\n      }else if (!this.addParamMsg.endTime) {\n        return callback(new Error('请选择价格有效终止时间'))\n      }else if(changeDateToTimestamp(this.addParamMsg.endTime) < changeDateToTimestamp(this.addParamMsg.startTime)) {\n        return callback(new Error('价格有效终止时间不能早于起始时间'))\n      }else {\n        callback()\n      }\n    }\n    const regionNosValidator = (rule, value, callback) => {\n      if (!this.addParamMsg.regionNos || this.addParamMsg.regionNos.length === 0) {\n        return callback(new Error('请选择区域'))\n      }else {\n        callback()\n      }\n    }\n    return {\n      isDisabled: false,\n      addParamMsg: {\n        vendorNo: '',\n        vendorName: '',\n        startTime: dateFormat('yyyy-MM-dd HH:mm:ss', new Date().getTime()),\n        endTime: dateFormat('yyyy-MM-dd HH:mm:ss', new Date().getTime() + 86400000),\n        goods: [],\n        regionNos: [],\n        regions: [],\n        status: '' // 0：保存  1：保存并发布\n      },\n      rules: {\n        vendorNo: [\n          {required: true, validator: vendorNoValidator, trigger: 'change'}\n        ],\n        startTime: [\n          {required: true, validator: timeValidator, trigger: 'change'}\n        ],\n        endTime: [\n          {required: true, validator: timeValidator, trigger: 'change'}\n        ],\n        regionNos: [\n          {required: true, validator: regionNosValidator, trigger: 'change'}\n        ]\n      },\n      checkedGoodsList: [],\n      columns: [\n        {\n          title: '条形码',\n          dataIndex: 'barCode',\n          ellipsis: true,\n          minWidth: 120\n        },\n        {\n          title: '商品编码',\n          dataIndex: 'goodsNo',\n          minWidth: 100\n        },\n        {\n          title: '货号',\n          dataIndex: 'vendorGoodsNo',\n          minWidth: 100\n        },\n        {\n          title: '商品名称',\n          dataIndex: 'name',\n          ellipsis: true,\n          minWidth: 120\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          minWidth: 80\n        },\n        {\n          title: '单位',\n          dataIndex: 'saleUnitName',\n          minWidth: 80\n        },\n        {\n          title: '市场参考价',\n          dataIndex: 'showPrice',\n          input: true,\n          placeholder: '市场参考价',\n          minWidth: 100\n        },\n        {\n          title: '销售价',\n          dataIndex: 'salePrice',\n          input: true,\n          placeholder: '销售价',\n          minWidth: 100\n        },\n        {\n          title: '日均可订货量',\n          dataIndex: 'qty',\n          input: true,\n          placeholder: '日均可订货量',\n          minWidth: 120\n        },\n        {\n          title: '操作',\n          width: 80,\n          fixed: 'right',\n          operation: [\n            {\n              label: '删除',\n              icon: 'el-icon-delete',\n              clickFunc: this.deleteHandel\n            }\n          ]\n        }\n      ]\n    }\n  },\n  methods: {\n    showAddGoodsDialog() {\n      if(!this.addParamMsg.vendorNo) {\n        this.$tip.message(\"请先选择供应商\", \"warning\")\n        return\n      }\n      this.$nextTick(() => {\n        this.$refs.chooseGoods.setDefaultMsg({\n          title: '选择商品',\n          vendorNo: this.addParamMsg.vendorNo,\n          defaultChecked: this.checkedGoodsList\n        })\n      })\n    },\n    confirmHandel(result) {\n      this.checkedGoodsList = [...result]\n    },\n    deleteHandel(row) {\n      this.checkedGoodsList = this.checkedGoodsList.filter(item => {\n        return item.goodsNo !== row.goodsNo\n      })\n    },\n    doSaveHandel(status) {\n      this.$refs.ruleForm.validate((valid) => {\n        if(!valid) return false\n        if(!this.checkedGoodsList || this.checkedGoodsList.length === 0) {\n          this.$tip.message(\"请选择商品\", \"warning\")\n          return\n        } \n        for(let item of this.checkedGoodsList) {\n          if(!item.showPrice && parseFloat(item.showPrice) != 0) {\n            this.$tip.message(`请输入【${item.name}】的市场参考价`, \"warning\")\n            return\n          }else if(!constantUtil.salePriceReg.test(item.showPrice)) {\n            this.$tip.message(`【${item.name}】的市场参考价应为数字，小数保留两位小数`, \"warning\")\n            return\n          }\n          if(!item.salePrice && parseFloat(item.salePrice) != 0) {\n            this.$tip.message(`请输入【${item.name}】的销售价`, \"warning\")\n            return\n          }else if(!constantUtil.salePriceReg.test(item.salePrice)) {\n            this.$tip.message(`【${item.name}】的市场销售价应为数字，小数保留两位小数`, \"warning\")\n            return\n          }\n          if(parseFloat(item.salePrice) > parseFloat(item.showPrice)) {\n            this.$tip.message(`【${item.name}】的销售价不能大于市场参考价`, \"warning\")\n            return\n          }\n          if(!item.qty && parseInt(item.qty) != 0) {\n            this.$tip.message(`请输入【${item.name}】的日均可订货量`, \"warning\")\n            return\n          }else if(!constantUtil.numReg.test(item.qty)) {\n            this.$tip.message(`【${item.name}】的日均可订货量应为整数`, \"warning\")\n            return\n          }\n        }\n        this.addParamMsg.status = status\n        // 供应商名称\n        let filterVendorMsg = this.vendors.filter(item => {\n          return item.vendorNo === this.addParamMsg.vendorNo\n        })[0]\n        this.addParamMsg.vendorName = filterVendorMsg ? filterVendorMsg.vendorName : ''\n        // 区域\n        let regionsList = []\n        for(let i of this.regionsList) {\n          for(let j of this.addParamMsg.regionNos) {\n            if(i.storeGroupNo === j) {\n              regionsList.push(i)\n            }\n          }\n        }\n        this.addParamMsg.regions = regionsList.map(item => {\n          return {\n            regionCode: item.storeGroupNo,\n            regionName: item.storeGroupName\n          }\n        })\n        // 商品\n        this.addParamMsg.goods = this.checkedGoodsList.map(item => {\n          let newItem = {\n            erpGoodsNo: item.goodsNo,\n            goodsName: item.name,\n            unit: item.saleUnitName,\n            ...item\n          }\n          return newItem\n        })\n        // 保存询价进价\n        this.isDisabled = true\n        this.$http.post(requestUrl.addOrUpdateQuote, {...this.addParamMsg}).then(res => {\n          this.isDisabled = false\n          if(res.code === 0) {\n            this.$tip.message('保存成功', 'success');\n            // 保存成功之后跳转至列表页\n            this.saveSuccessHandel('/sale_mgt')\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.isDisabled = false\n          this.$tip.notify(e.message || '', 'error', '系统提示')\n        })\n      })\n    },\n    vendorNoChange() {\n      this.checkedGoodsList = []\n    },\n    doCancelHandel() {\n      this.closePage('/sale_mgt')\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/AgentCamp/SaleMgt/Add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.addParamMsg,\"label-position\":\"right\",\"label-width\":\"160px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"供应商\",\"prop\":\"vendorNo\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"选择供应商\",\"size\":\"small\"},on:{\"change\":_vm.vendorNoChange},model:{value:(_vm.addParamMsg.vendorNo),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"vendorNo\", $$v)},expression:\"addParamMsg.vendorNo\"}},_vm._l((_vm.vendors),function(item){return _c('el-option',{key:item.vendorNo,attrs:{\"label\":item.vendorName,\"value\":item.vendorNo}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"价格有效起始时间\",\"prop\":\"startTime\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"clearable\":false,\"type\":\"datetime\",\"placeholder\":\"价格有效起始时间\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.startTime),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"startTime\", $$v)},expression:\"addParamMsg.startTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"价格有效终止时间\",\"prop\":\"endTime\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"clearable\":false,\"type\":\"datetime\",\"placeholder\":\"价格有效终止时间\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.endTime),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"endTime\", $$v)},expression:\"addParamMsg.endTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"区域\",\"prop\":\"regionNos\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"选择区域\",\"multiple\":\"\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.regionNos),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"regionNos\", $$v)},expression:\"addParamMsg.regionNos\"}},_vm._l((_vm.regionsList),function(item){return _c('el-option',{key:item.storeGroupNo,attrs:{\"label\":item.storeGroupName,\"value\":item.storeGroupNo}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"选择商品\",\"required\":\"\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.showAddGoodsDialog}},[_vm._v(\"添加商品\")]),_vm._v(\" \"),_c('bl-table',{attrs:{\"border\":false,\"dataSource\":_vm.checkedGoodsList,\"columns\":_vm.columns,\"maxHeight\":400}})],1),_vm._v(\" \"),_c('el-form-item',[_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"loading\":_vm.isDisabled && _vm.addParamMsg.status === 0},on:{\"click\":function($event){return _vm.doSaveHandel(0)}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"loading\":_vm.isDisabled && _vm.addParamMsg.status === 1},on:{\"click\":function($event){return _vm.doSaveHandel(1)}}},[_vm._v(\"保存并发布\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"关闭\")])],1)],1),_vm._v(\" \"),_c('choose-goods',{ref:\"chooseGoods\",on:{\"confirm\":_vm.confirmHandel}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3282f372\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/AgentCamp/SaleMgt/Add.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3282f372\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/AgentCamp/SaleMgt/Add.vue\n// module id = null\n// module chunks = ","<template>\n  <el-dialog \n    :close-on-click-modal = \"false\"\n    :close-on-press-escape = \"false\"\n    :show-close=\"false\"\n    :title=\"title\" \n    :visible.sync=\"visible\" \n    width='700px'>\n    <div class=\"search-form-wraper c-g-sfw\">\n      <el-form \n        :model=\"searchContent\" \n        label-position=\"top\" \n        @submit.native.prevent>\n        <el-form-item>\n          <el-input \n            class=\"search-input\"\n            v-model.trim=\"searchContent.goodsNo\" \n            placeholder=\"输入商品编码\" \n            size=\"small\" \n            @keyup.enter.native=\"doSearchHandle(true)\" \n            clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-input \n            class=\"search-input\" \n            v-model.trim=\"searchContent.goodsName\" \n            placeholder=\"输入商品名称\" \n            size=\"small\" \n            @keyup.enter.native=\"doSearchHandle(true)\" \n            clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"doSearchHandle(true)\" size=\"mini\">搜索</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div>\n      <bl-table\n        :loading=\"loading\"\n        :border=\"false\"\n        :selection=\"true\"\n        :dataSource=\"tableData\"\n        :columns=\"columns\"\n        :maxHeight=\"300\"\n        :defaultChecked=\"checkedList\"\n        uniqueStr=\"goodsNo\"\n        @select=\"selectHandel\"\n        @select-all=\"selectAllHandel\"/>\n      <bl-pagination\n        :showPagination=\"tableData.length > 0\"\n        :pageNum=\"pageNum\"\n        :total=\"total\"\n        @size-change=\"changeSize\"\n        @current-change=\"changeCurrent\"/>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\" size=\"mini\">取消</el-button>\n      <el-button type=\"primary\" @click=\"confirm\" size=\"mini\">确定</el-button>\n    </div>\n  </el-dialog>\n</template>\n<script>\nimport commonUrl from '@/module/api/common'\nexport default {\n  data() {\n    return {\n      title: '',\n      visible: false,\n      loading: false,\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      searchContent: {\n        vendorNo: '',\n        goodsNo: '',\n        goodsName: '',\n        tradeModeId: 9\n      },\n      columns: [\n        {\n          title: '商品条码',\n          dataIndex: 'barCode',\n          minWidth: 120,\n        },\n        {\n          title: '商品编码',\n          dataIndex: 'goodsNo',\n          minWidth: 100,\n        },\n        {\n          title: '商品名称',\n          dataIndex: 'name',\n          minWidth: 120,\n        },\n        {\n          title: '单位',\n          dataIndex: 'saleUnitName',\n          minWidth: 80,\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          minWidth: 90,\n        },\n      ],\n      tableData: [],\n      checkedList: []\n    }\n  },\n  watch: {\n    'searchContent.vendorNo'(newVal, oldVal) {\n      if(newVal !== oldVal) {\n        this.doSearchHandle(true)\n      }\n    }\n  },\n  methods: {\n    setDefaultMsg(params) {\n      this.title = params.title || ''\n      this.searchContent.vendorNo = params.vendorNo || ''\n      this.checkedList = params.defaultChecked && params.defaultChecked.length ? [...params.defaultChecked] : []\n      this.visible = true\n    },\n    changeSize(value) {\n      this.pageSize = value\n      this.doSearchHandle()\n    },\n    changeCurrent(value) {\n      this.pageNum = value\n      this.doSearchHandle()\n    },\n    doSearchHandle(firstPage) {\n      this.loading = true\n      this.$http.post(commonUrl.queryContractGoods, {...this.searchContent, pageNum: this.pageNum, pageSize: this.pageSize}).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          this.tableData = res.data && res.data.result && res.data.result.length ? res.data.result : []\n          this.total = res.data && res.data.total ? res.data.total : 0\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        utils.openNotification('error', '系统提示', e.message)\n      })\n    },\n    selectHandel({selection, row}) {\n      if(selection.includes(row)) {\n        this.checkedList.push(row)\n      }else {\n        const index = this.checkedList.findIndex(item => {\n          return item.goodsNo === row.goodsNo\n        })\n        this.checkedList.splice(index, 1)\n      }\n    },\n    selectAllHandel({selection}) {\n      if(selection.length) {\n        // 全选\n        this.tableData.forEach(i => {\n          const index = this.checkedList.findIndex(j => {\n            return j.goodsNo === i.goodsNo\n          })\n          if(index === -1) {\n            this.checkedList.push(i)\n          }\n        })\n      }else {\n        // 全不选\n        this.tableData.forEach(i => {\n          const index = this.checkedList.findIndex(j => {\n            return j.goodsNo === i.goodsNo\n          })\n          if(index !== -1) {\n            this.checkedList.splice(index, 1)\n          }\n        })\n      }\n    },\n    confirm() {\n      this.visible = false\n      this.$emit(\"confirm\", this.checkedList)\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"show-close\":false,\"title\":_vm.title,\"visible\":_vm.visible,\"width\":\"700px\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',{staticClass:\"search-form-wraper c-g-sfw\"},[_c('el-form',{attrs:{\"model\":_vm.searchContent,\"label-position\":\"top\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"输入商品编码\",\"size\":\"small\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.doSearchHandle(true)}},model:{value:(_vm.searchContent.goodsNo),callback:function ($$v) {_vm.$set(_vm.searchContent, \"goodsNo\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.goodsNo\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"输入商品名称\",\"size\":\"small\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.doSearchHandle(true)}},model:{value:(_vm.searchContent.goodsName),callback:function ($$v) {_vm.$set(_vm.searchContent, \"goodsName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.goodsName\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.doSearchHandle(true)}}},[_vm._v(\"搜索\")])],1)],1)],1),_vm._v(\" \"),_c('div',[_c('bl-table',{attrs:{\"loading\":_vm.loading,\"border\":false,\"selection\":true,\"dataSource\":_vm.tableData,\"columns\":_vm.columns,\"maxHeight\":300,\"defaultChecked\":_vm.checkedList,\"uniqueStr\":\"goodsNo\"},on:{\"select\":_vm.selectHandel,\"select-all\":_vm.selectAllHandel}}),_vm._v(\" \"),_c('bl-pagination',{attrs:{\"showPagination\":_vm.tableData.length > 0,\"pageNum\":_vm.pageNum,\"total\":_vm.total},on:{\"size-change\":_vm.changeSize,\"current-change\":_vm.changeCurrent}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.confirm}},[_vm._v(\"确定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-72a51610\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChooseGoods.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChooseGoods.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-72a51610\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChooseGoods.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue\n// module id = null\n// module chunks = ","import {mapGetters} from 'vuex'\nexport default {\n  created() {\n    if(!this.regionsList || this.regionsList.length === 0) {\n      this.$store.dispatch(\"regions/GET_REGIONS\")\n    }\n  },\n  computed: {\n    ...mapGetters({\n      regionsList: 'regions/REGIONS'\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/module/mixin/getRegions.js"],"sourceRoot":""}