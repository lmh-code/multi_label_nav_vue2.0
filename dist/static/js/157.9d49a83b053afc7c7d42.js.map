{"version":3,"sources":["webpack:///src/components/Activity/DisCoupon/Add/AddCustomer.vue","webpack:///./src/components/Activity/DisCoupon/Add/AddCustomer.vue?f3e5","webpack:///./src/components/Activity/DisCoupon/Add/AddCustomer.vue"],"names":["reqUrl","AddCustomer","data","isDisabled","addParamMesg","triggerType","triggerTypeName","cardType","title","beginTime","endTime","setDisableTime","disabledDate","time","getTime","Date","now","created","mounted","components","store-template","TemplateStore","prom-type-template","TemplatePromType","methods","changeStore","val","key","this","changePromType","promReqs","formattData","_this","countReg","countRegtofixed","$message","length","utils","useType","undefined","useBeginTime","useEndTime","useDayCount","test","disCount","disIsnull","promDiscounts","forEach","item","goodCount","goodIsnull","every","meetAmount","discAmount","sendPromCount","parseInt","needPayAmount","goodsNo","productQtyLimit","splice","doSaveHandel","_this2","$set","$http","post","extends_default","then","res","setTimeout","code","success","$router","push","Error","msg","catch","e","$notify","error","message","doCancelHandel","_this3","$confirm","confirmButtonText","cancelButtonText","type","Add_AddCustomer","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","label-width","label","required","staticStyle","color","font-size","font-weight","_v","_s","size","placeholder","clearable","value","callback","$$v","expression","picker-options","on","disabled","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/157.9d49a83b053afc7c7d42.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"add-form-wraper\">\r\n      <el-form ref=\"form\" :model=\"addParamMesg\" label-width=\"140px\">\r\n        <el-form-item label=\"活动类型\" required>\r\n          <p style=\"color: #222;font-size: 16px; font-weight: bold;\">{{addParamMesg.triggerTypeName}}</p>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动名称\" required>\r\n          <el-input v-model=\"addParamMesg.title\" size=\"small\" class=\"add-input\" placeholder=\"请输入活动名称\" clearable></el-input>\r\n          <span>活动名称,限制30个汉字</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动开始日期\" required>\r\n          <el-date-picker\r\n            class=\"add-input\"\r\n            v-model=\"addParamMesg.beginTime\"\r\n            type=\"date\"\r\n            placeholder=\"请选择活动开始日期\"\r\n            :picker-options=\"setDisableTime\"\r\n            size=\"small\">\r\n          </el-date-picker>\r\n          <span>活动开始日期</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动结束日期\" required>\r\n          <el-date-picker\r\n            class=\"add-input\"\r\n            v-model=\"addParamMesg.endTime\"\r\n            type=\"date\"\r\n            placeholder=\"请选择活动结束日期\"\r\n            :picker-options=\"setDisableTime\"\r\n            size=\"small\">\r\n          </el-date-picker>\r\n          <span>活动结束日期</span>\r\n        </el-form-item>\r\n\r\n        <!-- 门店 -->\r\n        <store-template @changeStore=\"changeStore\"></store-template>\r\n        <!-- 卡券形式 满减券 商品券 -->\r\n        <prom-type-template @changePromType=\"changePromType\" :triggerType=\"addParamMesg.triggerType\"></prom-type-template>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel\" :disabled=\"isDisabled\">保存</el-button>\r\n          <el-button size=\"small\" @click=\"doCancelHandel\">取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import * as utils from '@/utils/utils'\r\n  import TemplateStore from \"../AddTemplate/TemplateStore\"\r\n  import TemplatePromType from \"../AddTemplate/TemplatePromType\"\r\n  const reqUrl = {\r\n    // 新增活动规则\r\n    batchAddProm: \"/member/erp/prom/batchAddProm\"\r\n  }\r\n  export default {\r\n    data() {\r\n      return {\r\n        isDisabled: false,\r\n        addParamMesg: {\r\n          triggerType: 12,\r\n          triggerTypeName: '指定客户发券',\r\n          cardType: 2,\r\n          title: '',\r\n          beginTime: '',\r\n          endTime: ''\r\n        },\r\n        setDisableTime: {\r\n          disabledDate(time) {\r\n            return time.getTime() < Date.now() - 8.64e7;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n\r\n    },\r\n    mounted() {\r\n    },\r\n    components: {\r\n      \"store-template\": TemplateStore,\r\n      \"prom-type-template\": TemplatePromType\r\n    },\r\n    methods: {\r\n      changeStore(val) {\r\n        // 传值\r\n        if(val) {\r\n          for(let key in val) {\r\n            this.addParamMesg[key] = val[key]\r\n          }\r\n        }\r\n      },\r\n      changePromType(val) {\r\n        this.addParamMesg.promReqs = val\r\n      },\r\n      /**\r\n       * [formattData 数据格式化]\r\n       * @return {[type]} [description]\r\n       */\r\n      formattData() {\r\n        let countReg = /^\\+?[1-9][0-9]*$/;\r\n        let countRegtofixed = /(^[1-9]{1}[0-9]*$)|(^[0-9]*\\.[0-9]{1}$)|(^[0-9]*\\.[0-9]{2}$)/\r\n        // 活动名称 日期\r\n        if(!this.addParamMesg.title) {\r\n          this.$message(\"请输入活动名称\")\r\n          return false\r\n        }else if(this.addParamMesg.title.length > 30) {\r\n          this.$message(\"活动名称限制30个汉字\")\r\n          return false\r\n        }\r\n        if(this.addParamMesg.beginTime == \"\") {\r\n          this.$message(\"请选择活动开始日期\")\r\n          return false\r\n        }else {\r\n          this.addParamMesg.beginTime = utils.timestampToTimeNoHMS(new Date(this.addParamMesg.beginTime).getTime()) + ' 00:00:00'\r\n        }\r\n        if(this.addParamMesg.endTime == \"\") {\r\n          this.$message(\"请选择活动结束日期\")\r\n          return false\r\n        }else {\r\n          this.addParamMesg.endTime = utils.timestampToTimeNoHMS(new Date(this.addParamMesg.endTime).getTime()) + ' 23:59:59'\r\n        }\r\n        if(new Date(this.addParamMesg.endTime).getTime() <= new Date(this.addParamMesg.beginTime).getTime()) {\r\n          this.$message(\"活动结束日期不能早于或等于开始日期\")\r\n          return false\r\n        }\r\n        \r\n        // 卡券有效时间\r\n        if(this.addParamMesg.useType === \"\" || this.addParamMesg.useType === undefined) {\r\n          this.$message(\"请选择卡券有效时间\")\r\n          return false\r\n        }else if(this.addParamMesg.useType === 1) {\r\n          if(this.addParamMesg.useBeginTime == \"\") {\r\n            this.$message(\"请选择卡券有效开始日期\")\r\n            return false\r\n          }else {\r\n            this.addParamMesg.useBeginTime = utils.timestampToTimeNoHMS(new Date(this.addParamMesg.useBeginTime).getTime()) + ' 00:00:00'\r\n          }\r\n          if(this.addParamMesg.useEndTime == \"\") {\r\n            this.$message(\"请选择卡券有效结束日期\")\r\n            return false\r\n          }else {\r\n            this.addParamMesg.useEndTime = utils.timestampToTimeNoHMS(new Date(this.addParamMesg.useEndTime).getTime()) + ' 23:59:59'\r\n          }\r\n          if(new Date(this.addParamMesg.useEndTime).getTime() <= new Date(this.addParamMesg.useBeginTime).getTime()) {\r\n            this.$message(\"卡券有效结束日期不能早于或等于开始日期\")\r\n            return false\r\n          }\r\n          if(new Date(this.addParamMesg.useEndTime).getTime() < new Date(this.addParamMesg.endTime).getTime()) {\r\n            this.$message(\"卡券有效结束日期不能早于活动结束时间\")\r\n            return false\r\n          }\r\n          delete this.addParamMesg['useDayCount']\r\n        }else if(this.addParamMesg.useType === 2) {\r\n          if(this.addParamMesg.useDayCount == \"\") {\r\n            this.$message(\"卡券有效使用天数不能为空\")\r\n            return false\r\n          }\r\n          if(countReg.test(this.addParamMesg.useDayCount) == false) {\r\n            this.$message(\"卡券有效使用天数为大于零的整数\");\r\n            return false\r\n          }\r\n          delete this.addParamMesg['useBeginTime']\r\n          delete this.addParamMesg['useEndTime']\r\n        }\r\n\r\n        // 满减券\r\n        let disCount = this.addParamMesg.promReqs[0]\r\n        let disIsnull = true\r\n        if(disCount && disCount.promDiscounts && disCount.promDiscounts.length > 0) {\r\n          disCount.promDiscounts.forEach(item => {\r\n            for(let key in item) {\r\n              if((key == 'discAmount' || key == 'meetAmount' || key == 'sendPromCount') && item[key] != '') {\r\n                disIsnull = false\r\n              }\r\n            }        \r\n          })\r\n        }\r\n        // 商品券\r\n        let goodCount = this.addParamMesg.promReqs[1]\r\n        let goodIsnull = true\r\n        if(goodCount && goodCount.promDiscounts && goodCount.promDiscounts.length > 0) {\r\n          goodCount.promDiscounts.forEach(item => {\r\n            for(let key in item) {\r\n              if((key == 'range' || key == 'goodsType' || key == 'needPayAmount' || key == 'goodsNo' || key == 'sendPromCount') && item[key] != '') {\r\n                goodIsnull = false\r\n              }\r\n            }        \r\n          })\r\n        }\r\n        \r\n        if(disIsnull && goodIsnull) {\r\n          this.$message('请设置满减券卡券奖励')\r\n          return false\r\n        }\r\n        if(disIsnull == false) {\r\n          let dis = disCount && disCount.promDiscounts ? disCount.promDiscounts.every(item => {\r\n            if(item.meetAmount == '' || item.discAmount == '' || item.sendPromCount == '') {\r\n              this.$message(\"满减券卡券奖励-满减金额或张数不能为空\");\r\n              return false\r\n            }else if(countRegtofixed.test(item.meetAmount) === false || countRegtofixed.test(item.discAmount) === false) {\r\n              this.$message(\"满减券卡券奖励-满减金额大于零的数字，允许输入两位小数\");\r\n              return false\r\n            }else if(countReg.test(item.sendPromCount) === false) {\r\n              this.$message(\"满减券卡券奖励-满减金额或张数为大于零的整数\");\r\n              return false\r\n            }else if(parseInt(item.meetAmount) < parseInt(item.discAmount)) {\r\n              this.$message(\"满减券卡券奖励-减金额不能大于满金额\");\r\n              return false\r\n            }\r\n            return true\r\n          }) : false\r\n          if(dis == false) {\r\n            return false\r\n          }\r\n        }\r\n        if(goodIsnull == false) {\r\n          let good = goodCount && goodCount.promDiscounts ? goodCount.promDiscounts.every(item => {\r\n            if(item.needPayAmount == '' || item.needPayAmount == undefined) {\r\n              this.$message('商品券卡券奖励-商品应付价格不能为空')\r\n              return false\r\n            }else {\r\n              if(item.needPayAmount != 0 && !countRegtofixed.test(item.needPayAmount)) {\r\n                this.$message('商品券卡券奖励-商品应付价格输入大于等于0的数字，允许输入一位小数。')\r\n                return false\r\n              }\r\n            }\r\n            if(item.goodsNo == '' || item.goodsNo == undefined) {\r\n              this.$message('商品券卡券奖励-请选择商品')\r\n              return false\r\n            }\r\n            if(item.productQtyLimit == '' || item.productQtyLimit == undefined) {\r\n              this.$message('商品券卡券奖励-请输入选择商品数量小于等于的值')\r\n              return false\r\n            }else {\r\n              if(!countReg.test(item.productQtyLimit)) {\r\n                this.$message('商品券卡券奖励-选择商品数量小于等于的值格式不对，为大于零的整数')\r\n                return false\r\n              }\r\n            }\r\n            if(item.sendPromCount === '' || item.sendPromCount == undefined) {\r\n              this.$message('商品券卡券奖励-请输入发放优惠券数量')\r\n              return false\r\n            }else { \r\n              if(!countReg.test(item.sendPromCount)) {\r\n                this.$message('商品券卡券奖励-发放优惠券数量为大于零的整数')\r\n                return false\r\n              }\r\n            }\r\n            return true\r\n          }) : false\r\n          if(good == false) {\r\n            return false\r\n          }\r\n        }\r\n        // 删除空的满减券或者商品券\r\n        if(disIsnull == true) {\r\n          this.addParamMesg.promReqs.splice(0,1)\r\n        }\r\n        if(goodIsnull == true) {\r\n          this.addParamMesg.promReqs.splice(1,1)\r\n        }\r\n        return true\r\n      },\r\n      /**\r\n       * [doSaveHandel 保存]\r\n       * @return {[type]} [description]\r\n       */\r\n      doSaveHandel() {\r\n        if(this.formattData() === false) {\r\n          return\r\n        }\r\n        // 商品类型传3、4、5\r\n        if(this.addParamMesg.promReqs[0]) {\r\n          this.$set(this.addParamMesg.promReqs[0], 'onlineGoodsType', '3;4;5')\r\n        }\r\n        if(this.addParamMesg.promReqs[1]) {\r\n          this.$set(this.addParamMesg.promReqs[1], 'onlineGoodsType', '3;4;5')\r\n        }\r\n        this.isDisabled = true\r\n        this.$http.post(reqUrl.batchAddProm, {...this.addParamMesg}).then(res => {\r\n          // 保存按钮可再次点击\r\n          setTimeout(() => {\r\n            this.isDisabled = false\r\n          }, 800)\r\n          if(res.code === 0) {\r\n            this.$message.success(\"保存成功\")\r\n            this.$router.push('/discount_coupon')\r\n            return\r\n          }\r\n          throw new Error(res.msg)\r\n        }).catch(e => {\r\n          this.isDisabled = false\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: e.message\r\n          })\r\n        })\r\n      },\r\n      doCancelHandel() {\r\n        this.$confirm('确定取消吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.push('/discount_coupon')\r\n        }).catch(() => {})\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Activity/DisCoupon/Add/AddCustomer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.addParamMesg,\"label-width\":\"140px\"}},[_c('el-form-item',{attrs:{\"label\":\"活动类型\",\"required\":\"\"}},[_c('p',{staticStyle:{\"color\":\"#222\",\"font-size\":\"16px\",\"font-weight\":\"bold\"}},[_vm._v(_vm._s(_vm.addParamMesg.triggerTypeName))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动名称\",\"required\":\"\"}},[_c('el-input',{staticClass:\"add-input\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入活动名称\",\"clearable\":\"\"},model:{value:(_vm.addParamMesg.title),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"title\", $$v)},expression:\"addParamMesg.title\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动名称,限制30个汉字\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动开始日期\",\"required\":\"\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"type\":\"date\",\"placeholder\":\"请选择活动开始日期\",\"picker-options\":_vm.setDisableTime,\"size\":\"small\"},model:{value:(_vm.addParamMesg.beginTime),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"beginTime\", $$v)},expression:\"addParamMesg.beginTime\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动开始日期\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"活动结束日期\",\"required\":\"\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"type\":\"date\",\"placeholder\":\"请选择活动结束日期\",\"picker-options\":_vm.setDisableTime,\"size\":\"small\"},model:{value:(_vm.addParamMesg.endTime),callback:function ($$v) {_vm.$set(_vm.addParamMesg, \"endTime\", $$v)},expression:\"addParamMesg.endTime\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"活动结束日期\")])],1),_vm._v(\" \"),_c('store-template',{on:{\"changeStore\":_vm.changeStore}}),_vm._v(\" \"),_c('prom-type-template',{attrs:{\"triggerType\":_vm.addParamMesg.triggerType},on:{\"changePromType\":_vm.changePromType}}),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled},on:{\"click\":_vm.doSaveHandel}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"取消\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ad65f780\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Activity/DisCoupon/Add/AddCustomer.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddCustomer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddCustomer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ad65f780\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddCustomer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Activity/DisCoupon/Add/AddCustomer.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}