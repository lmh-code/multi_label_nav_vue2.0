{"version":3,"sources":["webpack:///src/module/views/BuyAndSale/Order/Reject.vue","webpack:///./src/module/views/BuyAndSale/Order/Reject.vue?e854","webpack:///./src/module/views/BuyAndSale/Order/Reject.vue"],"names":["Reject","mixins","detailAndReject","options","data","isDisabled","methods","doCancelHandel","this","closePage","doEditHandel","_this","paperNo","goodsReqListTemp","orderSumTableData","filter","item","vendorPrice","vendorQty","vendorRemark","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","value","$tip","message","err","return","params","orderRefuseDetailReqs","map","id","erpGoodsNo","$http","post","buyAndSale","refuseOrder","extends_default","then","res","code","editSuccessHandel","storeNo","Error","msg","catch","e","notify","Order_Reject","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","orderMsg","storeName","createUserName","userPhone","createTime","expectDate","attrs","barCodeMsg","tagName","remark","loading","border","selection","dataSource","columns","orderSumTableColumn","type","size","disabled","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6MAkFAA,cACAC,QAAAC,EAAA,EAAAC,EAAA,GACAC,KAFA,WAGA,OACAC,YAAA,IAGAC,SACAC,eADA,WAEAC,KAAAC,UAAA,eAEAC,aAJA,WAIA,IAAAC,EAAAH,KACAI,EAAAJ,KAAAI,QAEAC,EAAAL,KAAAM,kBAAAC,OAAA,SAAAC,GACA,OAAAA,EAAAC,aAAA,MAAAD,EAAAC,aAAAD,EAAAE,WAAA,MAAAF,EAAAE,WAAAF,EAAAG,eAEA,OAAAN,EAAAO,OAAA,CAGA,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IACA,QAAAC,EAAAC,EAAAC,IAAAd,KAAAQ,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,OAAAL,EAAAS,EAAAK,MASA,GAAAd,EAAAG,cAAAH,EAAAG,aAAAC,OAAA,GAEA,YADAZ,KAAAuB,KAAAC,QAAA,6BAXA,MAAAC,GAAAX,GAAA,EAAAC,EAAAU,EAAA,aAAAZ,GAAAK,EAAAQ,QAAAR,EAAAQ,SAAA,WAAAZ,EAAA,MAAAC,GAgBA,IAAAY,GACAvB,UACAwB,sBAAAvB,EAAAwB,IAAA,SAAArB,GACA,OACAsB,GAAAtB,EAAAsB,GACAC,WAAAvB,EAAAuB,WACAtB,YAAAD,EAAAC,YACAC,UAAAF,EAAAE,UACAC,aAAAH,EAAAG,iBAIAX,KAAAH,YAAA,EACAG,KAAAgC,MAAAC,KAAAC,EAAA,EAAAC,YAAAC,OAAAT,IAAAU,KAAA,SAAAC,GAEA,GADAnC,EAAAN,YAAA,EACA,IAAAyC,EAAAC,KAIA,OAHApC,EAAAoB,KAAAC,QAAA,qBACArB,EAAAqC,kBAAA,mBACArC,EAAAF,UAAA,yBAAAG,EAAA,IAAAD,EAAAsC,SAGA,UAAAC,MAAAJ,EAAAK,OACAC,MAAA,SAAAC,GACA1C,EAAAN,YAAA,EACAM,EAAAoB,KAAAuB,OAAAD,EAAArB,SAAA,0BA1CAxB,KAAAuB,KAAAC,QAAA,4BCjGeuB,GADEC,OAFjB,WAA0B,IAAAC,EAAAjD,KAAakD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,YAAA,0BAAoCF,EAAA,OAAYE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,OAAiBL,EAAAM,GAAA,SAAAN,EAAAO,GAAAP,EAAAQ,SAAAC,WAAA,SAAAT,EAAAM,GAAA,KAAAH,EAAA,OAAkFE,YAAA,OAAiBL,EAAAM,GAAA,QAAAN,EAAAO,GAAAP,EAAAQ,SAAArD,cAAA6C,EAAAM,GAAA,KAAAH,EAAA,OAAyEE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,OAAiBL,EAAAM,GAAA,QAAAN,EAAAO,GAAAP,EAAAQ,SAAAE,gBAAA,SAAAV,EAAAM,GAAA,KAAAH,EAAA,OAAsFE,YAAA,OAAiBL,EAAAM,GAAA,SAAAN,EAAAO,GAAAP,EAAAQ,SAAAG,WAAA,WAAAX,EAAAM,GAAA,KAAAH,EAAA,OAAoFE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,OAAiBL,EAAAM,GAAA,SAAAN,EAAAO,GAAAP,EAAAQ,SAAAI,YAAA,SAAAZ,EAAAM,GAAA,KAAAH,EAAA,OAAmFE,YAAA,OAAiBL,EAAAM,GAAA,WAAAN,EAAAO,GAAAP,EAAAQ,SAAAK,YAAA,aAAAb,EAAAM,GAAA,KAAAH,EAAA,OAAyFE,YAAA,UAAoBF,EAAA,YAAiBW,OAAOC,WAAAf,EAAA7C,YAA0B,GAAA6C,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,eAAyBL,EAAAM,GAAAN,EAAAO,GAAAP,EAAAQ,SAAAQ,cAAAhB,EAAAM,GAAA,KAAAH,EAAA,OAAiEE,YAAA,YAAsBL,EAAAM,GAAA,MAAAN,EAAAO,GAAAP,EAAAQ,SAAAS,aAAAjB,EAAAM,GAAA,KAAAH,EAAA,OAAsEE,YAAA,iBAA2BF,EAAA,YAAiBW,OAAOI,QAAAlB,EAAAkB,QAAAC,QAAA,EAAAC,WAAA,EAAAC,WAAArB,EAAA3C,kBAAAiE,QAAAtB,EAAAuB,uBAA6HvB,EAAAM,GAAA,KAAAH,EAAA,OAAAA,EAAA,MAAiCE,YAAA,cAAwBL,EAAAM,GAAA,KAAAH,EAAA,aAA8BW,OAAOU,KAAA,UAAAC,KAAA,QAAAC,SAAA1B,EAAApD,WAAAsE,QAAAlB,EAAApD,YAAmF+E,IAAKC,MAAA5B,EAAA/C,gBAA0B+C,EAAAM,GAAA,QAAAN,EAAAM,GAAA,KAAAH,EAAA,aAA6CW,OAAOW,KAAA,SAAeE,IAAKC,MAAA5B,EAAAlD,kBAA4BkD,EAAAM,GAAA,mBAEhpDuB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEzF,EACAuD,GATF,EAVA,SAAAmC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/25.ee331a374ea1d6304ecf.1615898974438.js","sourcesContent":["<style lang=\"less\" scoped>\n  @import './detail.less';\n</style>\n<template>\n  <div>\n    <div class=\"search-form-wraper pr\">\n      <div class=\"tow-row\">\n        <div class=\"left\">\n          <div class=\"row-item\">\n            <div class=\"f1\">门店/仓库：{{orderMsg.storeName || '--'}}</div>\n            <div class=\"f1\">订单编号：{{orderMsg.paperNo}}</div>\n          </div>\n          <div class=\"row-item\">\n            <div class=\"f1\">联系人: {{orderMsg.createUserName || '--'}}</div>\n            <div class=\"f1\">联系电话: {{orderMsg.userPhone || '--'}}</div>\n          </div>\n          <div class=\"row-item\">\n            <div class=\"f1\">单据时间: {{orderMsg.createTime || '--'}}</div>\n            <div class=\"f1\">期望送达时间: {{orderMsg.expectDate || '--'}}</div>\n          </div>\n        </div>\n        <div class=\"right\">\n          <bar-code :barCodeMsg=\"paperNo\"/>\n        </div>\n        <div class=\"status-tag\">{{orderMsg.tagName}}</div>\n      </div>\n      <div class=\"tow-row\">备注：{{orderMsg.remark}}</div>\n    </div>\n    <!-- <div class=\"search-form-wraper\">\n      <el-form :model=\"searchContent\" label-position=\"top\">\n        <el-form-item label=\"货号\">\n          <el-input \n            v-model.trim=\"searchContent.vendorGoodsNo\" \n            size=\"small\" \n            class=\"search-input\" \n            placeholder=\"请输入货号\"\n            clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"条码\">\n          <el-input \n            v-model.trim=\"searchContent.barcode\" \n            size=\"small\" \n            class=\"search-input\" \n            placeholder=\"请输入条码\"\n            clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"商品编码\">\n          <el-input \n            v-model.trim=\"searchContent.erpGoodsNo\" \n            size=\"small\" \n            class=\"search-input\" \n            placeholder=\"请输入商品编码\"\n            clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"getOrderSum\" size=\"mini\">搜索</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"exportHandel\" size=\"mini\" :loading=\"exportLoading\">导出</el-button>\n        </el-form-item>\n      </el-form>\n    </div> -->\n    <div class=\"table-wraper\">\n      <bl-table\n        :loading=\"loading\"\n        :border=\"false\"\n        :selection=\"false\"\n        :dataSource=\"orderSumTableData\"\n        :columns=\"orderSumTableColumn\" />\n      <div>\n        <hr class=\"s-slip-tb\">\n        <el-button type=\"primary\" size=\"small\" @click=\"doEditHandel\" :disabled=\"isDisabled\" :loading=\"isDisabled\">提交</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">关闭</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import optionsMixin from '@/module/mixin/options'\n  import detailAndRejectMinin from './mixin/detailAndReject'\n  import requestUrl from '@/module/api/buyAndSale'\n  import constant from '@/utils/constant'\n  export default {\n    mixins: [detailAndRejectMinin, optionsMixin],\n    data() {\n      return {\n        isDisabled: false\n      }\n    },\n    methods: {\n      doCancelHandel() {\n        this.closePage('/order_mgt')\n      },\n      doEditHandel() {\n        let paperNo = this.paperNo\n        \n        let goodsReqListTemp = this.orderSumTableData.filter(item => {\n          return item.vendorPrice || item.vendorPrice === '0' || item.vendorQty || item.vendorQty === '0' || item.vendorRemark // 新接口其实已经没有vendorPrice和vendorQty返回了\n        })\n        if(goodsReqListTemp.length === 0) {\n          this.$tip.message('请填写拒绝接单原因!', 'warning')\n          return\n        }else {\n          for(let item of goodsReqListTemp) {\n            // if(item.vendorPrice && !constant.salePriceReg.test(item.vendorPrice)) {\n            //   this.$tip.message('可订单价只允许为大于等于0的数字 (保留两位小数)!', 'warning')\n            //   return\n            // }\n            // if(item.vendorQty && !constant.salePriceReg.test(item.vendorQty)) {\n            //   this.$tip.message('可订数量只允许为大于等于0的数字 (保留两位小数)!', 'warning') \n            //   return\n            // }\n            if(item.vendorRemark && item.vendorRemark.length > 50) {\n              this.$tip.message('备注：最多允许填写50个字!', 'warning')\n              return\n            }\n          }\n        }\n        let params = {\n          paperNo: paperNo,\n          orderRefuseDetailReqs: goodsReqListTemp.map(item => {\n            return {\n              id: item.id,\n              erpGoodsNo: item.erpGoodsNo,\n              vendorPrice: item.vendorPrice,\n              vendorQty: item.vendorQty,\n              vendorRemark: item.vendorRemark\n            }\n          })\n        }\n        this.isDisabled = true\n        this.$http.post(requestUrl.refuseOrder, {...params}).then(res => {\n          this.isDisabled = false\n          if(res.code === 0) {\n            this.$tip.message('拒绝接单成功!', 'success')\n            this.editSuccessHandel('/order_mgt')\n            this.closePage(`/order_mgt/detail/001/${paperNo}/${this.storeNo}`)\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.isDisabled = false\n          this.$tip.notify(e.message || '', 'error', '系统提示')\n        }) \n      }\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/BuyAndSale/Order/Reject.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"search-form-wraper pr\"},[_c('div',{staticClass:\"tow-row\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"row-item\"},[_c('div',{staticClass:\"f1\"},[_vm._v(\"门店/仓库：\"+_vm._s(_vm.orderMsg.storeName || '--'))]),_vm._v(\" \"),_c('div',{staticClass:\"f1\"},[_vm._v(\"订单编号：\"+_vm._s(_vm.orderMsg.paperNo))])]),_vm._v(\" \"),_c('div',{staticClass:\"row-item\"},[_c('div',{staticClass:\"f1\"},[_vm._v(\"联系人: \"+_vm._s(_vm.orderMsg.createUserName || '--'))]),_vm._v(\" \"),_c('div',{staticClass:\"f1\"},[_vm._v(\"联系电话: \"+_vm._s(_vm.orderMsg.userPhone || '--'))])]),_vm._v(\" \"),_c('div',{staticClass:\"row-item\"},[_c('div',{staticClass:\"f1\"},[_vm._v(\"单据时间: \"+_vm._s(_vm.orderMsg.createTime || '--'))]),_vm._v(\" \"),_c('div',{staticClass:\"f1\"},[_vm._v(\"期望送达时间: \"+_vm._s(_vm.orderMsg.expectDate || '--'))])])]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('bar-code',{attrs:{\"barCodeMsg\":_vm.paperNo}})],1),_vm._v(\" \"),_c('div',{staticClass:\"status-tag\"},[_vm._v(_vm._s(_vm.orderMsg.tagName))])]),_vm._v(\" \"),_c('div',{staticClass:\"tow-row\"},[_vm._v(\"备注：\"+_vm._s(_vm.orderMsg.remark))])]),_vm._v(\" \"),_c('div',{staticClass:\"table-wraper\"},[_c('bl-table',{attrs:{\"loading\":_vm.loading,\"border\":false,\"selection\":false,\"dataSource\":_vm.orderSumTableData,\"columns\":_vm.orderSumTableColumn}}),_vm._v(\" \"),_c('div',[_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"loading\":_vm.isDisabled},on:{\"click\":_vm.doEditHandel}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"关闭\")])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c42140a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/BuyAndSale/Order/Reject.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c42140a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!style-resources-loader?{\\\"patterns\\\":\\\"/Users/zhanyizhu/Desktop/projects/blx-code/supplier_web/src/assets/style/base.less\\\"}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Reject.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Reject.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Reject.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c42140a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Reject.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3c42140a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/BuyAndSale/Order/Reject.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}