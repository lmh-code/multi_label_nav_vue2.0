webpackJsonp([90],{hjkX:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("bOdI"),r=e.n(s),i=e("BO1k"),o=e.n(i),n=e("oAV5"),c="/plateform/a/store/condition/selectStore",l="/plateform/a/mall/waitPickOrder/getOrderList",d="/plateform/a/mall/waitPickOrder/getTodayCountInfo",p="/plateform/a/mall/orderProduct/tomorrowTotal",v={data:function(){return{loading:!1,pageNo:1,pageSize:20,total:0,tableData:[],storeOptions:[],storeNo:"",activeName:"taday",tadayNum:0,tomorrowNum:0,yesterdayNum:0,tadayOrder:[],tomorrowOrder:[],yesterdayOrder:[],orderMesg:[],tadayOrderTotal:[],tomorrowOrderTotal:[]}},created:function(){this.getSelectStore(),this.doSearchHandel()},mounted:function(){},components:{},methods:{getSelectStore:function(){var t=this;this.$http.post(c,{DIFFCITY:!0}).then(function(a){if(0!==a.code)throw new Error(a.msg);if(a.data&&a.data.length){var e=[],s=!0,r=!1,i=void 0;try{for(var n,c=o()(a.data);!(s=(n=c.next()).done);s=!0){var l=n.value,d={value:l.erpStoreNo,label:l.erpStoreNo+"-"+l.erpStoreName};e.push(d)}}catch(t){r=!0,i=t}finally{try{!s&&c.return&&c.return()}finally{if(r)throw i}}t.storeOptions=e}}).catch(function(t){console.log("提示(获取门店列表):",t.message)})},doSearchHandel:function(t){var a=this;this.loading=!0;var e,s=n.u((new Date).getTime()),i=n.u((new Date).getTime()+864e5);"tomorrow"==t?this.$http.post(l,(e={pickDate:i,storeNo:this.storeNo},r()(e,"storeNo",this.storeNo),r()(e,"DIFFCITY",!0),e)).then(function(t){if(0!==t.code)throw new Error(t.msg);if(a.loading=!1,t.data&&t.data.result&&t.data.result.length){var e=t.data.result;e.forEach(function(t,a){t.pickDate=n.u(t.pickDate),t.pickStartTime&&t.pickEndTime&&(t.pickStartTime=n.s(t.pickStartTime).slice(11,16),t.pickEndTime=n.s(t.pickEndTime).slice(11,16)),t.orderTime=n.v(t.orderTime),t.orderStatusName="明日待自提",t.msgDetail=!1}),a.tomorrowOrder=e}else a.tomorrowOrder=[];var s=a.activeName+"Order";a.orderMesg=a[s]}).catch(function(t){a.loading=!1,console.log("提示(明日待自提):",t.message)}):"yesterday"==t?this.$http.post(l,{pickDate:s,dateOldFlag:!0,storeNo:this.storeNo,DIFFCITY:!0}).then(function(t){if(0!==t.code)throw new Error(t.msg);if(a.loading=!1,t.data&&t.data.result&&t.data.result.length){var e=t.data.result;e.forEach(function(t,a){t.pickDate=n.u(t.pickDate),t.pickStartTime&&t.pickEndTime&&(t.pickStartTime=n.s(t.pickStartTime).slice(11,16),t.pickEndTime=n.s(t.pickEndTime).slice(11,16)),t.orderTime=n.v(t.orderTime),t.orderStatusName="超时未提",t.msgDetail=!1}),a.yesterdayOrder=e}else a.yesterdayOrder=[];var s=a.activeName+"Order";a.orderMesg=a[s]}).catch(function(t){a.loading=!1,console.log("提示(超时未提):",t.message)}):this.$http.post(l,{pickDate:s,storeNo:this.storeNo,DIFFCITY:!0}).then(function(t){if(0!==t.code)throw new Error(t.msg);if(a.loading=!1,t.data&&t.data.result&&t.data.result.length){var e=t.data.result;e.forEach(function(t,a){t.pickDate=n.u(t.pickDate),t.pickStartTime&&t.pickEndTime&&(t.pickStartTime=n.s(t.pickStartTime).slice(11,16),t.pickEndTime=n.s(t.pickEndTime).slice(11,16)),t.orderTime=n.v(t.orderTime),t.orderStatusName="今日待自提",t.msgDetail=!1}),a.tadayOrder=e}else a.tadayOrder=[];var s=a.activeName+"Order";a.orderMesg=a[s]}).catch(function(t){a.loading=!1,console.log("提示(今日待自提):",t.message)});this.$http.post(d,{pickDate:s,storeNo:this.storeNo,DIFFCITY:!0}).then(function(t){if(0!==t.code)throw new Error(t.msg);t.data?(a.tadayOrderTotal=t.data,a.tadayNum=t.data.todayOrderCount||0,a.tomorrowNum=t.data.tomorrowOrderCount||0,a.yesterdayNum=t.data.timeOutOrderCount||0):(a.tadayOrderTotal=[],a.tadayNum=0,a.tomorrowNum=0,a.yesterdayNum=0)}).catch(function(t){console.log("提示(今日待自提合计):",t.message)}),this.$http.post(p,{storeNo:this.storeNo,DIFFCITY:!0}).then(function(t){if(0!==t.code)throw new Error(t.msg);t.data?a.tomorrowOrderTotal=t.data:a.tomorrowOrderTotal=[]}).catch(function(t){console.log("提示(明日待自提合计):",t.message)})},handleClick:function(t,a){var e=t.name+"Order";this.orderMesg=this[e],this.doSearchHandel(t.name)}}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"handel-search-wraper"},[e("div",{staticClass:"search-form-wraper"},[e("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择门店",size:"small",clearable:""},on:{change:t.doSearchHandel},model:{value:t.storeNo,callback:function(a){t.storeNo=a},expression:"storeNo"}},t._l(t.storeOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)]),t._v(" "),e("el-tabs",{staticClass:"order-msg",attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{name:"taday"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("今日待自提 "+t._s(t.tadayNum))])]),t._v(" "),e("el-tab-pane",{attrs:{name:"tomorrow"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("明日待自提 "+t._s(t.tomorrowNum))])]),t._v(" "),e("el-tab-pane",{attrs:{name:"yesterday"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("超时未提 "+t._s(t.yesterdayNum))])])],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"o-detail-wraper"},[t.orderMesg.length>0?e("div",{staticClass:"l-con-order"},t._l(t.orderMesg,function(a){return e("div",{key:a.orderId,staticClass:"everyOrder"},[e("div",{staticClass:"lc-msg-st"},[e("p",{staticClass:"p-name"},[t._v(t._s(a.platformStr))]),t._v(" "),e("p",{staticClass:"p-ot-msg"},[e("span",[t._v("预售自提")]),t._v(" "),e("span",{staticStyle:{padding:"0 2px"}},[t._v("|")]),t._v(" "),a.pickStartTime&&a.pickEndTime?e("span",[t._v("要求 "+t._s(a.pickDate)+" "+t._s(a.pickStartTime)+"~"+t._s(a.pickEndTime)+" 自提")]):e("span",[t._v("要求 "+t._s(a.pickDate)+" 自提")]),t._v(" "),e("span",{staticStyle:{padding:"0 2px"}},[t._v("|")]),t._v(" "),e("span",[t._v("下单时间 "+t._s(a.orderTime))]),t._v(" "),e("span",{staticStyle:{padding:"0 2px"}},[t._v("|")]),t._v(" "),e("span",[t._v("订单号 "+t._s(a.orderId))])]),t._v(" "),e("p",{staticClass:"o-status"},[t._v("\n            "+t._s(a.orderStatusName)+"\n          ")])]),t._v(" "),e("div",{staticClass:"lc-msg-2p1i"},[t._m(0,!0),t._v(" "),e("div",{staticClass:"msg-2p"},[e("p",[e("span",[t._v(t._s(a.userName))]),t._v(" "),e("span",[t._v("  "+t._s(a.userPhoneNum))])]),t._v(" "),e("p",[t._v("提货地点："+t._s(a.pickAddr))])])]),t._v(" "),e("div",{staticClass:"lc-msg-2p1i"},[t._m(1,!0),t._v(" "),e("div",{staticClass:"msg-2p"},[e("p",[e("span",[t._v(t._s(a.storeNo))]),t._v(" "),e("span",[t._v(t._s(a.storeName))])]),t._v(" "),e("p",[t._v("等待门店备货")])])]),t._v(" "),t._m(2,!0),t._v(" "),e("div",{staticClass:"lc-msg-2p1i"},[t._m(3,!0),t._v(" "),e("div",{staticClass:"msg-2p"},[e("p",[t._v("\n              商品信息\n            ")]),t._v(" "),e("p",[e("span",{staticStyle:{color:"#e6a23c","padding-right":"10px"}},[t._v("订单备注：")]),t._v(" "),e("span",[t._v("\n                "+t._s(a.remark||"暂无")+"\n              ")]),t._v(" "),1==a.msgDetail?e("span",{staticClass:"msg-detail",on:{click:function(t){a.msgDetail=!1}}},[t._v("\n                收起\n              ")]):e("span",{staticClass:"msg-detail",on:{click:function(t){a.msgDetail=!0}}},[t._v("\n                展开\n              ")])]),t._v(" "),1==a.msgDetail?e("div",{staticClass:"goods-mesg"},t._l(a.detailVos,function(a,s){return e("div",{key:s,staticClass:"g-m-item"},[e("p",[t._v(t._s(a.productId)+" - "+t._s(a.skuName))]),t._v(" "),e("p",[e("span",{directives:[{name:"show",rawName:"v-show",value:a.dispPrice&&a.dispPrice!=a.payPrice&&0!=a.dispPrice&&"0.00"!=a.dispPrice,expression:"item.dispPrice && item.dispPrice != item.payPrice && item.dispPrice != 0 && item.dispPrice != '0.00'"}]},[t._v("\n                    ￥"+t._s(a.dispPrice||"0.00")+"\n                  ")])]),t._v(" "),e("p",[t._v("￥"+t._s(a.skuPrice||"0.00"))]),t._v(" "),e("p",[t._v("x"+t._s(a.skuQty||0))]),t._v(" "),e("p",[t._v("￥"+t._s(a.skuAmount||"0.00"))])])}),0):t._e(),t._v(" "),e("div",{staticClass:"goods-mesg"},[e("div",{staticClass:"gm-2p"},[e("p",[t._v("商品总计")]),t._v(" "),e("p",[t._v("￥"+t._s(a.orderAmount||"0.00"))])]),t._v(" "),e("div",{staticClass:"seller-d-a"},[e("p",{staticClass:"sda-tit"},[e("span",[t._v("优惠总金额")]),t._v(" "),e("span",[t._v("￥"+t._s(a.discountAmount||"0.00"))])])])])])]),t._v(" "),e("div",{staticClass:"lc-msg-2p1i last-2p1i"},[t._m(4,!0),t._v(" "),e("div",{staticClass:"msg-2p"},[e("p",{staticClass:"gm-2p"},[e("span",[t._v("本单预计收入")]),t._v(" "),e("span",{staticStyle:{"padding-right":"10px","font-weight":"bold"}},[t._v("￥"+t._s(a.orderAmount||"0.00"))])]),t._v(" "),e("p",[e("span",[t._v("本单顾客实际支付")]),t._v(" "),e("span",{staticStyle:{"padding-left":"10px"}},[t._v("￥"+t._s(a.payAmount||"0.00"))])])])])])}),0):e("div",{staticClass:"l-con-order bgcf"},[e("div",{staticClass:"no-order"},[t._v("\n        没有查询到您想要的数据\n      ")])]),t._v(" "),e("div",{staticClass:"r-con-order"},[e("div",[e("p",{staticClass:"rc-t"},[t._v("今日自提单合计")]),t._v(" "),e("p",{staticClass:"rc-p"},[t._v("订单数： "+t._s(t.tadayOrderTotal.orderCount||"0")+" 笔")]),t._v(" "),e("p",{staticClass:"rc-p"},[t._v("已自提： "+t._s(t.tadayOrderTotal.pickedCount||"0")+" 笔")]),t._v(" "),e("p",{staticClass:"rc-p"},[t._v("销售金额： "+t._s(t.tadayOrderTotal.totalOrderAmount||"0.00")+" 元")])]),t._v(" "),e("div",[e("p",{staticClass:"rc-t"},[t._v("明日自提单合计")]),t._v(" "),e("p",{staticClass:"rc-p"},[t._v("订单数： "+t._s(t.tomorrowOrderTotal.orderCount||"0")+" 笔")]),t._v(" "),e("p",{staticClass:"rc-p"},[t._v("商品数： "+t._s(t.tomorrowOrderTotal.productCount||"0")+" 个")]),t._v(" "),e("p",{staticClass:"rc-p"},[t._v("销售金额： "+t._s(t.tomorrowOrderTotal.totalAmount||"0.00")+" 元")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"icon-w"},[a("i",{staticClass:"fa fa-user-circle",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"icon-w"},[a("i",{staticClass:"fa fa-university",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"lc-msg-2p1i"},[a("div",{staticClass:"icon-w"},[a("i",{staticClass:"fa fa-motorcycle",attrs:{"aria-hidden":"true"}})]),this._v(" "),a("div",{staticClass:"msg-2p"},[a("p",[a("span",[this._v("自提订单无需配送")])]),this._v(" "),a("p",[this._v("等待顾客自提")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"icon-w"},[a("i",{staticClass:"fa fa-shopping-basket",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"icon-w"},[a("i",{staticClass:"fa fa-jpy",attrs:{"aria-hidden":"true"}})])}]};var _=e("VU/8")(v,m,!1,function(t){e("z5As")},null,null);a.default=_.exports},z5As:function(t,a){}});
//# sourceMappingURL=90.fc6a37fc0f5cdcbcdaba.js.map