webpackJsonp([29],{D2w8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),i=a.n(n),s=a("Gu7T"),o=a.n(s),l=a("WorT"),r=a("bzuE"),c={orderList:r.a.reqUrl+"/supplier/a/proxySale/list",orderDetail:r.a.reqUrl+"/supplier/a/proxySale/",goodsDetail:r.a.reqUrl+"/supplier/a/proxySale/detail",storeDetail:r.a.reqUrl+"/supplier/a/proxySale/storeDetail",goodsSaleSummary:r.a.reqUrl+"/supplier/a/proxySale/sale/summary"},d=a("t0/o"),m=a("oAV5"),h=a("8uth"),p={mixins:[l.a],data:function(){return{pageNum:1,pageSize:10,loading:!1,exportLoading:!1,total:0,tableData:[],columns:[{title:"供应商",dataIndex:"vendorName",ellipsis:!0,minWidth:130},{title:"区域",dataIndex:"regionName",minWidth:80},{title:"商品",dataIndex:"goodsName",ellipsis:!0,minWidth:130},{title:"单位",dataIndex:"saleUnit",minWidth:90},{title:"规格",dataIndex:"spec",minWidth:90},{title:"自提时间",dataIndex:"pickUpTime",minWidth:170},{title:"销量",dataIndex:"quantity",minWidth:80},{title:"销售额",dataIndex:"amount",minWidth:80},{title:"已核销",dataIndex:"completeQty",minWidth:80},{title:"已退货",dataIndex:"refundQty",minWidth:80},{title:"待核销",dataIndex:"awaitQty",minWidth:80}],searchContent:{vendorNos:[],startPayTime:Object(m.b)("yyyy-MM-dd",Date.parse(new Date))+" 00:00:00",endPayTime:Object(m.b)("yyyy-MM-dd",Date.parse(new Date))+" 23:59:59",pickUpTime:"",searchValue:"",regionCode:""},regionOptions:[],checkedList:[],exportConfig:{vendorName:"供应商",regionName:"区域",goodsName:"商品",saleUnit:"单位",spec:"规格",pickUpTime:"自提时间",quantity:"销量",amount:"销售额",completeQty:"已核销",refundQty:"已退货",awaitQty:"待核销"}}},created:function(){this.getRegionList()},mounted:function(){this.doSearchHandle(!0)},methods:{getRegionList:function(){var e=this;this.$http.get(d.a.userAreaStoreGroupList).then(function(t){if(t&&0===t.code){var a=t.data&&t.data.length?t.data.map(function(e){return{label:e.storeGroupName,value:e.storeGroupNo}}):[];e.regionOptions=a}}).catch(function(e){console.warn("获取区域商品信息：",e.message||"")})},changeSize:function(e){this.pageSize=e,this.doSearchHandle()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandle()},selectionChangeHandel:function(e){var t=e.selection;this.checkedList=[].concat(o()(t))},doSearchHandle:function(e){var t=this;this.checkedList=[],!0===e&&(this.pageNum=1),this.searchContent.startPayTime&&this.searchContent.endPayTime&&Object(m.a)(this.searchContent.startPayTime)>Object(m.a)(this.searchContent.endPayTime)?this.$tip.message("订单结束时间不能早于订单开始时间","warning"):(this.loading=!0,this.$http.post(c.goodsSaleSummary,i()({},this.searchContent,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(e){if(t.loading=!1,0===e.code)return t.tableData=e.data&&e.data.result&&e.data.result.length?e.data.result:[],void(t.total=e.data&&e.data.total?e.data.total:0);throw new Error(e.msg)}).catch(function(e){t.loading=!1,t.$tip.notify(e.message||"","error","系统提示")}))},doExortHandel:function(){var e=Object(m.i)(this.exportConfig,!1),t=Object(m.i)(this.exportConfig,!0);h.a.ExportJsonToExcel({header:e,filterVal:t,data:this.checkedList,filename:"商品销售汇总"})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"选择供应商",multiple:"","collapse-tags":"",size:"small"},model:{value:e.searchContent.vendorNos,callback:function(t){e.$set(e.searchContent,"vendorNos",t)},expression:"searchContent.vendorNos"}},e._l(e.vendors,function(e){return a("el-option",{key:e.vendorNo,attrs:{label:e.vendorName,value:e.vendorNo}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"区域"}},[a("el-select",{staticClass:"search-input",attrs:{placeholder:"选择区域","collapse-tags":"",size:"small"},model:{value:e.searchContent.regionCode,callback:function(t){e.$set(e.searchContent,"regionCode",t)},expression:"searchContent.regionCode"}},e._l(e.regionOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"商品编码或名称",clearable:""},model:{value:e.searchContent.searchValue,callback:function(t){e.$set(e.searchContent,"searchValue","string"==typeof t?t.trim():t)},expression:"searchContent.searchValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单开始时间"}},[a("el-date-picker",{staticClass:"search-input",attrs:{type:"datetime",placeholder:"订单开始时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.searchContent.startPayTime,callback:function(t){e.$set(e.searchContent,"startPayTime",t)},expression:"searchContent.startPayTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单结束时间"}},[a("el-date-picker",{staticClass:"search-input",attrs:{type:"datetime",placeholder:"订单结束时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",size:"small"},model:{value:e.searchContent.endPayTime,callback:function(t){e.$set(e.searchContent,"endPayTime",t)},expression:"searchContent.endPayTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始提货时间"}},[a("el-date-picker",{staticClass:"search-input",attrs:{type:"date",placeholder:"开始提货时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.searchContent.pickUpTime,callback:function(t){e.$set(e.searchContent,"pickUpTime",t)},expression:"searchContent.pickUpTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandle(!0)}}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{disabled:0===e.checkedList.length,size:"mini",loading:e.exportLoading},on:{click:e.doExortHandel}},[e._v("导出")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-wraper"},[a("bl-table",{attrs:{loading:e.loading,border:!1,selection:!0,dataSource:e.tableData,columns:e.columns},on:{"selection-change":e.selectionChangeHandel}}),e._v(" "),a("bl-pagination",{attrs:{showPagination:e.tableData.length>0,pageNum:e.pageNum,total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent}})],1)])},staticRenderFns:[]},y=a("VU/8")(p,u,!1,null,null,null);t.default=y.exports}});
//# sourceMappingURL=29.e872eadffa8b0e71cd6d.1615898974438.js.map