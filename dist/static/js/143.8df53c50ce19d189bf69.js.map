{"version":3,"sources":["webpack:///src/components/OrderMgt/SalesMap.vue","webpack:///./src/components/OrderMgt/SalesMap.vue?2ea3","webpack:///./src/components/OrderMgt/SalesMap.vue"],"names":["reqUrl","map","infoWindow","SalesMap","data","loading","defaultRange","utils","Date","parse","orderStartTime","orderEndTime","pickUpTime","businessType","openStatusRadioOpt","label","labelName","mounted","this","initMap","components","date-picker-range","methods","AMap","Map","resizeEnable","center","zoom","InfoWindow","offset","Pixel","doSearchHandel","_this2","_this","params","clearMap","$http","post","extends_default","then","res","code","Error","msg","length","forEach","item","iconPath","goodsCount","markerSet","Marker","icon","position","lng","lat","content","storeNo","storeName","orderCount","on","markClick","emit","target","setFitView","catch","e","$notify","error","title","message","setContent","open","getPosition","datePickerRangeChange","result","concat","toConsumableArray_default","OrderMgt_SalesMap","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","label-position","size","change","$event","model","value","callback","$$v","expression","_l","idx","key","_v","_s","format","type","_e","placeholder","value-format","click","src","alt","directives","name","rawName","id","tabindex","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/143.8df53c50ce19d189bf69.js","sourcesContent":["<style>\n  #mapContainerForSaleOrder {\n    height: 100vh;\n  }\n  .row-col-wrap {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    align-items: center;\n  }\n  .row-col-wrap img {\n    width: 32px;\n    height: 32px;\n  }\n  #mapContainerForSaleOrder .amap-icon img {\n    width: 48px !important;\n    height: 48px !important;\n  }\n  #mapContainerForSaleOrder .amap-info-outer>p{\n    font-size: 12px;\n    color: #222222;\n  }\n</style>\n\n<template>\n  <div>\n    <div class=\"search-form-wraper\">\n      <el-form label-position=\"top\">\n        <el-form-item>\n          <el-radio-group v-model=\"businessType\" size=\"small\" @change=\"doSearchHandel(true)\">\n            <el-radio-button :label=\"item.label\" v-for=\"(item, idx) in openStatusRadioOpt\" :key=\"idx\">{{item.labelName}}</el-radio-button>\n          </el-radio-group>\n        </el-form-item>\n\n        <el-form-item label=\"下单时间\" v-if=\"businessType === 1\">\n          <date-picker-range \n            :defaultRange=\"defaultRange\"\n            format=\"yyyy-MM-dd\"\n            type=\"daterange\"\n            @datePickerRangeChange=\"datePickerRangeChange\">\n          </date-picker-range>\n        </el-form-item>\n\n        <!-- <el-form-item label=\"下单开始日期\" v-if=\"businessType === 1\">\n          <el-date-picker class=\"search-input\" v-model=\"orderStartTime\" type=\"date\" placeholder=\"下单开始日期\"\n            format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" size=\"small\" @change=\"doSearchHandel(true)\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"下单结束日期\" v-if=\"businessType === 1\">\n          <el-date-picker class=\"search-input\" v-model=\"orderEndTime\" type=\"date\" placeholder=\"下单结束日期\"\n            format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" size=\"small\" @change=\"doSearchHandel(true)\">\n          </el-date-picker>\n        </el-form-item> -->\n\n        <el-form-item label=\"提货日期\" v-if=\"businessType === 2\">\n          <el-date-picker class=\"search-input\" v-model=\"pickUpTime\" type=\"date\" placeholder=\"提货日期\"\n            format=\"yyyy-MM-dd\" value-format=\"yyyy-MM-dd\" size=\"small\" @change=\"doSearchHandel(true)\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"doSearchHandel(true)\" size=\"mini\">搜索</el-button>\n        </el-form-item>\n        <div class=\"row-col-wrap\">\n          门店销量汇总：\n          <img src=\"/shop/static/map/91-100.png\" alt=\"\"> 100以上&nbsp;&nbsp;&nbsp;&nbsp;\n          <img src=\"/shop/static/map/61-90.png\" alt=\"\"> 50 - 100&nbsp;&nbsp;&nbsp;&nbsp;\n          <img src=\"/shop/static/map/31-60.png\" alt=\"\"> 25 - 49&nbsp;&nbsp;&nbsp;&nbsp;\n          <img src=\"/shop/static/map/1-30.png\" alt=\"\"> 10 - 24&nbsp;&nbsp;&nbsp;&nbsp;\n          <img src=\"/shop/static/map/0.png\" alt=\"\"> 10以下\n        </div>\n      </el-form>\n    </div>\n    <div class=\"table-wraper\" v-loading=\"loading\">\n      <div id=\"mapContainerForSaleOrder\" tabindex=\"0\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import * as utils from '@/utils/utils'\n  import DatePickerRange from '@/components/Common/DatePickerRange'\n  const reqUrl = {\n    // 获取门店列表接口\n    storePreSaleMap: '/plateform/a/order/storePreSaleMap'\n  }\n  let map;\n  let infoWindow;\n  export default {\n    data() {\n      return {\n        loading: false,\n        defaultRange: [`${utils.timestampToTimeNoHMS(Date.parse(new Date()))}`, `${utils.timestampToTimeNoHMS(Date.parse(new Date()))}`],\n        orderStartTime: utils.timestampToTimeNoHMS(Date.parse(new Date())), // 下单开始日期\n        orderEndTime: utils.timestampToTimeNoHMS(Date.parse(new Date())), // 下单结束日期\n        pickUpTime: utils.timestampToTimeNoHMS(Date.parse(new Date())), // 提货日\n        businessType: 1,\n        openStatusRadioOpt: [\n          {\n            label: 1,\n            labelName: '按下单日期'\n          },\n          {\n            label: 2,\n            labelName: '按提货日期'\n          }\n        ]\n\n      }\n    },\n    mounted() {\n      this.initMap()\n    },\n    components: {\n      \"date-picker-range\": DatePickerRange\n    },\n    methods: {\n      /**\n       * [init 地图初始化]\n       * @return {[type]} [description]\n       */\n      initMap() {\n        let _this = this\n        map = new AMap.Map('mapContainerForSaleOrder', {\n          resizeEnable: true,\n          center: [116.397428, 36.90923],\n          zoom: 12\n        })\n        infoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, -30)})\n        this.doSearchHandel(true)\n      },\n      /**\n       * @description: 查询数据\n       * @param {type} \n       * @return: \n       */\n      doSearchHandel() {\n        let _this = this\n        let params = {\n          businessType: this.businessType\n        }\n        if(this.businessType === 1) {\n          // let beginTimeVal = this.orderStartTime ? new Date(this.orderStartTime.replace(/-/g, '/')).getTime() : 0\n          // let endTimeVal = this.orderEndTime ? new Date(this.orderEndTime.replace(/-/g, '/')).getTime() : 0\n          // if (this.orderStartTime && this.orderEndTime && !isNaN(beginTimeVal) && !isNaN(endTimeVal)) {\n          //   if (beginTimeVal > endTimeVal) {\n          //     this.$message(\"下单结束日期不能早于开始日期\")\n          //     return\n          //   }\n          // }\n          params.orderStartTime = `${this.orderStartTime} 00:00:00`\n          params.orderEndTime = `${this.orderEndTime} 23:59:59`\n        }else if(this.businessType === 2) {\n          params.pickUpTime = this.pickUpTime\n        }\n        map.clearMap();\n        this.loading = true\n        this.$http.post(reqUrl.storePreSaleMap, {...params}).then(res => {\n          this.loading = false\n          if (res.code === 0) {\n            if(res.data && res.data.length) {\n              res.data.forEach(item => {\n                let iconPath = ''\n                if(item.goodsCount >= 100) {\n                  iconPath = '/shop/static/map/91-100.png'\n                }else if(item.goodsCount >= 50) {\n                  iconPath = '/shop/static/map/61-90.png'\n                }else if(item.goodsCount >= 25) {\n                  iconPath = '/shop/static/map/31-60.png'\n                }else if(item.goodsCount >= 10) {\n                  iconPath = '/shop/static/map/1-30.png'\n                }else {\n                  iconPath = '/shop/static/map/0.png'\n                }\n                let markerSet = new AMap.Marker({\n                  map: map,\n                  icon: iconPath,\n                  position: [item.lng, item.lat],\n                  offset: new AMap.Pixel(-13, -30)\n                })\n                markerSet.content = \"<p>\"+item.storeNo+\"-\"+item.storeName+\"</p><p>商品销量汇总：\"+item.goodsCount+\"份</p><p>订单数量:\"+item.orderCount+\"笔</p>\";\n                markerSet.on('click', _this.markClick);\n                markerSet.emit('click', {target: markerSet});\n              })\n              map.setFitView();\n            }\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          map.clearMap();\n          this.loading = false\n          this.$notify.error({\n            title: '提示',\n            message: e.message\n          })\n        })\n      },\n      /**\n       * @description: 点击地图上浮层中的点\n       * @param {type} \n       * @return: \n       */\n      markClick(e) {\n        infoWindow.setContent(e.target.content);\n        infoWindow.open(map, e.target.getPosition());\n      },\n      /**\n       * @description: 下单时间范围发生变化\n       * @param {type} \n       * @return: \n       */\n      datePickerRangeChange(result) {\n        this.defaultRange = result ? [...result] : result\n        this.orderStartTime = result ? result[0] : ''\n        this.orderEndTime = result ? result[1] : ''\n        this.doSearchHandel(true)\n      }\n\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/OrderMgt/SalesMap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"search-form-wraper\"},[_c('el-form',{attrs:{\"label-position\":\"top\"}},[_c('el-form-item',[_c('el-radio-group',{attrs:{\"size\":\"small\"},on:{\"change\":function($event){return _vm.doSearchHandel(true)}},model:{value:(_vm.businessType),callback:function ($$v) {_vm.businessType=$$v},expression:\"businessType\"}},_vm._l((_vm.openStatusRadioOpt),function(item,idx){return _c('el-radio-button',{key:idx,attrs:{\"label\":item.label}},[_vm._v(_vm._s(item.labelName))])}),1)],1),_vm._v(\" \"),(_vm.businessType === 1)?_c('el-form-item',{attrs:{\"label\":\"下单时间\"}},[_c('date-picker-range',{attrs:{\"defaultRange\":_vm.defaultRange,\"format\":\"yyyy-MM-dd\",\"type\":\"daterange\"},on:{\"datePickerRangeChange\":_vm.datePickerRangeChange}})],1):_vm._e(),_vm._v(\" \"),(_vm.businessType === 2)?_c('el-form-item',{attrs:{\"label\":\"提货日期\"}},[_c('el-date-picker',{staticClass:\"search-input\",attrs:{\"type\":\"date\",\"placeholder\":\"提货日期\",\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"size\":\"small\"},on:{\"change\":function($event){return _vm.doSearchHandel(true)}},model:{value:(_vm.pickUpTime),callback:function ($$v) {_vm.pickUpTime=$$v},expression:\"pickUpTime\"}})],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.doSearchHandel(true)}}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"row-col-wrap\"},[_vm._v(\"\\n        门店销量汇总：\\n        \"),_c('img',{attrs:{\"src\":\"/shop/static/map/91-100.png\",\"alt\":\"\"}}),_vm._v(\" 100以上    \\n        \"),_c('img',{attrs:{\"src\":\"/shop/static/map/61-90.png\",\"alt\":\"\"}}),_vm._v(\" 50 - 100    \\n        \"),_c('img',{attrs:{\"src\":\"/shop/static/map/31-60.png\",\"alt\":\"\"}}),_vm._v(\" 25 - 49    \\n        \"),_c('img',{attrs:{\"src\":\"/shop/static/map/1-30.png\",\"alt\":\"\"}}),_vm._v(\" 10 - 24    \\n        \"),_c('img',{attrs:{\"src\":\"/shop/static/map/0.png\",\"alt\":\"\"}}),_vm._v(\" 10以下\\n      \")])],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"table-wraper\"},[_c('div',{attrs:{\"id\":\"mapContainerForSaleOrder\",\"tabindex\":\"0\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-02dd2b5e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/OrderMgt/SalesMap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-02dd2b5e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SalesMap.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SalesMap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SalesMap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-02dd2b5e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SalesMap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/OrderMgt/SalesMap.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}