webpackJsonp([147],{NLlG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),i=a.n(r),o=a("Gu7T"),n=a.n(o),l=a("bzuE"),s=a("ssT3"),c=(a("oAV5"),a("XfvZ")),u=a("32kd"),p=a("nFmu"),d={data:function(){return{loading:!1,pageNum:1,pageSize:20,total:0,pageSizes:l.a.pageSizes20,tableData:[],searchContent:{DIFFCITY:!0,regionCode:s.a.get("regionCode")||"",cityId:"",storeLeaderId:"",storeGroupTypeNo:"",storeGroupNo:"",activityStartTime:"",activityEndTime:"",defaultRange:[],activityStatus:"",pickUpTimeTemp:"",id:"",activityType:""},storeLeaderOptions:[],activityStatusOptions:[{label:"全部",value:""},{label:"未开始",value:2},{label:"已发布",value:1},{label:"已终止",value:5},{label:"进行中",value:3},{label:"已结束",value:4}],activityTypeOptions:[{label:"全部",value:""},{label:"及时达群接龙",value:2},{label:"预售群接龙",value:1}]}},components:{"date-picker-range":c.a,"region-city-store":u.a},mounted:function(){this.getStoreLeaderList();var e=s.a.get("searchContent");this.$route.meta.keepAlive&&e&&(this.searchContent=e.searchContent,this.pageNum=e.pageNum,s.a.remove("searchContent")),this.doSearchHandel()},methods:{StoreGroupChange:function(e){this.searchContent.regionCode=e.regionCode,this.searchContent.cityId=e.cityId,this.searchContent.erpStoreNo=e.storeNo,this.searchContent.storeGroupTypeNo=e.storeGroupTypeNoList[0],this.searchContent.storeGroupNo=e.storeGroupTypeNoList[1],this.doSearchHandel(!0)},datePickerRangeChange:function(e){this.searchContent.defaultRange=e?[].concat(n()(e)):e,this.searchContent.activityStartTime=e?e[0]:"",this.searchContent.activityEndTime=e?e[1]:"",this.doSearchHandel(!0)},getStoreLeaderList:function(){var e=this;this.$http.post(p.a.getStoreLeaderList,{pageNum:1,pageSize:-1,DIFFCITY:!0}).then(function(t){if(0!==t.code)throw new Error(t.msg);var a=t.data&&t.data.result&&t.data.result.length?t.data.result:[];e.storeLeaderOptions=a.filter(function(e){return 2===e.applyStatus&&0===e.userStatus}).map(function(e){return{id:e.id,applyStatus:e.applyStatus,virtualStoreName:e.virtualStoreName,userName:e.userName,actualStoreNo:e.actualStoreNo,value:e.id,label:e.id+"_"+e.virtualStoreName+"_"+e.userName}})}).catch(function(e){console.log("提示(获取所属团长店信息):",e.message)})},changeSize:function(e){this.pageSize=e,this.doSearchHandel()},changeCurrent:function(e){this.pageNum=e,this.doSearchHandel()},doSearchHandel:function(e){var t=this;!0===e&&(this.pageNum=1),this.loading=!0;var a=i()({},this.searchContent,{pickUpTime:this.searchContent.pickUpTimeTemp?this.searchContent.pickUpTimeTemp+" 23:59:59":""});this.$http.post(p.a.listShopSolitaireActivity,i()({},a,{pageNum:this.pageNum,pageSize:this.pageSize})).then(function(e){if(t.loading=!1,0!==e.code)throw new Error(e.msg);e.data?(t.tableData=e.data&&e.data.result&&e.data.result.length?e.data.result:[],t.total=e.data.total):(t.total=0,t.tableData=[])}).catch(function(e){t.loading=!1,t.$notify.error({title:"提示",message:e.message})})},showItem:function(e){var t={pageNum:this.pageNum,searchContent:this.searchContent};s.a.set("searchContent",t),e.storeLeaderId?this.$router.push("/solitaire_order/detail/"+e.id+"?storeNo="+e.storeNo+"&storeName="+e.storeName+"&storeLeaderId="+e.storeLeaderId+"&virtualStoreName="+e.virtualStoreName+"&userName="+e.userName):this.$router.push("/solitaire_order/detail/"+e.id+"?storeNo="+e.storeNo+"&storeName="+e.storeName)},activityStatusFormatter:function(e,t,a,r){var i=this.activityStatusOptions.filter(function(e){return e.value===a})[0];return i?i.label:a},activityTypeFormatter:function(e,t,a,r){var i=this.activityTypeOptions.filter(function(e){return e.value===a})[0];return i?i.label:a},showOrderResult:function(e){var t={from:"solitaire",pageNum:this.pageNum,searchContent:this.searchContent};s.a.set("searchContent",t);var a="/search_result?from=solitaire&solitaireId="+e.id;this.$router.push(a)}},beforeRouteLeave:function(e,t,a){t.meta.keepAlive=!1,a()}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-form-wraper"},[a("el-form",{attrs:{model:e.searchContent,"label-position":"top"}},[a("region-city-store",{on:{StoreGroupChange:e.StoreGroupChange}}),e._v(" "),a("el-form-item",{attrs:{label:"群接龙类型"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择类型",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.activityType,callback:function(t){e.$set(e.searchContent,"activityType",t)},expression:"searchContent.activityType"}},e._l(e.activityTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属团长店"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择所属团长店",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.storeLeaderId,callback:function(t){e.$set(e.searchContent,"storeLeaderId",t)},expression:"searchContent.storeLeaderId"}},e._l(e.storeLeaderOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接龙活动ID"}},[a("el-input",{staticClass:"search-input",attrs:{type:"number",controls:!1,placeholder:"请输入接龙活动ID",size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearchHandel(!0)}},model:{value:e.searchContent.id,callback:function(t){e.$set(e.searchContent,"id","string"==typeof t?t.trim():t)},expression:"searchContent.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接龙时间"}},[a("date-picker-range",{attrs:{defaultRange:e.searchContent.defaultRange,clearable:!1,editable:!1,pickerOptions:{}},on:{datePickerRangeChange:e.datePickerRangeChange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"自提时间"}},[a("el-date-picker",{staticClass:"search-input",attrs:{type:"date",placeholder:"请选择自提时间",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.pickUpTimeTemp,callback:function(t){e.$set(e.searchContent,"pickUpTimeTemp",t)},expression:"searchContent.pickUpTimeTemp"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"search-input",attrs:{filterable:"",placeholder:"请选择状态",clearable:"",size:"small"},on:{change:function(t){return e.doSearchHandel(!0)}},model:{value:e.searchContent.activityStatus,callback:function(t){e.$set(e.searchContent,"activityStatus",t)},expression:"searchContent.activityStatus"}},e._l(e.activityStatusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.doSearchHandel(!0)}}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table-wraper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":"没有查询到您想要的数据",size:"small"}},[a("el-table-column",{attrs:{"min-width":"80px",prop:"cityName",label:"城市"}}),e._v(" "),a("el-table-column",{attrs:{label:"门店","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("p",[e._v(e._s(t.row.storeNo)+"-"+e._s(t.row.storeName))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"140px",label:"团长店"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.storeLeaderId?a("p",[e._v(e._s(t.row.storeLeaderId)+"_"+e._s(t.row.virtualStoreName)+"_"+e._s(t.row.userName))]):a("p",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"80px",prop:"id",label:"群接龙ID"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"130px",prop:"activityName",label:"群接龙名称"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"170px",label:"群接龙时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("p",[e._v(e._s(t.row.activityStartTime))]),e._v(" "),a("p",[e._v("至")]),e._v(" "),a("p",[e._v(e._s(t.row.activityEndTime))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"170px",prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110px",prop:"activityType",label:"群接龙类型",formatter:e.activityTypeFormatter}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"110px",label:"提货日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[t.row.pickUpTime?a("span",[e._v(e._s(t.row.pickUpTime.substr(0,10)))]):a("span",[e._v("-")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{"min-width":"80px",prop:"goodsNum",label:"商品数"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90px",prop:"solitairePersonNum",label:"接龙人数"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90px",prop:"totalOrderAmount",label:"订单金额"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"90px",prop:"activityStatus",label:"状态",formatter:e.activityStatusFormatter}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("p",[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.showItem(t.row)}}},[e._v("详情")])],1),e._v(" "),a("p",[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-view"},on:{click:function(a){return e.showOrderResult(t.row)}}},[e._v("查看订单")])],1)])]}}])})],1),e._v(" "),e.total>0?a("el-pagination",{staticClass:"tc mt20",attrs:{background:"","current-page":e.pageNum,"page-sizes":e.pageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changeCurrent,"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t}}}):e._e()],1)])},staticRenderFns:[]},m=a("VU/8")(d,h,!1,null,null,null);t.default=m.exports},nFmu:function(e,t,a){"use strict";t.a={getStoreLeaderList:"/foundation/p/apply/leader/queryList",listShopSolitaireActivity:"/plateform/a/solitaire/listShopSolitaireActivity",viewShopSolitaireActivity:"/plateform/a/solitaire/viewShopSolitaireActivity"}}});
//# sourceMappingURL=147.9839e20a30af9c7ec1cb.js.map