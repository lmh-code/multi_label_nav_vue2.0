webpackJsonp([58],{"DZ+P":function(t,e){},uIwa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),l=a.n(i),r=a("oAV5"),o="/plateform/a/activityRule/edit",s={data:function(){return{isDisabled:!1,addParamMesg:{regionCode:"",regionName:"",activityId:"",activityType:"",activityTypeName:"",activityName:"",activityStartDate:"",activityEndDate:"",activityCode:"",activityStoreList:[],platCityGoodsInfos:[],deliveryType:0,pickSelf:0},activityStoresCheckedList:[],activityGoodsCheckedList:[],checkedList:[],discount:"",canDelivery:!1,deliveryTypeTemp:0,canPickSelf:!1}},created:function(){var t=this.$route.params.activityId;this.addParamMesg.activityId=t,this.getDetail()},mounted:function(){},methods:{getDetail:function(){var t=this,e=this.addParamMesg.activityId||"";r.r(),this.$http.post(o,{activityId:e}).then(function(e){if(r.c(),0!==e.code)throw new Error(e.msg);if(e.data){var a=e.data;if(t.addParamMesg.activityId=a.id,t.addParamMesg.regionCode=a.regionCode||"",t.addParamMesg.regionName=a.regionName||"",t.addParamMesg.activityType=a.activityType||"",t.addParamMesg.activityTypeName=a.activityTypeName||"",t.addParamMesg.activityName=a.activityName||"",t.addParamMesg.activityStartDate=a.activityStartDate||"",t.addParamMesg.activityEndDate=a.activityEndDate||"",t.addParamMesg.activityCode=a.activityCode||"",t.addParamMesg.limitDelivery=a.limitDelivery?a.limitDelivery:0,1===a.pickSelf?t.canPickSelf=!0:t.canPickSelf=!1,0===a.deliveryType?(t.canDelivery=!1,t.deliveryTypeTemp=1):1===a.deliveryType?(t.canDelivery=!0,t.deliveryTypeTemp=1):2===a.deliveryType&&(t.canDelivery=!0,t.deliveryTypeTemp=2),a.storeVos&&a.storeVos.length&&(t.activityStoresCheckedList=a.storeVos),a.platCityGoodsVos&&a.platCityGoodsVos.length){var i=!0,o=!1,s=void 0;try{for(var d,c=l()(a.platCityGoodsVos);!(i=(d=c.next()).done);i=!0){var n=d.value;n.copyUrl="pages/product/ptdetail?id="+n.platformCityGoodsId+"&type=5"}}catch(t){o=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}t.activityGoodsCheckedList=a.platCityGoodsVos}}}).catch(function(e){r.c(),t.$notify.error({title:"提示",message:e.message})})},limitGroupTypeFormater:function(t,e,a){return 0===a?"全部":1===a?"新会员":2===a?"老会员":void 0},onCopySuc:function(){this.$message.success("链接已复制至剪切板，仅限微信公众号中使用")},onCopyError:function(){this.$message.error("复制链接失败,请手动复制")},doCancelHandel:function(){this.$router.push("/store_act")}},beforeRouteLeave:function(t,e,a){t.meta.keepAlive=!0,a()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"add-form-wraper"},[a("el-form",{ref:"form",attrs:{model:t.addParamMesg,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"活动类型"}},[a("p",{staticStyle:{color:"#222","font-size":"16px","font-weight":"bold"}},[t._v(t._s(t.addParamMesg.activityTypeName))])]),t._v(" "),a("el-form-item",{attrs:{label:"选择区域"}},[a("p",[t._v(t._s(t.addParamMesg.regionName))])]),t._v(" "),a("el-form-item",{attrs:{label:"活动编码"}},[a("p",[t._v(t._s(t.addParamMesg.activityCode))])]),t._v(" "),a("el-form-item",{attrs:{label:"活动名称"}},[a("p",[t._v(t._s(t.addParamMesg.activityName))])]),t._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[t._v("\n        "+t._s(t.addParamMesg.activityStartDate)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"结束时间"}},[t._v("\n        "+t._s(t.addParamMesg.activityEndDate)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"配送方式"}},[a("div",[a("el-checkbox",{attrs:{disabled:""},model:{value:t.canDelivery,callback:function(e){t.canDelivery=e},expression:"canDelivery"}},[t._v("支持配送")]),t._v(" "),t.canDelivery?a("el-radio-group",{staticStyle:{"margin-left":"30px"},attrs:{disabled:""},model:{value:t.deliveryTypeTemp,callback:function(e){t.deliveryTypeTemp=e},expression:"deliveryTypeTemp"}},[a("el-radio",{attrs:{label:1}},[t._v("支持外卖配送")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("支持快递配送")])],1):t._e()],1),t._v(" "),a("div",[a("el-checkbox",{attrs:{disabled:""},model:{value:t.canPickSelf,callback:function(e){t.canPickSelf=e},expression:"canPickSelf"}},[t._v("支持自提")])],1)]),t._v(" "),a("el-form-item",{attrs:{label:"参与门店"}},[t.activityStoresCheckedList.length>0?a("div",{staticClass:"store-check-wraper"},[a("el-table",{staticClass:"fixed-height",attrs:{data:t.activityStoresCheckedList,"max-height":"300",size:"small"}},[a("el-table-column",{attrs:{"min-width":"226px",label:"门店编码/名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("\n                  "+t._s(e.row.erpStoreNo)+"_"+t._s(e.row.erpStoreName)+"\n                ")])]}}],null,!1,3945522565)}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100",prop:"saleTypeName",label:"门店类型"}})],1)],1):t._e()]),t._v(" "),a("el-form-item",{attrs:{label:"参与商品"}},[t.activityGoodsCheckedList.length>0?a("div",[a("el-table",{staticClass:"fixed-height",staticStyle:{width:"100%"},attrs:{data:t.activityGoodsCheckedList,"empty-text":"暂无选中任何商品","max-height":"400",size:"small"}},[a("el-table-column",{attrs:{"min-width":"220px",label:"商品信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"ll-p-m-w"},[a("div",{staticClass:"ll-img-w"},[e.row.imgUrl&&""!=e.row.imgUrl?a("img",{attrs:{src:e.row.imgUrl,alt:"",onerror:"onerror=null;src='/shop/static/img_error.png'"}}):a("img",{attrs:{src:"/shop/static/img_error.png",alt:""}})]),t._v(" "),a("div",{staticClass:"ll-p-m-c-r"},[a("div",[t._v("\n                      "+t._s(e.row.goodsName||"-")+"\n                    ")]),t._v(" "),a("div",{staticClass:"ll-erp-p-no"},[t._v("SKU编码："+t._s(e.row.goodsNo||"--"))]),t._v(" "),a("div",{staticClass:"ll-erp-p-no"},[t._v("商品ID："+t._s(e.row.id))])])])]}}],null,!1,2972995806)}),t._v(" "),a("el-table-column",{attrs:{"min-width":"100px",prop:"spec",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px",prop:"activityGoodsName",label:"活动商品名称"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"110px",prop:"limitGroupType",label:"拼团限制",formatter:t.limitGroupTypeFormater}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"90px",prop:"price",label:"零售价"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"110px",prop:"groupPrice",label:"拼团价"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"110px",prop:"groupCount",label:"成团人数"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"150px",prop:"limitGoodsCount",label:"限购数量(为空不限)"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"110px",prop:"curStock",label:"拼团库存"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"120px",prop:"activityTimes",label:"成团时长(分钟)"}}),t._v(" "),a("el-table-column",{attrs:{"min-width":"110px",prop:"sortNum",label:"排序权重"}})],1),t._v(" "),a("div",[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("注意：权重排序，先创建的活动商品在前；剩余的按前端规则走。\n          ")])],1):t._e()]),t._v(" "),a("hr",{staticClass:"s-slip-tb"}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:t.doCancelHandel}},[t._v("返回")])],1)],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(s,d,!1,function(t){a("DZ+P")},null,null);e.default=c.exports}});
//# sourceMappingURL=58.2825045f3a577cdc6121.js.map