{"version":3,"sources":["webpack:///src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue","webpack:///./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue?d00d","webpack:///./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue","webpack:///src/module/views/AgentCamp/SaleMgt/Edit.vue","webpack:///./src/module/views/AgentCamp/SaleMgt/Edit.vue?aa7a","webpack:///./src/module/views/AgentCamp/SaleMgt/Edit.vue","webpack:///./src/module/mixin/getRegions.js"],"names":["ChooseGoods","data","title","visible","loading","pageNum","pageSize","total","searchContent","vendorNo","goodsNo","goodsName","tradeModeId","columns","dataIndex","minWidth","tableData","checkedList","watch","searchContent.vendorNo","newVal","oldVal","this","doSearchHandle","methods","setDefaultMsg","params","defaultChecked","length","concat","toConsumableArray_default","changeSize","value","changeCurrent","firstPage","_this","$http","post","common","queryContractGoods","extends_default","then","res","code","result","Error","msg","catch","e","utils","openNotification","message","selectHandel","_ref","selection","row","includes","push","index","findIndex","item","splice","selectAllHandel","_ref2","_this2","forEach","i","j","confirm","$emit","SaleMgt_ChooseGoods","render","_vm","_h","$createElement","_c","_self","attrs","close-on-click-modal","close-on-press-escape","show-close","width","on","update:visible","$event","staticClass","model","label-position","nativeOn","submit","preventDefault","placeholder","size","clearable","keyup","type","indexOf","_k","keyCode","key","callback","$$v","$set","trim","expression","_v","click","border","dataSource","maxHeight","uniqueStr","select","select-all","showPagination","size-change","current-change","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","Edit","mixins","getVendors","getRegions","options","components","timeValidator","rule","addParamMsg","startTime","endTime","Object","quoteNo","isDisabled","vendorName","Date","getTime","goods","regionNos","regions","status","rules","required","validator","trigger","checkedGoodsList","ellipsis","input","showInput","created","$route","id","optionColumn","fixed","operation","label","icon","clickFunc","deleteHandel","mounted","getDetailMsg","$loading","show","saleMgtUrl","getQuoteDetail","hide","orderMsg","goodsListTemp","barCode","barcode","erpGoodsNo","name","saleUnitName","unit","regionCode","regionName","err","$tip","notify","showAddGoodsDialog","_this3","$nextTick","$refs","chooseGoods","confirmHandel","filter","doSaveHandel","_this4","ruleForm","validate","valid","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","showPrice","parseFloat","constant","salePriceReg","test","salePrice","qty","parseInt","numReg","return","filterVendorMsg","vendors","regionsList","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","storeGroupNo","map","storeGroupName","addOrUpdateQuote","editSuccessHandel","closePage","vendorNoChange","doCancelHandel","SaleMgt_Edit","ref","label-width","prop","disabled","change","_l","format","value-format","multiple","_e","$store","dispatch","computed","mapGetters"],"mappings":"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","file":"static/js/16.7897c2d6263267fa21aa.1615898974438.js","sourcesContent":["<template>\n  <el-dialog \n    :close-on-click-modal = \"false\"\n    :close-on-press-escape = \"false\"\n    :show-close=\"false\"\n    :title=\"title\" \n    :visible.sync=\"visible\" \n    width='700px'>\n    <div class=\"search-form-wraper c-g-sfw\">\n      <el-form \n        :model=\"searchContent\" \n        label-position=\"top\" \n        @submit.native.prevent>\n        <el-form-item>\n          <el-input \n            class=\"search-input\"\n            v-model.trim=\"searchContent.goodsNo\" \n            placeholder=\"输入商品编码\" \n            size=\"small\" \n            @keyup.enter.native=\"doSearchHandle(true)\" \n            clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-input \n            class=\"search-input\" \n            v-model.trim=\"searchContent.goodsName\" \n            placeholder=\"输入商品名称\" \n            size=\"small\" \n            @keyup.enter.native=\"doSearchHandle(true)\" \n            clearable></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"doSearchHandle(true)\" size=\"mini\">搜索</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div>\n      <bl-table\n        :loading=\"loading\"\n        :border=\"false\"\n        :selection=\"true\"\n        :dataSource=\"tableData\"\n        :columns=\"columns\"\n        :maxHeight=\"300\"\n        :defaultChecked=\"checkedList\"\n        uniqueStr=\"goodsNo\"\n        @select=\"selectHandel\"\n        @select-all=\"selectAllHandel\"/>\n      <bl-pagination\n        :showPagination=\"tableData.length > 0\"\n        :pageNum=\"pageNum\"\n        :total=\"total\"\n        @size-change=\"changeSize\"\n        @current-change=\"changeCurrent\"/>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\" size=\"mini\">取消</el-button>\n      <el-button type=\"primary\" @click=\"confirm\" size=\"mini\">确定</el-button>\n    </div>\n  </el-dialog>\n</template>\n<script>\nimport commonUrl from '@/module/api/common'\nexport default {\n  data() {\n    return {\n      title: '',\n      visible: false,\n      loading: false,\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      searchContent: {\n        vendorNo: '',\n        goodsNo: '',\n        goodsName: '',\n        tradeModeId: 9\n      },\n      columns: [\n        {\n          title: '商品条码',\n          dataIndex: 'barCode',\n          minWidth: 120,\n        },\n        {\n          title: '商品编码',\n          dataIndex: 'goodsNo',\n          minWidth: 100,\n        },\n        {\n          title: '商品名称',\n          dataIndex: 'name',\n          minWidth: 120,\n        },\n        {\n          title: '单位',\n          dataIndex: 'saleUnitName',\n          minWidth: 80,\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          minWidth: 90,\n        },\n      ],\n      tableData: [],\n      checkedList: []\n    }\n  },\n  watch: {\n    'searchContent.vendorNo'(newVal, oldVal) {\n      if(newVal !== oldVal) {\n        this.doSearchHandle(true)\n      }\n    }\n  },\n  methods: {\n    setDefaultMsg(params) {\n      this.title = params.title || ''\n      this.searchContent.vendorNo = params.vendorNo || ''\n      this.checkedList = params.defaultChecked && params.defaultChecked.length ? [...params.defaultChecked] : []\n      this.visible = true\n    },\n    changeSize(value) {\n      this.pageSize = value\n      this.doSearchHandle()\n    },\n    changeCurrent(value) {\n      this.pageNum = value\n      this.doSearchHandle()\n    },\n    doSearchHandle(firstPage) {\n      this.loading = true\n      this.$http.post(commonUrl.queryContractGoods, {...this.searchContent, pageNum: this.pageNum, pageSize: this.pageSize}).then(res => {\n        this.loading = false\n        if(res.code === 0) {\n          this.tableData = res.data && res.data.result && res.data.result.length ? res.data.result : []\n          this.total = res.data && res.data.total ? res.data.total : 0\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(e => {\n        this.loading = false\n        utils.openNotification('error', '系统提示', e.message)\n      })\n    },\n    selectHandel({selection, row}) {\n      if(selection.includes(row)) {\n        this.checkedList.push(row)\n      }else {\n        const index = this.checkedList.findIndex(item => {\n          return item.goodsNo === row.goodsNo\n        })\n        this.checkedList.splice(index, 1)\n      }\n    },\n    selectAllHandel({selection}) {\n      if(selection.length) {\n        // 全选\n        this.tableData.forEach(i => {\n          const index = this.checkedList.findIndex(j => {\n            return j.goodsNo === i.goodsNo\n          })\n          if(index === -1) {\n            this.checkedList.push(i)\n          }\n        })\n      }else {\n        // 全不选\n        this.tableData.forEach(i => {\n          const index = this.checkedList.findIndex(j => {\n            return j.goodsNo === i.goodsNo\n          })\n          if(index !== -1) {\n            this.checkedList.splice(index, 1)\n          }\n        })\n      }\n    },\n    confirm() {\n      this.visible = false\n      this.$emit(\"confirm\", this.checkedList)\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"show-close\":false,\"title\":_vm.title,\"visible\":_vm.visible,\"width\":\"700px\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',{staticClass:\"search-form-wraper c-g-sfw\"},[_c('el-form',{attrs:{\"model\":_vm.searchContent,\"label-position\":\"top\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"输入商品编码\",\"size\":\"small\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.doSearchHandle(true)}},model:{value:(_vm.searchContent.goodsNo),callback:function ($$v) {_vm.$set(_vm.searchContent, \"goodsNo\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.goodsNo\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"输入商品名称\",\"size\":\"small\",\"clearable\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.doSearchHandle(true)}},model:{value:(_vm.searchContent.goodsName),callback:function ($$v) {_vm.$set(_vm.searchContent, \"goodsName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchContent.goodsName\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.doSearchHandle(true)}}},[_vm._v(\"搜索\")])],1)],1)],1),_vm._v(\" \"),_c('div',[_c('bl-table',{attrs:{\"loading\":_vm.loading,\"border\":false,\"selection\":true,\"dataSource\":_vm.tableData,\"columns\":_vm.columns,\"maxHeight\":300,\"defaultChecked\":_vm.checkedList,\"uniqueStr\":\"goodsNo\"},on:{\"select\":_vm.selectHandel,\"select-all\":_vm.selectAllHandel}}),_vm._v(\" \"),_c('bl-pagination',{attrs:{\"showPagination\":_vm.tableData.length > 0,\"pageNum\":_vm.pageNum,\"total\":_vm.total},on:{\"size-change\":_vm.changeSize,\"current-change\":_vm.changeCurrent}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.confirm}},[_vm._v(\"确定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-72a51610\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChooseGoods.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChooseGoods.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-72a51610\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChooseGoods.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/AgentCamp/SaleMgt/ChooseGoods.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"add-form-wraper\">\n    <el-form \n      :model=\"addParamMsg\" \n      label-position=\"right\" \n      label-width=\"160px\"\n      ref=\"ruleForm\"\n      :rules=\"rules\"\n      >\n      <el-form-item label=\"供应商\" prop=\"vendorNo\">\n        <el-select \n          class=\"add-input\" \n          v-model=\"addParamMsg.vendorNo\" \n          placeholder=\"选择供应商\" \n          size=\"small\"\n          disabled\n          @change=\"vendorNoChange\">\n          <el-option \n            v-for=\"item in vendors\" \n            :key=\"item.vendorNo\" \n            :label=\"item.vendorName\" \n            :value=\"item.vendorNo\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"价格有效起始时间\" prop=\"startTime\">\n        <el-date-picker\n          disabled \n          :clearable=\"false\"\n          class=\"add-input\" \n          v-model=\"addParamMsg.startTime\" \n          type=\"datetime\" \n          placeholder=\"价格有效起始时间\"\n          format=\"yyyy-MM-dd HH:mm:ss\" \n          value-format=\"yyyy-MM-dd HH:mm:ss\" \n          size=\"small\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"价格有效终止时间\" prop=\"endTime\">\n        <el-date-picker \n          disabled\n          :clearable=\"false\"\n          class=\"add-input\" \n          v-model=\"addParamMsg.endTime\" \n          type=\"datetime\" \n          placeholder=\"价格有效终止时间\"\n          format=\"yyyy-MM-dd HH:mm:ss\" \n          value-format=\"yyyy-MM-dd HH:mm:ss\" \n          size=\"small\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item label=\"区域\" prop=\"regionNos\">\n        <el-select \n          disabled\n          class=\"add-input\" \n          v-model=\"addParamMsg.regionNos\" \n          placeholder=\"选择区域\" \n          multiple\n          size=\"small\">\n          <el-option \n            v-for=\"item in regionsList\" \n            :key=\"item.storeGroupNo\" \n            :label=\"item.storeGroupName\" \n            :value=\"item.storeGroupNo\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"选择商品\" required>\n        <el-button type=\"primary\" @click=\"showAddGoodsDialog\" size=\"mini\" icon=\"el-icon-plus\" v-if=\"type === 'edit'\">添加商品</el-button>\n        <bl-table\n          :border=\"false\"\n          :dataSource=\"checkedGoodsList\"\n          :columns=\"columns\"\n          :maxHeight=\"400\"/>\n      </el-form-item>\n      <el-form-item>\n        <hr class=\"s-slip-tb\">\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel(0)\" :disabled=\"isDisabled\" :loading=\"isDisabled && addParamMsg.status === 0\" v-if=\"type === 'edit'\">保存</el-button>\n        <el-button type=\"primary\" size=\"small\" @click=\"doSaveHandel(1)\" :disabled=\"isDisabled\" :loading=\"isDisabled && addParamMsg.status === 1\" v-if=\"type === 'edit'\">保存并发布</el-button>\n        <el-button size=\"small\" @click=\"doCancelHandel\">关闭</el-button>\n      </el-form-item>\n    </el-form>\n    <choose-goods ref=\"chooseGoods\" @confirm=\"confirmHandel\"/>\n  </div>\n</template>\n<script>\nimport vendorsMixin from '@/module/mixin/getVendors'\nimport regionsMixin from '@/module/mixin/getRegions'\nimport optionsMixin from '@/module/mixin/options'\nimport requestUrl from '@/module/api/saleMgtUrl'\nimport ChooseGoods from './ChooseGoods'\nimport {dateFormat, changeDateToTimestamp} from '@/utils/utils'\nimport constantUtil from '@/utils/constant'\nimport constants from './constants'\nexport default {\n  mixins: [vendorsMixin, regionsMixin, optionsMixin],\n  components: {\n    ChooseGoods\n  },\n  data() {\n    const vendorNoValidator = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请选择供应商'))\n      }else {\n        callback()\n      }\n    }\n    const timeValidator = (rule, value, callback) => {\n      if (!this.addParamMsg.startTime) {\n        return callback(new Error('请选择价格有效起始时间'))\n      }else if (!this.addParamMsg.endTime) {\n        return callback(new Error('请选择价格有效终止时间'))\n      }else if(changeDateToTimestamp(this.addParamMsg.endTime) < changeDateToTimestamp(this.addParamMsg.startTime)) {\n        return callback(new Error('价格有效终止时间不能早于起始时间'))\n      }else {\n        callback()\n      }\n    }\n    const regionNosValidator = (rule, value, callback) => {\n      if (!this.addParamMsg.regionNos || this.addParamMsg.regionNos.length === 0) {\n        return callback(new Error('请选择区域'))\n      }else {\n        callback()\n      }\n    }\n    return {\n      type: 'see',\n      quoteNo: '',\n      isDisabled: false,\n      addParamMsg: {\n        vendorNo: '',\n        vendorName: '',\n        startTime: dateFormat('yyyy-MM-dd HH:mm:ss', new Date().getTime()),\n        endTime: dateFormat('yyyy-MM-dd HH:mm:ss', new Date().getTime() + 86400000),\n        goods: [],\n        regionNos: [],\n        regions: [],\n        status: '' // 0：保存  1：保存并发布\n      },\n      rules: {\n        vendorNo: [\n          {required: true, validator: vendorNoValidator, trigger: 'change'}\n        ],\n        startTime: [\n          {required: true, validator: timeValidator, trigger: 'change'}\n        ],\n        endTime: [\n          {required: true, validator: timeValidator, trigger: 'change'}\n        ],\n        regionNos: [\n          {required: true, validator: regionNosValidator, trigger: 'change'}\n        ]\n      },\n      checkedGoodsList: [],\n      columns: [\n        {\n          title: '条形码',\n          dataIndex: 'barCode',\n          ellipsis: true,\n          minWidth: 120\n        },\n        {\n          title: '商品编码',\n          dataIndex: 'goodsNo',\n          minWidth: 100\n        },\n        {\n          title: '货号',\n          dataIndex: 'vendorGoodsNo',\n          minWidth: 100\n        },\n        {\n          title: '商品名称',\n          dataIndex: 'name',\n          ellipsis: true,\n          minWidth: 120\n        },\n        {\n          title: '规格',\n          dataIndex: 'spec',\n          minWidth: 80\n        },\n        {\n          title: '单位',\n          dataIndex: 'saleUnitName',\n          minWidth: 80\n        },\n        {\n          title: '市场参考价',\n          dataIndex: 'showPrice',\n          input: this.showInput,\n          placeholder: '市场参考价',\n          minWidth: 100\n        },\n        {\n          title: '销售价',\n          dataIndex: 'salePrice',\n          input: this.showInput,\n          placeholder: '销售价',\n          minWidth: 100\n        },\n        {\n          title: '日均可订货量',\n          dataIndex: 'qty',\n          input: this.showInput,\n          placeholder: '日均可订货量',\n          minWidth: 120\n        }\n      ]\n    }\n  },\n  created() {\n    this.type = this.$route.params.type\n    this.quoteNo = this.$route.params.id\n    let optionColumn = {\n      title: '操作',\n      width: 80,\n      fixed: 'right',\n      operation: [\n        {\n          label: '删除',\n          icon: 'el-icon-delete',\n          clickFunc: this.deleteHandel\n        }\n      ]\n    }\n    if(this.type === 'edit') {\n      this.columns.push(optionColumn)\n    }\n  },\n  mounted() {\n    this.getDetailMsg()\n  },\n  methods: {\n    showInput() {\n      return this.type === 'edit'\n    },\n    getDetailMsg() {\n      this.$loading.show()\n      this.$http.post(requestUrl.getQuoteDetail, {quoteNo: this.quoteNo}).then(res => {\n        this.$loading.hide()\n        if(res.code === 0) {\n          let orderMsg = res.data ? {...res.data} : {}\n          this.quoteNo = orderMsg.quoteNo\n          this.addParamMsg.vendorNo = orderMsg.vendorNo\n          this.addParamMsg.vendorName = orderMsg.vendorName\n          this.addParamMsg.startTime = orderMsg.startTime\n          this.addParamMsg.endTime = orderMsg.endTime\n          this.addParamMsg.status = orderMsg.status\n          let goodsListTemp = orderMsg.goods && orderMsg.goods.length ? orderMsg.goods : []\n          goodsListTemp.forEach(item => {\n            item.barCode = item.barcode\n            item.goodsNo = item.erpGoodsNo\n            item.name = item.goodsName\n            item.saleUnitName = item.unit\n          })\n          this.checkedGoodsList = goodsListTemp\n          this.addParamMsg.regionNos = [orderMsg.regionCode]\n          this.addParamMsg.regions = [{\n            regionCode: orderMsg.regionCode,\n            regionName: orderMsg.regionName\n          }]\n          return\n        }\n        throw new Error(res.msg)\n      }).catch(err => {\n        this.$loading.hide()\n        this.$tip.notify(e.message || '', 'error', '系统提示')\n      })\n    },\n    showAddGoodsDialog() {\n      if(!this.addParamMsg.vendorNo) {\n        this.$tip.message(\"请先选择供应商\", \"warning\")\n        return\n      }\n      this.$nextTick(() => {\n        this.$refs.chooseGoods.setDefaultMsg({\n          title: '选择商品',\n          vendorNo: this.addParamMsg.vendorNo,\n          defaultChecked: this.checkedGoodsList\n        })\n      })\n    },\n    confirmHandel(result) {\n      this.checkedGoodsList = [...result]\n    },\n    deleteHandel(row) {\n      this.checkedGoodsList = this.checkedGoodsList.filter(item => {\n        return item.goodsNo !== row.goodsNo\n      })\n    },\n    doSaveHandel(status) {\n      this.$refs.ruleForm.validate((valid) => {\n        if(!valid) return false\n        if(!this.checkedGoodsList || this.checkedGoodsList.length === 0) {\n          this.$tip.message(\"请选择商品\", \"warning\")\n          return\n        } \n        for(let item of this.checkedGoodsList) {\n          if(!item.showPrice && parseFloat(item.showPrice) != 0) {\n            this.$tip.message(`请输入【${item.name}】的市场参考价`, \"warning\")\n            return\n          }else if(!constantUtil.salePriceReg.test(item.showPrice)) {\n            this.$tip.message(`【${item.name}】的市场参考价应为数字，小数保留两位小数`, \"warning\")\n            return\n          }\n          if(!item.salePrice && parseFloat(item.salePrice) != 0) {\n            this.$tip.message(`请输入【${item.name}】的销售价`, \"warning\")\n            return\n          }else if(!constantUtil.salePriceReg.test(item.salePrice)) {\n            this.$tip.message(`【${item.name}】的市场销售价应为数字，小数保留两位小数`, \"warning\")\n            return\n          }\n          if(parseFloat(item.salePrice) > parseFloat(item.showPrice)) {\n            this.$tip.message(`【${item.name}】的销售价不能大于市场参考价`, \"warning\")\n          }\n          if(!item.qty && parseInt(item.qty) != 0) {\n            this.$tip.message(`请输入【${item.name}】的日均可订货量`, \"warning\")\n            return\n          }else if(!constantUtil.numReg.test(item.qty)) {\n            this.$tip.message(`【${item.name}】的日均可订货量应为整数`, \"warning\")\n            return\n          }\n        }\n        this.addParamMsg.status = status\n        // 供应商名称\n        let filterVendorMsg = this.vendors.filter(item => {\n          return item.vendorNo === this.addParamMsg.vendorNo\n        })[0]\n        this.addParamMsg.vendorName = filterVendorMsg ? filterVendorMsg.vendorName : ''\n        // 区域\n        let regionsList = []\n        for(let i of this.regionsList) {\n          for(let j of this.addParamMsg.regionNos) {\n            if(i.storeGroupNo === j) {\n              regionsList.push(i)\n            }\n          }\n        }\n        this.addParamMsg.regions = regionsList.map(item => {\n          return {\n            regionCode: item.storeGroupNo,\n            regionName: item.storeGroupName\n          }\n        })\n        // 商品\n        this.addParamMsg.goods = this.checkedGoodsList.map(item => {\n          let newItem = {\n            erpGoodsNo: item.goodsNo,\n            goodsName: item.name,\n            unit: item.saleUnitName,\n            barcode: item.barCode,\n            ...item\n          }\n          return newItem\n        })\n        // 报价单号\n        this.addParamMsg.quoteNo = this.quoteNo\n        // 保存询价进价\n        this.isDisabled = true\n        this.$http.post(requestUrl.addOrUpdateQuote, {...this.addParamMsg}).then(res => {\n          this.isDisabled = false\n          if(res.code === 0) {\n            this.$tip.message('编辑成功', 'success');\n            // 设置刷新列表页状态\n            this.editSuccessHandel('/sale_mgt')\n            // 关闭当前页并跳转至详情页\n            this.closePage(`/sale_mgt/see/${this.quoteNo}`)\n            return\n          }\n          throw new Error(res.msg)\n        }).catch(e => {\n          this.isDisabled = false\n          this.$tip.notify(e.message || '', 'error', '系统提示')\n        })\n      })\n    },\n    vendorNoChange() {\n      this.checkedGoodsList = []\n    },\n    doCancelHandel() {\n      this.closePage('/sale_mgt')\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/module/views/AgentCamp/SaleMgt/Edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-form-wraper\"},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.addParamMsg,\"label-position\":\"right\",\"label-width\":\"160px\",\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"供应商\",\"prop\":\"vendorNo\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"placeholder\":\"选择供应商\",\"size\":\"small\",\"disabled\":\"\"},on:{\"change\":_vm.vendorNoChange},model:{value:(_vm.addParamMsg.vendorNo),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"vendorNo\", $$v)},expression:\"addParamMsg.vendorNo\"}},_vm._l((_vm.vendors),function(item){return _c('el-option',{key:item.vendorNo,attrs:{\"label\":item.vendorName,\"value\":item.vendorNo}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"价格有效起始时间\",\"prop\":\"startTime\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"disabled\":\"\",\"clearable\":false,\"type\":\"datetime\",\"placeholder\":\"价格有效起始时间\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.startTime),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"startTime\", $$v)},expression:\"addParamMsg.startTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"价格有效终止时间\",\"prop\":\"endTime\"}},[_c('el-date-picker',{staticClass:\"add-input\",attrs:{\"disabled\":\"\",\"clearable\":false,\"type\":\"datetime\",\"placeholder\":\"价格有效终止时间\",\"format\":\"yyyy-MM-dd HH:mm:ss\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.endTime),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"endTime\", $$v)},expression:\"addParamMsg.endTime\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"区域\",\"prop\":\"regionNos\"}},[_c('el-select',{staticClass:\"add-input\",attrs:{\"disabled\":\"\",\"placeholder\":\"选择区域\",\"multiple\":\"\",\"size\":\"small\"},model:{value:(_vm.addParamMsg.regionNos),callback:function ($$v) {_vm.$set(_vm.addParamMsg, \"regionNos\", $$v)},expression:\"addParamMsg.regionNos\"}},_vm._l((_vm.regionsList),function(item){return _c('el-option',{key:item.storeGroupNo,attrs:{\"label\":item.storeGroupName,\"value\":item.storeGroupNo}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"选择商品\",\"required\":\"\"}},[(_vm.type === 'edit')?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.showAddGoodsDialog}},[_vm._v(\"添加商品\")]):_vm._e(),_vm._v(\" \"),_c('bl-table',{attrs:{\"border\":false,\"dataSource\":_vm.checkedGoodsList,\"columns\":_vm.columns,\"maxHeight\":400}})],1),_vm._v(\" \"),_c('el-form-item',[_c('hr',{staticClass:\"s-slip-tb\"}),_vm._v(\" \"),(_vm.type === 'edit')?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"loading\":_vm.isDisabled && _vm.addParamMsg.status === 0},on:{\"click\":function($event){return _vm.doSaveHandel(0)}}},[_vm._v(\"保存\")]):_vm._e(),_vm._v(\" \"),(_vm.type === 'edit')?_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.isDisabled,\"loading\":_vm.isDisabled && _vm.addParamMsg.status === 1},on:{\"click\":function($event){return _vm.doSaveHandel(1)}}},[_vm._v(\"保存并发布\")]):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.doCancelHandel}},[_vm._v(\"关闭\")])],1)],1),_vm._v(\" \"),_c('choose-goods',{ref:\"chooseGoods\",on:{\"confirm\":_vm.confirmHandel}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5e4da554\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/module/views/AgentCamp/SaleMgt/Edit.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5e4da554\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/module/views/AgentCamp/SaleMgt/Edit.vue\n// module id = null\n// module chunks = ","import {mapGetters} from 'vuex'\nexport default {\n  created() {\n    if(!this.regionsList || this.regionsList.length === 0) {\n      this.$store.dispatch(\"regions/GET_REGIONS\")\n    }\n  },\n  computed: {\n    ...mapGetters({\n      regionsList: 'regions/REGIONS'\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/module/mixin/getRegions.js"],"sourceRoot":""}